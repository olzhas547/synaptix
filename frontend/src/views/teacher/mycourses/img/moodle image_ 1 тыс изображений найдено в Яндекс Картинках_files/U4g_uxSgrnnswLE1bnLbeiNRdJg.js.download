window.jQuery&&window.jQuery.fn.bem&&window.bemhtml&&BEM.DOM.decl({block:"i-react-ajax-adapter"},{_request:function(e,t){var a=e.url||BEM.blocks["i-global"].param("router").search,r=$.extend({ctx:this,cache:!1,url:a},e.requestParams),n=$.extend({type:e.type,subtype:e.subtype},e.adapterParams),s={responseText:"Adapter result is not ok",status:500,statusText:"Internal Server Error"},o=r.navi?e.args:BEM.blocks["i-url-controller"].mergePassedUrlParams(e.args);return BEM.create("i-request_type_bem",r).block({block:"i-react-ajax-adapter:ajax"},function(e){e&&e.params&&e.params.ok?t(null,e):r.fixAPI?t(s):t(new Error("Adapter result is not ok"))},function(e){var a;if(a=e?e.statusText+": "+e.responseText:"Adapter result is not ok",r.fixAPI){var n=e?{responseText:e.responseText||"",status:e.status,statusText:e.statusText}:s;t(n)}else t(new Error(a))},n).get(o)},_onAjaxRequest:function(e,t){var a=this;t=t||$.noop,this._request(e,function(e,r){a._onAjaxRequestSuccess(e,r,t)})},_onAjaxRequestSuccess:function(e,t,a){e?a(e):a(null,t.params.adapterData)},_onAjaxRender:function(e,t,a){if(e){var r=this;a=a||$.noop,t.adapterParams=t.adapterParams||{},t.adapterParams.preventAjaxMethod=!0,this._request(t,function(t,n){r._onAjaxRenderSuccess(t,n,e,a)})}else a(new Error("Container not found"))},_onAjaxRenderSuccess:function(e,t,a,r){if(e)r(e);else if(t.html){var n=$(a);Ya.reactBus.emit("react-adapter:unmount",n.get(0)),BEM.DOM.update(n,t.html,function(){Ya.reactBus.emit("react-adapter:mount",n.get(0)),r(null)})}else r(new Error("Empty html in response"))}},{live:function(){this.liveInitOnReactBusEvent("react-ajax-adapter:request",function(e,t){this._onAjaxRequest(e,t)}).liveInitOnReactBusEvent("react-ajax-adapter:render",function(e,t,a){this._onAjaxRender(e,t,a)}).liveInitOnChannelEvent("i-react-ajax-adapter","render",function(e,t){this._onAjaxRender(t.container,t.params,t.callback)})}});