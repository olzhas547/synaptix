function runCommon(){var t,e,i,n,s,o,r,a,c,l,u,h,d,p;!function(t){var e=function(){return"_"}.toString().indexOf("_")>-1,i=function(){},n=Object.create||function(t){var e=function(){};return e.prototype=t,new e},s=Object.keys,o=t.extend,r=Array.isArray,a=t.isFunction,c=!0,l={toString:""};for(var u in l)l.hasOwnProperty(u)&&(c=!1);var h=c?["toString","valueOf"]:null;function d(i,n,o){for(var r,l,u=function(t){var e=s(t);if(c)for(var i,n=0;i=h[n++];)t.hasOwnProperty(i)&&e.push(i);return e}(o),d=0,p=u.length;d<p;)"__self"!==(r=u[d++])&&(l=o[r],a(l)&&(!e||l.toString().indexOf(".__base")>-1)?n[r]=function(e,s){var o=function(){var t=this.__base;this.__base=o.__base;var e=s.apply(this,arguments);return this.__base=t,e};return o.__base=i[e]||("__constructor"===e?n.__self.__parent:t.noop),o}(r,l):n[r]=l)}function p(e,i){for(var n,s=1;n=e[s++];)i?a(n)?t.inheritSelf(i,n.prototype,n):t.inheritSelf(i,n):i=a(n)?t.inherit(e[0],n.prototype,n):t.inherit(e[0],n);return i||e[0]}t.inherit=function(){var t=arguments,e=r(t[0]),s=e||a(t[0]),c=s?e?p(t[0]):t[0]:i,l=t[s?1:0]||{},u=t[s?2:1],h=l.__constructor||s&&c.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:s?function(){return c.apply(this,arguments)}:function(){};if(!s)return h.prototype=l,h.prototype.__self=h.prototype.constructor=h,o(h,u);o(h,c),h.__parent=c;var f=c.prototype,m=h.prototype=n(f);return m.__self=m.constructor=h,l&&d(f,m,l),u&&d(c,h,u),h},t.inheritSelf=function(){var t=arguments,e=r(t[0])?p(t[0],t[0][0]):t[0],i=t[1],n=t[2],s=e.prototype;return i&&d(s,s,i),n&&d(e,e,n),e},t.inherit.self=t.inheritSelf}(jQuery),function(t){var e=0,i="__"+Number(new Date),n=function(){return"uniq"+ ++e};t.identify=function(t,e){if(!t)return n();var s="uniqueID"in t?"uniqueID":i;return e||s in t?t[s]:t[s]=n()}}(jQuery),function(t){var e="__"+Number(new Date)+"storage",i=function(e,i){return t.identify(e)+(i?t.identify(i):"")},n={buildEventName:function(t){return t},on:function(n,s,o,r,a){if("string"==typeof n){t.isFunction(s)&&(r=o,o=s,s=void 0);for(var c,l=i(o,r),u=this[e]||(this[e]={}),h=n.split(" "),d=0;n=h[d++];)if(!(l in(c=u[n=this.buildEventName(n)]||(u[n]={ids:{},list:{}})).ids)){var p=c.list,f={fn:o,data:s,ctx:r,special:a};p.last?(p.last.next=f,f.prev=p.last):p.first=f,c.ids[l]=p.last=f}}else{var m=this;t.each(n,function(t,e){m.on(t,e,s,a)})}return this},onFirst:function(t,e,i,n){return this.on(t,e,i,n,{one:!0})},un:function(n,s,o){if("string"==typeof n||void 0===n){var r=this[e];if(r)if(n){for(var a,c=n.split(" "),l=0;n=c[l++];)if(a=r[n=this.buildEventName(n)])if(s){var u=i(s,o),h=a.ids;if(u in h){var d=a.list,p=h[u],f=p.prev,m=p.next;f?f.next=m:p===d.first&&(d.first=m),m?m.prev=f:p===d.last&&(d.last=f),delete h[u]}}else delete this[e][n]}else delete this[e]}else{var g=this;o=s,t.each(n,function(t,e){g.un(t,e,o)})}return this},trigger:function(i,n){var s=this[e],o="string"==typeof i,r=o?i:i.type,a=this.buildEventName(r);if(o||(i.type=a,i.target||(i.target=this)),s&&(s=s[a])){var c,l=s.list.first;for(l&&o&&((i=t.Event(a)).target=this);l;)i.data=l.data,void 0!==(c=l.fn.call(l.ctx||this,i,n))&&(i.result=c,!1===c&&(i.preventDefault(),i.stopPropagation())),l.special&&l.special.one&&this.un(r,l.fn,l.ctx),l=l.next}return this}};t.observable=t.inherit(n,n)}(jQuery),t=Array.prototype.slice,Function.prototype.bind||(Function.prototype.bind=function(e){var i=this,n=t.call(arguments,1);return function(){return i.apply(e,n.concat(t.call(arguments)))}}),function(t,e){var i=[],n=t.inherit,s=t.isFunction,o=Function.prototype.call.bind(Object.prototype.hasOwnProperty),r={},a={};function c(t,e,i){return(t?"__elem_"+t:"")+"__mod"+(e?"_"+e:"")+(i?"_"+i:"")}function l(t,e,i){var n,r,a;if(s(t))e[c(i,"*","*")]=t;else for(n in t)if(o(t,n))if(a=t[n],s(a))e[c(i,n,"*")]=a;else for(r in a)o(a,r)&&(e[c(i,n,r)]=a[r])}function u(t){var e;if(t.onSetMod&&(l(t.onSetMod,t),delete t.onSetMod),t.onElemSetMod){for(e in t.onElemSetMod)o(t.onElemSetMod,e)&&l(t.onElemSetMod[e],t,e);delete t.onElemSetMod}}this.BEM=n(t.observable,{__constructor:function(t,e,i){var n=this;n._modCache=t||{},n._processingMods={},n._params=e,n.params=null,!1!==i?n._init():n.afterCurrentEvent(function(){n._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=t.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(t,e){return t.bind(e||this)},afterCurrentEvent:function(t,e){this.__self.afterCurrentEvent(t.bind(e||this))},on:function(e,i,n,s){return"object"==typeof e&&(t.isFunction(i)||t.isFunction(n))&&(e=this.__self._buildModEventName(e)),this.__base.apply(this,arguments)},un:function(e,i,n){return"object"==typeof e&&t.isFunction(i)&&(e=this.__self._buildModEventName(e)),this.__base.apply(this,arguments)},trigger:function(e,i){var n=!0;return"object"!=typeof e||e instanceof t.Event||(n="js"===e.modName||this.hasMod("js"),e=this.__self._buildModEventName(e)),n&&(this.__base(e=this.buildEvent(e),i),this._trigger(e,i)),this},_trigger:function(t,e){this.__self.trigger(t,e)},buildEvent:function(e){return"string"==typeof e&&(e=t.Event(e)),e.block=this,e},hasMod:function(t,e,i){var n=arguments.length,s=!1;1==n?(i="",e=t,t=void 0,s=!0):2==n&&("string"==typeof t?(i=e,e=t,t=void 0):(i="",s=!0));var o=this.getMod(t,e)===i;return s?!o:o},getMod:function(t,e){var i=typeof t;if("string"===i||"undefined"===i){e=t||e;var n=this._modCache;return e in n?n[e]:n[e]=this._extractModVal(e)}return this._getElemMod(e,t)},_getElemMod:function(t,e,i){return this._extractModVal(t,e,i)},getMods:function(t){var e=t&&"string"!=typeof t,i=this._modCache,n=[].slice.call(arguments,e?1:0);return n.length?n.reduce(function(t,e){return e in i&&(t[e]=i[e]),t},{}):i},setMod:function(e,i,n){void 0===n&&("string"==typeof e?(n=void 0===i||i,i=e,e=void 0):n=!0);var s=this;if(!e||e[0]){!1===n||null===n?n="":!0!==n&&(n=n.toString());var o=(e&&e[0]?t.identify(e[0]):"")+"_"+i;if(this._processingMods[o])return s;var r,a=e?s._getElemMod(i,e,r=s.__self._extractElemNameFrom(e)):s.getMod(i);if(a===n)return s;this._processingMods[o]=!0;var c=!0,l=[i,n,a];e&&l.unshift(e),[["*","*"],[i,"*"],[i,n]].forEach(function(t){c=!1!==s._callModFn(r,t[0],t[1],l)&&c}),!e&&c&&(s._modCache[i]=n),c&&s._afterSetMod(i,n,a,e,r),delete this._processingMods[o]}return s},_afterSetMod:function(t,e,i,n,s){var o={modName:t,modVal:e,oldModVal:i};n&&(o.elem=n),this.trigger({modName:t,modVal:"*",elem:s},o).trigger({modName:t,modVal:e,elem:s},o)},toggleMod:function(t,e,i,n,s){"string"==typeof t&&(s=n,n=i,i=e,e=t,t=void 0),void 0===n?n="":"boolean"==typeof n&&(s=n,n="");var o=this.getMod(t,e);return(o==i||o==n)&&this.setMod(t,e,"boolean"==typeof s?s?i:n:this.hasMod(t,e,i)?n:i),this},delMod:function(t,e){return e||(e=t,t=void 0),this.setMod(t,e,"")},_callModFn:function(t,e,i,n){var s=c(t,e,i);return this[s]?this[s].apply(this,n):void 0},_extractModVal:function(t,e){return""},channel:function(t,e){return this.__self.channel(t,e)},getDefaultParams:function(){return{}},del:function(t){var e=[].slice.call(arguments);return"string"==typeof t&&e.unshift(this),this.__self.del.apply(this.__self,e),this},destruct:function(){var t={modName:"js",modVal:"",oldModVal:"inited"};this.trigger({modName:t.modName,modVal:t.modVal},t)}},t.extend(this.BEM,{_name:"i-bem",blocks:r,decl:function(e,i,o){"string"==typeof e?e={block:e}:e.name&&(e.block=e.name),u(i||(i={}));var a,c,l=r[e.baseBlock||e.block]||this;if(e.modName){var h=(a=e.modName,(c=e.modVal)?Array.isArray(c)?function(t){for(var e=0,i=c.length;e<i;)if(t.hasMod(a,c[e++]))return!0;return!1}:function(t){return t.hasMod(a,c)}:function(t){return t.hasMod(a)});t.each(i,function(t,e){s(e)&&(i[t]=function(){var n;if(h(this))n=e;else{var s=l.prototype[t];s&&s!==i[t]&&(n=this.__base)}return n?n.apply(this,arguments):void 0})})}if(o&&"boolean"==typeof o.live){var d=o.live;o.live=function(){return d}}var p,f=l;return e.baseMix&&(f=[f],e.baseMix.forEach(function(t){f.push(r[t])})),e.block==l._name?(p=n.self(f,i,o))._processLive(!0):((p=r[e.block]=n(f,i,o))._name=e.block,delete p._liveInitable),p},declMix:function(t,e,i){return u(e||(e={})),t=r[t]=n(e,i)},_processLive:function(t){return!1},create:function(t,e){return"string"==typeof t&&(t={block:t}),new r[t.block](t.mods,e)},getName:function(){return this._name},on:function(e,i,n,s){return"object"==typeof e&&(t.isFunction(i)||t.isFunction(n))&&(e=this._buildModEventName(e)),this.__base.apply(this,arguments)},un:function(e,i,n){return"object"==typeof e&&t.isFunction(i)&&(e=this._buildModEventName(e)),this.__base.apply(this,arguments)},_buildModEventName:function(t){var e="_"+t.modName+"_"+(!1===t.modVal?"":t.modVal);return t.elem&&(e="__"+t.elem+e),e},_extractElemNameFrom:function(t){},afterCurrentEvent:function(t,e){1==i.push({fn:t,ctx:e})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var t=i.length;t&&i.splice(0,t).forEach(function(t){t.fn.call(t.ctx||this)},this)},changeThis:function(t,e){return t.bind(e||this)},del:function(t){var e="string"==typeof t,i=e?0:1,n=arguments.length;for(e&&(t=this);i<n;)delete t[arguments[i++]];return this},channel:function(e,i){if("boolean"==typeof e&&(i=e,e=void 0),e||(e="default"),!i)return a[e]||(a[e]=new t.observable);a[e]&&(a[e].un(),delete a[e])}}))}(jQuery),function(t,e,i){var n,s="_",o="__";function r(t){var e=typeof t;return"string"===e||"number"===e||"boolean"===e}function a(t,e,i){null!=e&&!1!==e&&(i.push(s,t),!0!==e&&i.push(s,e))}function c(t,e,i,n){n.push(t),a(e,i,n)}function l(t,e,i,s,r){c(t,n,n,r),r.push(o,e),a(i,s,r)}t.INTERNAL={NAME_PATTERN:"[a-zA-Z0-9-]+",MOD_DELIM:s,ELEM_DELIM:o,buildModPostfix:function(t,e,i){var n=i||[];return a(t,e,n),i?n:n.join("")},buildClass:function(t,e,i,s,o){if(r(i)?r(s)||(o=s,s=i,i=e,e=n):void 0!==i?(o=i,i=n):e&&"string"!=typeof e&&(o=e,e=n),!e&&void 0===i&&!o)return t;var a=o||[];return e?l(t,e,i,s,a):c(t,i,s,a),o?a:a.join("")},buildClasses:function(t,i,n,s){i&&"string"!=typeof i&&(s=n,n=i,i=void 0);var o=s||[];return i?l(t,i,void 0,void 0,o):c(t,void 0,void 0,o),n&&e.each(n,function(e,n){n&&(o.push(" "),i?l(t,i,e,n,o):c(t,e,n,o))}),s?o:o.join("")}}}(BEM,jQuery),function(t,e,i){var n=e(window),s=e(document),o={},r={},a={},c={},l={},u=t.blocks,h=t.INTERNAL,d=h.NAME_PATTERN,p=h.MOD_DELIM,f=h.ELEM_DELIM,m=RegExp("[^"+p+"]"+p+"("+d+")(?:"+p+"("+d+"))?$"),g=h.buildModPostfix,_=h.buildClass,b=Array.prototype.slice,v=Array.prototype.reverse;function y(t,n,s,a,c){"boolean"==typeof s&&(c=a,a=s,s=i);var l=n[0];if(!l||l.dataset===i||"react"!==l.dataset.lego){var h=(s=E(s||k(l)[t],l,t)).uniqId;if(r[h])return r[h]._init();o[h]=o[h]?o[h].add(n):n;var d=l.parentNode;d&&11!==d.nodeType||e.unique(o[h]);var p=u[t]||C.decl(t,{},{live:!0});if(!(p._liveInitable=Boolean(p._processLive()))||a||!1===s.live){a&&n.addClass("i-bem");var f=new p(o[h],s,Boolean(a));return delete o[h],c&&c.apply(f,b.call(arguments,4)),f}}}function E(t,i,n,s){(t||(t={})).uniqId||(t.uniqId=(t.id?n+"-id-"+t.id:e.identify())+(s||e.identify()));var o=e.identify(i),r=a[o]||(a[o]={});return r[n]||(r[n]=t),t}function M(t,e,i){var n=t.find(e);return i?n:n.add(t.filter(e))}function k(t){var i=e.identify(t);return a[i]||(a[i]=w(t))}function w(t){var e,i=t.getAttribute("data-bem");return i?JSON.parse(i):e?e():{}}function B(t){delete a[e.identify(t)]}function S(t,e){1===t.domElem.length?t.destruct(!0):t.domElem=t.domElem.not(e)}e.fn.bem=function(t,e){return y(t,this,e,!0)};var C=t.DOM=t.decl("i-bem__dom",{__constructor:function(t,i,n){this.domElem=t,this._eventNameCache={},this._elemCache={},this._blockInsideCache={},r[this._uniqId=i.uniqId||e.identify(this)]=this,this._needSpecialUnbind=!1,this.__base(null,i,n)},findBlocksInside:function(t,e){return this._findBlocks("find",t,e)},findBlockInside:function(t,e){var i=this._buildBlockCacheKey(t,e),n=this._findBlocks("find",t,e,!0);return this._blockInsideCache[i]=n,n},blockInside:function(t,e){var i=this._buildBlockCacheKey(t,e),n=this._blockInsideCache[i];return n||(n=this.findBlockInside(t,e)),n},dropBlockInsideCache:function(t,e){t||e?this._blockInsideCache[this._buildBlockCacheKey(t,e)]=null:this._blockInsideCache={}},_buildBlockCacheKey:function(t,e){e||(e=t,t="");var i="string"==typeof e?e:_(e.block,e.modName,e.modVal);return("string"==typeof t?t:t.__bemElemName)+":"+i},findBlocksOutside:function(t,e){return this._findBlocks("parents",t,e)},findBlockOutside:function(t,e){return this._findBlocks("closest",t,e)[0]||null},findBlocksOn:function(t,e){return this._findBlocks("",t,e)},findBlockOn:function(t,e){return this._findBlocks("",t,e,!0)},_findBlocks:function(t,n,s,o){if(!this.domElem)return o?null:[];s||(s=n,n=i);var r=n?"string"==typeof n?this.findElem(n):n:this.domElem,a="string"==typeof s,c=a?s:s.block||s.blockName,l="."+(a?c:_(c,s.modName,s.modVal));if(o&&"find"===t){var u=r.filter(l)[0]||r.find(l)[0];return u?y(c,e(u),!0):null}o&&(l+=":first");var h=r.filter(l);if(t&&(h=h.add(r[t](l))),o)return h[0]?y(c,h.eq(0),!0):null;var d=[],p={};return e.each(h,function(t,i){var n=y(c,e(i),!0);p[n._uniqId]||(p[n._uniqId]=!0,d.push(n))}),d},bindToDomElem:function(t,n,s,o){e.isFunction(s)&&(o=s,s=i);var r=this,a=function(t){return(t.data||(t.data={})).domElem=e(this),o.apply(r,arguments)};return o?t.bind(r._buildEventName(n),s,(a.guid=o.guid=o.guid||e.guid++,a)):e.each(n,function(e,i){r.bindToDomElem(t,e,s,i)}),r},bindToDoc:function(t,e,i){return this._needSpecialUnbind=!0,this.bindToDomElem(s,t,e,i)},bindToWin:function(t,s,o){return e.isFunction(s)&&(o=s,s=i),this._needSpecialUnbind=!0,this.bindToDomElem(n,t,s,o)},bindTo:function(t,i,n,s){switch(arguments.length){case 3:e.isFunction(n)&&(s=n,"object"==typeof i&&(n=i,i=t,t=this.domElem));break;case 2:e.isFunction(i)?(s=i,i=t,t=this.domElem):"string"==typeof t||t instanceof e||(n=i,i=t,t=this.domElem);break;case 1:i=t,t=this.domElem}return"string"==typeof t&&(t=this.elem(t)),this.bindToDomElem(t,i,n,s)},unbindFromDomElem:function(t,e,i){return t.unbind(this._buildEventName(e),i),this},unbindFromDoc:function(t,e){return this.unbindFromDomElem(s,t,e)},unbindFromWin:function(t,e){return this.unbindFromDomElem(n,t,e)},unbindFrom:function(t,i,n){var s=arguments.length;return 1===s?(i=t,t=this.domElem):2===s&&e.isFunction(i)?(n=i,i=t,t=this.domElem):"string"==typeof t&&(t=this.elem(t)),this.unbindFromDomElem(t,i,n)},_buildEventName:function(t){var e=this;return t.indexOf(" ")>1?t.split(" ").map(function(t){return e._buildOneEventName(t)}).join(" "):e._buildOneEventName(t)},_buildOneEventName:function(t){var e=this._eventNameCache;if(t in e)return e[t];var i="."+this._uniqId;if(-1===t.indexOf("."))return e[t]=t+i,e[t];var n=".bem_"+this.__self._name;return e[t]=t.split(".").map(function(t,e){return 0===e?t+n:n+"_"+t}).join("")+i,e[t]},_trigger:function(t,e){this.__base.apply(this,arguments),this._ctxTrigger(t,e)},_ctxTrigger:function(t,i){var n=this,s=c[n.__self._buildCtxEventName(t.type)],o={};s&&n.domElem.each(function(){for(var r=this,a=s.counter;r&&a;){var c=e.identify(r,!0);if(c){if(o[c])break;var l=s.ctxs[c];l&&(e.each(l,function(e,s){s.fn.call(s.ctx||n,t,i)}),a--),o[c]=!0}r=r.parentNode}})},getMods:function(t){var e=t&&"string"!=typeof t,n=this._modCache,s=[].slice.call(arguments,e?1:0),o=this._extractMods(s,e?t:i);return e||(s.length?s.forEach(function(t){n[t]=o[t]}):n=o),o},setMod:function(t,i,n){if(t&&void 0!==n&&t.length>1){var s=this;return t.each(function(){var o=e(this);o.__bemElemName=t.__bemElemName,s.setMod(o,i,n)}),s}return this.__base(t,i,n)},_extractModVal:function(t,e,i){var n,s=(e||this.domElem)[0];return s&&(n=s.getAttribute("class").match(this.__self._buildModValRE(t,i||e))),n?n[2]||!0:""},_extractMods:function(t,e){var i={},n=!t.length,s=0;return((e||this.domElem).eq(0).attr("class").match(this.__self._buildModValRE("("+(n?d:t.join("|"))+")",e,"g"))||[]).forEach(function(t){var e=t.match(m);i[e[1]]=e[2]||!0,++s}),s<t.length&&t.forEach(function(t){t in i||(i[t]="")}),i},_afterSetMod:function(t,i,n,s,o){if(this._isDestructing)return this.__base.apply(this,arguments);var r=this.__self,a=r._buildModClassPrefix(t,o),c=r._buildModValRE(t,o,"g"),l=""===i||!1===i;(s||this.domElem).each(function(){var t=e(this),s=t.attr("class"),o=a;!0!==i&&(o+=p+i),(!0===n?c.test(s):(" "+s).indexOf(" "+a+p)>-1)?t.attr("class",s.replace(c,l?"":"$1"+o)):l||t.addClass(o)}),o&&this.dropElemCache(o,t,n).dropElemCache(o,t,i),this.__base.apply(this,arguments)},findElem:function(t,e,i,n){arguments.length%2?(n=i,i=e,e=t,t=this.domElem):"string"==typeof t&&(t=this.findElem(t)),e=e.split(" ");var s=this.__self.getName(),o=g(i,n),r=[],a=e.map(function(t){return r.push("."+_(s,t,i,n)),t+o}),c=1===a.length,l=M(t,r.join(","));return t===this.domElem&&r.forEach(function(t,i){(this._elemCache[a[i]]=c?l:l.filter(t)).__bemElemName=e[i]},this),l},_elem:function(t,e,i){return this._elemCache[t+g(e,i)]||this.findElem(t,e,i)},elem:function(t,i,n){if(2===arguments.length&&(n=!0),i&&"string"!=typeof i)return i.__bemElemName=t,i;if(t.indexOf(" ")<0)return this._elem(t,i,n);var s=e([]);return t.split(" ").forEach(function(t){s=s.add(this._elem(t,i,n))},this),s},dropElemCache:function(t,e,i){if(t){var n=g(e,i);t.indexOf(" ")<0?delete this._elemCache[t+n]:t.split(" ").forEach(function(t){delete this._elemCache[t+n]},this)}else this._elemCache={};return this},elemParams:function(t){var e;return"string"==typeof t?(e=t,t=this.elem(t)):e=this.__self._extractElemNameFrom(t),w(t[0])[_(this.__self.getName(),e)]||{}},elemify:function(t,i){return(t=e(t)).__bemElemName=i,t},containsDomElem:function(t){var e=!1;return this.domElem.each(function(){return!(e=t.parents().andSelf().index(this)>-1)}),e},buildSelector:function(t,e,i){return this.__self.buildSelector(t,e,i)},destruct:function(t){var i=this.__self;this._isDestructing||(this._isDestructing=!0,this._needSpecialUnbind&&i.doc.add(i.win).unbind("."+this._uniqId),this.dropElemCache().domElem.each(function(t,i){var n=k(i);e.each(n,function(t,e){var n=r[e.uniqId];n?n._isDestructing||S(n,i):delete o[e.uniqId]}),B(i)}),t||this.domElem.remove(),this.__base(),delete r[this.un()._uniqId],delete this.domElem,delete this._elemCache)}},{scope:null,doc:s,win:n,html:e(document.documentElement),_processLive:function(t){var e=this._liveInitable;if("live"in this&&void 0===e^t){e=!1!==this.live();var i=this.getName(),n=this.live;this.live=function(){return this.getName()===i?e:n.apply(this,arguments)}}return e},init:function(t,i,n){!t||e.isFunction(t)?(n=i,i=t,t=s):"string"==typeof t&&(t=e(t));var o=e.identify();return M(t,".i-bem").each(function(){!function(t,i){var n=t[0];e.each(k(n),function(s,o){E(o,n,s,i);var a=r[o.uniqId];a?a.domElem.index(n)<0&&(a.domElem=a.domElem.add(t),e.extend(a._params,o)):y(s,t,o)})}(e(this),o)}),i&&this.afterCurrentEvent(function(){i.call(n||this,t)}),this._runAfterCurrentEventFns(),t},destruct:function(t,n,s){"boolean"!=typeof t&&(s=n,n=t,t=i),n&&(v.call(M(n,".i-bem",s)).each(function(t,i){var n=k(this);e.each(n,function(t,e){if(e.uniqId){var n=r[e.uniqId];n?S(n,i):delete o[e.uniqId]}}),B(this)}),t||(s?n.empty():n.remove()))},update:function(t,e,i,n){return this.destruct(t,!0),this.init(t.html(e),i,n)},replace:function(t,i){return this.destruct(!0,t),this.init(e(i).replaceAll(t))},append:function(t,i){return this.init(e(i).appendTo(t))},prepend:function(t,i){return this.init(e(i).prependTo(t))},before:function(t,i){return this.init(e(i).insertBefore(t))},after:function(t,i){return this.init(e(i).insertAfter(t))},_buildCtxEventName:function(t){return this._name+":"+t},_liveClassBind:function(t,i,n,o){var r=this;if(i.indexOf(" ")>-1)i.split(" ").forEach(function(e){r._liveClassBind(t,e,n,o)});else{var a=l[i],c=e.identify(n);a||(a=l[i]={},s.bind(i,r._liveClassTrigger.bind(r))),c in(a=a[t]||(a[t]={uniqIds:{},fns:[]})).uniqIds||(a.fns.push({uniqId:c,fn:r._buildLiveEventFn(n,o)}),a.uniqIds[c]=a.fns.length-1)}return this},_liveClassUnbind:function(t,i,n){var s=l[i];if(s)if(n){if(s=s[t]){var o=e.identify(n);if(o in s.uniqIds){var r=s.uniqIds[o],a=s.fns.length-1;for(s.fns.splice(r,1);r<a;)s.uniqIds[s.fns[r++].uniqId]=r-1;delete s.uniqIds[o]}}}else delete s[t];return this},_liveClassTrigger:function(t){var i=l[t.type];if(i){var n=t.target,s=Object.keys(i);do{for(var o,r=" "+n.className+" ",a=0;o=s[a++];)if(-1!==r.indexOf(" "+o+" ")){for(var c=!1,u=i[o].fns,h=0;h<u.length;h++)!1===u[h].fn.apply(e(n),arguments)&&(c=!0);if(c&&t.preventDefault(),c||t.isPropagationStopped())return;s.splice(--a,1)}}while(s.length&&(n=n.parentNode))}},_buildLiveEventFn:function(t,i){var n=this;return function(s){var o=[n._name,((s.data||(s.data={})).domElem=e(this)).closest(n.buildSelector()),!0],r=y.apply(null,i?o.concat([t,s]):o);if(r&&!i&&t)return t.apply(r,arguments)}},liveInitOnEvent:function(t,e,i){return this.liveBindTo(t,e,i,!0)},liveBindTo:function(t,n,s,o){n&&!e.isFunction(n)||(s=n,n=t,t=i),t&&"string"!=typeof t||(t={elem:t}),t.elemName&&(t.elem=t.elemName);var r=this;return t.elem&&t.elem.indexOf(" ")>0?(t.elem.split(" ").forEach(function(e){r._liveClassBind(_(r._name,e,t.modName,t.modVal),n,s,o)}),r):r._liveClassBind(_(r._name,t.elem,t.modName,t.modVal),n,s,o)},liveUnbindFrom:function(t,n,s){n&&!e.isFunction(n)||(s=n,n=t,t=i);var o=this;return t&&t.indexOf(" ")>1?(t.split(" ").forEach(function(t){o._liveClassUnbind(_(o._name,t),n,s)}),o):o._liveClassUnbind(_(o._name,t),n,s)},_liveInitOnBlockEvent:function(t,e,i,n){var s=this._name;return u[e].on(t,function(t){if(t.block.domElem){var e=arguments,o=t.block[n](s);i&&o.forEach(function(t){i.apply(t,e)})}}),this},liveInitOnBlockEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksOn")},liveInitOnBlockInsideEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksOutside")},on:function(t,e,i,n,s){return t.jquery?this._liveCtxBind(t,e,i,n,s):this.__base(t,e,i,n,s)},un:function(t,e,i,n){return t.jquery?this._liveCtxUnbind(t,e,i,n):this.__base(t,e,i)},liveCtxBind:function(t,e,i,n,s){return this._liveCtxBind(t,e,i,n,s)},_liveCtxBind:function(t,n,s,o,r){var a=this;if("object"==typeof n&&(e.isFunction(s)||e.isFunction(o))&&(n=this._buildModEventName(n)),"string"==typeof n)if(e.isFunction(s)&&(r=o,o=s,s=i),n.indexOf(" ")>-1)n.split(" ").forEach(function(e){a._liveCtxBind(t,e,s,o,r)});else{var l=a._buildCtxEventName(n),u=c[l]||(c[l]={counter:0,ctxs:{}});t.each(function(){var t=e.identify(this),i=u.ctxs[t];i||(i=u.ctxs[t]={},++u.counter),i[e.identify(o)+(r?e.identify(r):"")]={fn:o,data:s,ctx:r}})}else e.each(n,function(e,i){a._liveCtxBind(t,e,i,s)});return a},liveCtxUnbind:function(t,e,i,n){return this._liveCtxUnbind(t,e,i,n)},_liveCtxUnbind:function(t,i,n,s){"object"==typeof i&&e.isFunction(n)&&(i=this._buildModEventName(i));var o=c[i=this._buildCtxEventName(i)];return o&&(t.each(function(){var t,i=e.identify(this,!0);i&&(t=o.ctxs[i])&&(n&&delete t[e.identify(n)+(s?e.identify(s):"")],n&&!e.isEmptyObject(t)||(o.counter--,delete o.ctxs[i]))}),o.counter||delete c[i]),this},_extractElemNameFrom:function(t){if(t.__bemElemName)return t.__bemElemName;var e=t.eq(0).attr("class").match(this._buildElemNameRE());return e?e[1]:i},extractParams:w,_buildModClassPrefix:function(t,e){return this._name+(e?f+("string"==typeof e?e:this._extractElemNameFrom(e)):"")+p+t},_buildModValRE:function(t,e,i){return new RegExp("(\\s|^)"+this._buildModClassPrefix(t,e)+"(?:"+p+"("+d+"))?(?=\\s|$)",i)},_buildElemNameRE:function(){return new RegExp(this._name+f+"("+d+")(?:\\s|$)")},buildSelector:function(t,e,i){return"."+_(this._name,t,e,i)},getBlockByUniqId:function(t){return r[t]},getWindowSize:function(){return{width:n.width(),height:n.height()}}});e(function(){t.DOM.scope=e("body")})}(BEM,jQuery),BEM.decl("i-bem__dom",{},{liveInitOnBlockInit:function(t,e){return this.liveInitOnBlockEvent("init",t,e)},liveInitOnBlockOutsideEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksInside")},liveInitOnChannelEvent:function(t,e,i){return this._liveInitOnEmitterEvent(BEM.channel(t),e,i)},liveInitOnDomlessBlockEvent:function(t,e,i){return this._liveInitOnEmitterEvent(BEM.blocks[t],e,i)},liveInitOnReactBusEvent:function(t,e){return Ya&&Ya.reactBus&&this._liveInitOnEmitterEvent(Ya.reactBus,t,e),this},_liveInitOnEmitterEvent:function(t,e,i){var n=this.buildSelector(),s=this.getName();return t.on(e,function(){var t=$(n);if(t.length){var e=arguments;t.each(function(t,n){var o=$(n).bem(s);"function"==typeof i&&i.apply(o,e)})}}),this},liveInitOnBlockInsideElemEvent:function(t,e,i,n){var s=this.buildSelector(t);return this.liveInitOnBlockInsideEvent(e,i,function(t){"function"==typeof n&&t.target.domElem.parents(s).length>0&&n.apply(this,arguments)})},liveInitOnBlockElemEvent:function(t,e,i,n){var s=this.buildSelector(t);return this.liveInitOnBlockInsideEvent(e,i,function(t){"function"==typeof n&&t.target.domElem.is(s)&&n.apply(this,arguments)})},liveBindToWin:function(t,e){return this._liveInitOnEmitterEvent(this.win,t,e)},liveBindToDoc:function(t,e){return this._liveInitOnEmitterEvent(this.doc,t,e)}}),function(t){var e=t(window),i=s(),n=o();function s(){return window.innerHeight|0+e.outerHeight()}function o(){return window.innerWidth|0+e.outerWidth()}(t.event.special.resize||(t.event.special.resize={})).preDispatch=function(t){var e=s(),r=o();if(n===r&&i===e)return!1;i=e,n=r}}(jQuery),e=!1,i=[],BEM.channel("i-bem").on("init",function(){e=!0;for(var t=0;t<i.length;t++)i[t]()}),BEM.decl("i-bem__dom",{},{decl:function(t,e,i){var n=this.__base.apply(this,arguments);if("string"==typeof t)return n;if(i&&!1===i.liveMod){var s=t.block||t.name;t.modVal?this._liveModList.push({block:s,selector:".i-bem."+BEM.INTERNAL.buildClass(s,t.modName,t.modVal)}):this._liveModList.unshift({block:s,selector:'.i-bem[class*="'+BEM.INTERNAL.buildClass(s,t.modName,!0)+'"]'})}return n},_liveModList:[],ready:function(t){e?t():i.push(t)},_initAdvanced:function(){BEM.channel("i-bem").trigger("start-init"),this.init();for(var t=this._liveModList,e=0;e<t.length;e++){var i=t[e],n=$(i.selector);n.length&&n.each(function(t,e){$(e).bem(i.block)})}BEM.channel("i-bem").trigger("init")}}),$(function(){window.Ya&&window.Ya.SearchSPA||BEM.afterCurrentEvent(function(){BEM.DOM._initAdvanced()})}),jQuery.cookie=function(t,e,i){if(void 0===e){var n=null;if(document.cookie&&""!=document.cookie)for(var s=document.cookie.split(";"),o=0;o<s.length;o++){var r=jQuery.trim(s[o]);if(r.substring(0,t.length+1)==t+"="){n=decodeURIComponent(r.substring(t.length+1));break}}return n}i=i||{},null===e&&(e="",i.expires=-1);var a,c="";i.expires&&("number"==typeof i.expires||i.expires.toUTCString)&&("number"==typeof i.expires?(a=new Date).setTime(a.getTime()+24*i.expires*60*60*1e3):a=i.expires,c="; expires="+a.toUTCString());var l=i.path?"; path="+i.path:"",u=i.domain?"; domain="+i.domain:"",h=i.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),c,l,u,h].join("")},function(t){var e={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};function i(t,i){var n="";try{n=t(i)}catch(s){try{n=t(function(t){return t.replace(/%.{2}/g,function(t){return e[t]||t})}(i))}catch(t){n=i}}return n}jQuery.extend({decodeURI:function(t){return i(decodeURI,t)},decodeURIComponent:function(t){return i(decodeURIComponent,t)}})}(),BEM.DOM.decl("i-global",{onSetMod:{js:{inited:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name");var t=this.__self._params;t["passport-msg"]||(t["passport-msg"]=t.id),void 0===t["show-counters"]&&(t["show-counters"]=Math.round(100*Math.random())<=t["show-counters-percent"]),t.locale=t.lang,window.BEMHTML&&BEMHTML.apply({block:"i-global",params:t})}}},getDefaultParams:function(){return{id:"",login:this.__self.getCookie("yandex_login")&&$.cookie("yandex_login")||"",yandexuid:$.cookie("yandexuid"),lang:"ru",tld:"ru",retpath:encodeURI($.decodeURI(location.href)),"passport-host":"https://passport.yandex.ru","pass-host":"https://api.passport.yandex.ru","social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100}}},{param:function(t,e){if(void 0===e)return(this._params||{})[t];this._params&&(this._params[t]=e)},getCookie:function(t){var e=document.cookie;if(e.length<1)return!1;var i=e.indexOf(t+"=");if(-1===i)return!1;i+=t.length+1;var n=e.indexOf(";",i);return decodeURIComponent(-1===n?e.substring(i):e.substring(i,n))}}),BEM.DOM.decl("i-global",{},{setParams:function(t){this._params=this._params||{},$.extend(!0,this._params,t),$.extend(!0,Ya.InternalState,t),Ya.reactBus.emit("i-global:update-params",this._params)},setParam:function(t,e){this._params=this._params||{},this._params[t]=e,Ya.InternalState=Ya.InternalState||{},Ya.InternalState[t]=e,Ya.reactBus.emit("i-global:update-params",this._params)},getBlockParams:function(t,e){var i=$(t).data("bem");return!!i&&i[e]}}),BEM.DOM.decl("i-global",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._reactBusConnected=!1,BEM.channel("i-react-bus").on("loaded",this.reactBusLoaded,this),this.reactBusLoaded()}}},reactBusLoaded:function(){window.Ya&&window.Ya.reactBus&&!this._reactBusConnected&&(this._reactBusConnected=!0,this.on("change",function(){Ya.reactBus.emit("i-global:update",this.__self.getParams)},this),Ya.reactBus.emit("i-global:update",this.__self.getParams),Ya.reactBus.on("i-global:get-params",function(t){"function"==typeof t&&t(this.__self.getParams())},this))}},{getParams:function(){return this._params=this._params||{}}}),BEM.decl("i-global__utils",{},{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",base64Encode:function(t,e){e=e||1e6;var i,n,s,o,r,a,c,l="",u=0;for(t=this._utf8_encode(t,3*e/4|0);u<t.length;)o=(i=t.charCodeAt(u++))>>2,r=(3&i)<<4|(n=t.charCodeAt(u++))>>4,a=(15&n)<<2|(s=t.charCodeAt(u++))>>6,c=63&s,isNaN(n)?a=c=64:isNaN(s)&&(c=64),l=l+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(c);return l},_utf8_encode:function(t,e){t=t.replace(/\r\n/g,"\n");for(var i,n="",s=0;s<t.length;s++){var o=t.charCodeAt(s);if(o<128?i=String.fromCharCode(o):o>127&&o<2048?(i=String.fromCharCode(o>>6|192),i+=String.fromCharCode(63&o|128)):(i=String.fromCharCode(o>>12|224),i+=String.fromCharCode(o>>6&63|128),i+=String.fromCharCode(63&o|128)),n.length+i.length>e)break;n+=i}return n},decodeEntities:function(t){return t.replace(/&(lt|gt|quot|apos|amp);/g,function(t,e){return{lt:"<",gt:">",quot:'"',apos:"'",amp:"&"}[e]})},ampUnescape:function(t){return"string"==typeof t?t.replace(/&amp;/g,"&"):""},ampUnescapeInHTMLContent:function(t){return"string"==typeof t?t.replace(/(>[^<]+&amp;[^>]+<)/g,this.ampUnescape):""}}),BEM.DOM.decl("i-global",{},{getFlag:function(t){var e=this.param("expFlags");return e||(e=this.getBlockParams(this.buildSelector(),this.getName()).expFlags||{},this.setParams({expFlags:e})),e[t]}}),BEM.decl("offline-request",{_initOffline:function(){this.bindEvents()},bindEvents:function(){this.__base.apply(this,arguments),this._onOnline=this._onOnline.bind(this),this._onOffline=this._onOffline.bind(this),window.addEventListener("online",this._onOnline),window.addEventListener("offline",this._onOffline)},unbindEvents:function(){window.removeEventListener("online",this._onOnline),window.removeEventListener("offline",this._onOffline),this.__base.apply(this,arguments)},_onOnline:function(){this._onChangeNetworkStatus(!0)},_onOffline:function(){this._onChangeNetworkStatus(!1)},_onChangeNetworkStatus:$.noop},{_isOnlineDetectAllowed:void 0!==window.navigator.onLine,isOnline:function(){return!this._isOnlineDetectAllowed||window.navigator.onLine}}),BEM.decl({block:"counter",baseBlock:"offline-request"},{_dict:{}}),n={all:"136",auto:"227",action:"689",any:"146",ajax:"1201",alt:"2990",banner:"1599",big:"148",bing:"568",black:"201",blocks:"3626",blue:"198",bottom:"668",bw:"666",cart:"2206",cbir:"1031",ces:"1057",clear:"477",click:"882",clipart:"758",close:"486",color:"169",commercial:"2043",contacts:"1802",copyright:"1305",collections:"2177",customize:"178",cyan:"197",demotivator:"760",duplicates:"269",empty:"233",face:"276",fade:"1059",fail:"3543",favorite:"1084",filter:"220",filters:"618",format:"675",fotki:"174",fresh:"598",fullscreen:"665",gif:"677",google:"66",gray:"733",green:"196",grid:"3223",gallery:"1164",horizontal:"672",image:"8",images:"277",imgclick:"835",index:"629",info:"1275",iorient:"671",isize:"145",jpg:"676",keyboard:"492",kids:"1482",large:"157",lineart:"759",likeness:"2929",list:"436",medium:"149",message:"1304",moderate:"681",more:"75",less:"585",mouse:"491",navig:"208",new:"228",next:"407",normal:"141",nps:"1056",odnoklassniki:"526",off:"11",on:"10",open:"842",select:"775",orange:"194",othersize:"924",p0:"85",p1:"86",p10:"95",p11:"96",p12:"97",p13:"98",p14:"99",p15:"100",p16:"101",p17:"102",p18:"103",p19:"104",p2:"87",p20:"105",p3:"88",p4:"89",p5:"90",p6:"91",p7:"92",p8:"93",p9:"94",page:"143",partner:"1219",photo:"275",photostock:"3076",picsearch:"173",pinterest:"1009",play:"331",png:"679",polaroid:"3998",prev:"406",preview:"670",promo:"714",product:"437",price:"2506",red:"193",related_query:"391",result:"884",results:"241",request:"1401",render:"2046",save:"691",shown:"3780",scroll:"768",visibility:"1484",watch:"2149",disable:"2395",showimage:"3359",search:"153","search-by-image":"1277",uploader:"4065",serp:"471",server:"2443",share:"599",intent:"718",alicetransform:"4045",shop:"1055",show:"487",hide:"1656",hidden:"238",history:"2735",unsave:"4092",passport:"1207",sidebar:"2090",similar:"469",site:"202",sites:"805",sitelink:"1789",slideshow:"479",small:"150",soo:"65",stripe:"707",square:"674",stop:"529",tags:"2092",thumb:"184",top:"77",tooltip:"1382",twitter:"521",type:"76",upload_photo:"209",url:"13",user:"538",vertical:"673",violet:"199",visiblefresh:"639",visible:"2607",vkontakte:"496",wallpaper:"158",wallpaper_category:"1129",week:"796",white:"200",yellow:"195",video:"231",viewer:"2921",map:"367",maps:"23",market:"4","market-cpa":"4061",market_offers:"500",music:"56",later:"3696",leave:"1868",load:"1724",loaded:"1007",ads:"991",categories:"1429",submit:"297",width:"1473",height:"1474",tabbar:"1471",time:"207",timing:"1033",hover:"858",abuse:"1436",sticky:"1578",pad:"1667",perf:"2096",footer:"295",default_search:"1620",popular:"1465",popup_close:"1781",popup:"1544",success:"2052",reject:"2464",porno:"1499",error:"1030",install:"705",inline_home_set:"1918",incut:"1073",behavioral:"1999",context:"60",item:"22",title:"82",link:"513",button:"440",direct:"155",direct_gallery:"2056",browser_yandex:"935",disk:"1032",discard:"2737",disclaimer:"2538",radio:"1079",mobile:"1006",mobile_browsers_ipad:"1013",mobile_browsers_android:"1014",thmb_speed:"1045",wp:"895",element:"1518",set:"1920",inline_set:"1651",home:"1319",inline_home:"1870",vb:"1921",inline_vb:"1652",middle:"2028",head:"175",header:"183",login:"290",login_input:"2343",suggest:"695",mail:"176",drag:"778",drop:"3647",size:"506",crop:"2754",marker:"4035",reset:"3236",cancel:"1478",related:"1108",rim:"2593",point:"849",is_visible:"397",onboarding:"2045",yes:"1176",no:"1177",querysearch:"955",start:"2154",desktop:"2048",bundles:"2960","load-ajax-error":"2961",end:"1428",my:"2189",lenta:"1217",theme:"1066",like:"1240",add:"160",remove:"2452",card:"875",carousel:"1460",tvonline:"2984",schemaorg:"2998",smartbanner:"1602",snippet:"254",tech:"690",ocr:"2363",copy:"1276",translate:"575","qr-code":"855","object-answer":"1155",othersizes:"923",overlay:"2951",toggle:"237",panel:"843",recognize:"3997",text:"232",ugc:"2139",rating:"1348",answer:"1534",resolve:"2928",send:"2574",scroll_top:"3737",input:"1173",landing:"1865","image-snippet":"793",meta:"156",file:"2958",file_dialog:"4064",notify:"2753",readmore:"1867",region:"287",register:"727",tune:"446",description:"1603",other_offers:"4050",similar_offers:"4052",switch:"1387",fold:"2255",camera:"4049",turbo:"2719",clipboard:"4054",paste:"4055","no-localstorage":"3022",organic:"2248",offer:"2392",offers:"18","unhandled-click":"2592",stack_item:"4090",anchor:"4099",document:"1104",up:"600",go:"1896",return:"515",settings:"1137"},"undefined"!=typeof BEM&&BEM.decl({block:"counter",baseBlock:"offline-request"},{_dict:n}),"undefined"!=typeof exports&&(exports.dict=n),BEM.decl("counter",{onSetMod:{js:{inited:function(){window.Ya=window.Ya||{},window.Ya.counter=this,this._sendEarlyCalledCounters()}}},_logEB:function(t,e,i){"undefined"!=typeof window&&window.Ya&&window.Ya.Rum&&window.Ya.Rum.logError({level:"info",message:"INFO: "+t+" old window.c "+e,block:"oldCCounters",additional:{method:e,args:i}})},_sendEarlyCalledCounters:function(){if(window.Ya&&window.Ya.counterQueue)for(;window.Ya.counterQueue.length;){var t=window.Ya.counterQueue.shift();this._sendEarlyCalledCounter(t)}},_sendEarlyCalledCounter:function(t){this[t[0]]&&"function"==typeof this[t[0]]&&(this[t[0]].apply(this,t[1]),window.Ya.Rum&&window.Ya.Rum.logError({message:t[0]+" was called before init",block:"counter",source:"delegated"}))},_onChangeNetworkStatus:function(t){var e;if(t&&this._countersCache)for(var i in this._countersCache)this._countersCache.hasOwnProperty(i)&&"error"===this._countersCache[i].status&&((e=this._countersCache[i]).status="pending",this._req(e.params))},_getExtParams:function(t){var e=BEM.blocks.location.getInstance().getState(),i=BEM.blocks["i-global"],n=t&&t.path&&this.getPath(t.path),s=i.param("counterParams")||{},o=s.click,r={};return n&&(0===n.indexOf("690")&&(o=s.tech),0!==n.indexOf("690.2096")&&0!==n.indexOf("690.1033")&&0!==n.indexOf("690.1201")||(o=s.perf),o&&(r=$.extend(o,r))),i.param("isYandexApp")&&(r.uuid=BEM.blocks.utils.get(e,"params.uuid.0")),t&&"iweb"===t.dtype&&"origin"===i.param("metaReferrerContent")&&!i.getFlag("mm_referrer_origin_disable_iweb")&&(r.ref=encodeURIComponent(e.url)),r.cts=t&&t.cts?t.cts:Date.now(),r},w:function(t,e,i){var n=window.Ya.counter;e&&n.hit({path:e,vars:n._getVars(i),dtype:"iweb"},t)},wHitDelayed:function(t,e,i){setTimeout(function(){window.Ya.counter.w(t,e,i)},this._getHitDelayedTimer())},cp:function(t,e){t.path&&(t.dtype="stred",window.Ya.counter.hit(t,e))},cpHitDelayed:function(t,e){setTimeout(function(){window.Ya.counter.cp(t,e)},this._getHitDelayedTimer())},_hit:function(t,e){if(!(window.Ya&&window.Ya.InternalState&&window.Ya.InternalState.shouldDropLogs||this._isForbiddenCounter(t))){var i,n=e&&(e.onclick||e.ondblclick);if(n&&"object"==typeof(i=n())&&$.extend(t,i.counter__params),$.extend(t,this._getExtParams(t)),t.path){t.path=this.getPath(t.path);var s=this.getUrl(t,e);t.resultUrl=s,t.href=e&&e.href,t.reqid=t.reqid||this.getReqId(e),this.log(t),this.makeReq(s)}"iweb"===t.dtype&&this.addMetrikaCookie(e)}},_isForbiddenCounter:function(t){var e=window.Ya&&window.Ya.InternalState&&window.Ya.InternalState.expFlags&&window.Ya.InternalState.expFlags.images_remove_counter;if(!t.path||!e)return!1;for(var i=this.getHumanText(t.path),n=e.split(","),s=0;s<n.length;s++)if(i.indexOf(n[s])>=0)return!0;return!1},hit:function(t,e){this._isImages()?window.Ya.counter.hitDelayed(t,e):window.Ya.counter._hit(t,e)},hitDelayed:function(t,e){t&&(t.cts=t.cts||Date.now()),setTimeout(function(){window.Ya.counter._hit(t,e)},this._getHitDelayedTimer())},_isImages:function(){return Boolean(window.Ya.InternalState&&"images"===window.Ya.InternalState.id)},_getHitDelayedTimer:function(){return this._isImages()?0:200},log:function(t){BEM.blocks.counter.debug("counter",{pid:t.pid,cid:t.cid,url:t.resultUrl,path:t.path,decoded:this.getHumanText(t.path),vars:t.vars,href:t.href,reqid:t.reqid,referer:location.href})},makeReq:function(t){var e={id:this.__self._reqNum++,status:"pending",params:{url:t,cache:!0,dataType:"script"}};this._req(e.params)},_req:function(t){$.ajax(t)},getUrl:function(t,e){var i=$.extend({rnd:BEM.blocks.utils.getRnd(2),yuid:this.getUid(),reqid:t.reqid||this.getReqId(e),serpid:t.serpid||this.getSerpId()},t),n=this.stringifyParams(i,"/");return[location.protocol,"//",this.getClickHost(),"/","jclck","/",n,"/*",this._getAsterixData(e)].join("")},_getVars:function(t){return"object"==typeof t?this.stringifyParams(t,","):t},getReqId:function(t){var e,i=BEM.blocks["i-global"],n=i.param("reqid")||i.param("serpid")||"";return t&&((e=$(t).closest(".counter__reqid")).length?BEM.DOM.extractParams(e[0]).counter__reqid:{}).reqid||n},getSerpId:function(){return BEM.blocks["i-global"].param("serpid")},getUid:function(){return BEM.blocks["i-global"].param("yandexuid")},getClickHost:function(){return BEM.blocks["i-global"].param("click-host")},_getAsterixData:function(t){var e=t&&t.href?t.href:location.href;return 0===e.indexOf("//")?location.protocol+e:"/"===e.charAt(0)?location.origin+e:e},stringifyParams:function(t,e){e=e||"&";var i,n=[],s=/\//g;return Object.keys(t).forEach(function(e){void 0!==(i=t[e])&&""!==i&&null!==i&&n.push(e+"="+String(i).replace(s,"%2F"))},this),n.join(e)},getPath:function(t){return"/"===t[0]&&this._dict&&this._decodePath(t)||t},_decodePath:function(t){var e=t.split("/").slice(1),i=this._dict;return i&&e.length&&e.map(function(t){return i[t]||t}).join(".")},decodeBlockstatKey:function(t){var e;return Object.keys(this._dict).some(function(i){if(this._dict[i]===t)return e=i,!0},this),e||t},getHumanText:function(t){return"/"+t.split(".").map(this.decodeBlockstatKey.bind(this)).join("/")},_getMetrikaCookieHostname:function(t){var e=t.hostname;return e.match(/^(www\.)?yandex\.(ru|kz|by|ua|com|com\.tr|net|fr)$/)?e+t.pathname:e},_getMetrikaCookieSource:function(t){var e,i=document.location,n=(i.search.match(/[?&]text=([^&]*)/)||[])[1];if(!t)return"";if(t.hostname&&t.pathname)e=t;else if(t.href){var s=BEM.blocks.uri.parse(t.href);e={hostname:s.host(),pathname:s.path()}}if(!e)return"";n||(n=""),n=decodeURIComponent(n);var o=this._getMetrikaCookieHostname(e),r=BEM.blocks["i-global"].param("reqid");return[n,o,i.pathname,r].map(encodeURIComponent).join(":")},addMetrikaCookie:function(t){var e=BEM.blocks["i-global"];if("origin"===e.param("metaReferrerContent")||e.getFlag("mm_metrika_cookie_apps")){var i=this._getMetrikaCookieSource(t);if(i){var n=Date.now(),s=new Date(6e5+n).toUTCString(),o=e.param("enableSamesiteSc");document.cookie="sc_"+n+"="+i+";path=/watch;domain=."+location.hostname.replace(/^www\./,"")+";expires="+s+(o?";SameSite=None":"")+";secure"}}}},{_reqNum:0,debug:function(t,e){var i=BEM.blocks["i-global"].param("counterDebug");i&&(e=e||"","undefined"!=typeof console&&"function"==typeof console.info&&(console.group("Счётчик "+t),"table"===i&&"function"==typeof console.table&&"object"==typeof e?(console.info("params:"),console.table(e)):console.info("params:",e),console.groupEnd("Счётчик "+t)),window.mm||(window.mm={}),window.mm.counters||(window.mm.counters=[]),window.mm.counters.push({name:t,params:e}))}}),BEM.create("counter"),BEM.decl("counter",{_getExtParams:function(t){var e=this.__base.apply(this,arguments);return BEM.blocks["i-global"].extendCounterParams(e),e},getReqId:function(t){var e=this.__base.apply(this,arguments),i=BEM.blocks.utils.get(t,"0.className");return i&&BEM.DOM.extractParams(t[0])[i.split(" ")[0]].reqid||e}},{convertVarsToString:function(t){return t||(t={}),Object.keys(t).filter(function(e){return void 0!==t[e]&&""!==t[e]}).map(function(e){return"-"+e+"="+t[e]}).join(",")},debug:function(t,e){this.__base.apply(this,arguments),BEM.blocks["i-global"].param("isYandexNet")&&(window.mm||(window.mm={}),window.mm.counterDebugLog||(window.mm.counterDebugLog=[]),window.mm.counterDebugLog.push([e.decoded||t||e.path,e]),window.mm&&window.mm.counterDebugLogHandler&&window.mm.counterDebugLogHandler())}}),BEM.decl("uri",{onSetMod:{js:{inited:function(){var t=this;["protocol","host","port","path","anchor"].forEach(function(e){t[e]=function(t){return void 0!==t?(this.uriParts[e]=t,this):this.uriParts[e]}})}}},encode:function(t){return encodeURIComponent(t)},decode:function(t){try{t=decodeURIComponent(t)}catch(e){try{t=decodeURIComponent(this.convert(t))}catch(t){}}return t},convert:function(t){var e={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};return t=t.replace(/%.{2}/g,function(t){return e[t]||t})},normalize:function(t){return(t||"").replace(/\+/g,"%20")},parseUri:function(t){var e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?:?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t||""),i={};return["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"].forEach(function(t,n){i[t]=e[n]||""}),i},parseQuery:function(t){var e,i,n,s,o,r={};if("string"!=typeof t||""===t)return r;for(i=t.replace("?","").split("&"),e=0;e<i.length;e++)n=[(n=i[e].split("=")).shift(),void 0!==n[0]?n.join("="):null],s=this.decode(n[0]),o=n[1]||""===n[1]?this.decode(n[1]):null,r[s]?(o||""===o)&&r[s].push(o):r[s]=null===o?[]:[o];return r},query:function(t){var e="";void 0!==t&&(this.queryParams=this.parseQuery(t));var i=this.queryParams,n=this;return Object.keys(i).forEach(function(t,s){s>0&&(e+="&"),"object"!=typeof i[t]||i[t].length?i[t].forEach(function(i,s){s>0&&(e+="&"),e+=n.encode(t)+"="+n.encode(i)}):e+=t}),e.length>0?"?"+e:e},getParam:function(t){return this.queryParams[t]},deleteParam:function(t,e){var i=[];return void 0!==e&&((this.queryParams[t]||[]).forEach(function(t){t!==e&&i.push(t)}),this.queryParams[t]=i),void 0!==e&&0!==i.length||delete this.queryParams[t],this},addParam:function(t,e){return this.queryParams[t]=(this.queryParams[t]||[]).concat(e),this},replaceParam:function(t,e,i){return this.deleteParam(t,i).addParam(t,e)},scheme:function(){var t="";return this.protocol()?(t+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(t+=":"),t+="//"):this.host()&&(t+="//"),t},origin:function(){var t=this.scheme();return this.host()&&(t+=this.host(),this.port()&&(t+=":"+this.port())),t},getRoot:function(){var t=this.origin();return this.path()&&(t+=this.path().replace(/\/[^\/]*$/,"")),t},pathParts:function(){return this.path().split("/")},toString:function(){var t=this.origin();return this.path()?0!==this.path().indexOf("/")&&"/"!==t[t.length-1]?t+="/"+this.path():t+=this.path():this.host()&&(this.query().toString()||this.anchor())&&(t+="/"),this.query().toString()&&(0!==this.query().toString().indexOf("?")&&(t+="?"),t+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t},build:function(){var t="";return t+=this.protocol()?this.protocol():window.location.protocol,t+=t.indexOf(":")!==t.length-1?"://":"//",t+=this.host()?this.host():window.location.hostname,this.port()?t+=":"+this.port():!this.host()&&window.location.hostname&&(t+=":"+window.location.port),this.path()?t+=this.path():this.host()?t+="/":t+=window.location.pathname,this.query()&&(0!==this.query().indexOf("?")&&(t+="?"),t+=this.query()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t}},{parse:function(t){var e=BEM.create({block:"uri"});return e.uriParts=e.parseUri(e.normalize(t)),e.queryParams=e.parseQuery(e.uriParts.query),e},normalize:function(t){return this.parse(t).toString()}}),BEM.decl("uri",{query:function(t){var e="";void 0!==t&&(this.queryParams=this.parseQuery(t));var i=this.queryParams,n=this;return this._getQueryParamsKeys(i).forEach(function(t,s){s>0&&(e+="&"),"object"!=typeof i[t]||i[t].length?i[t].forEach(function(i,s){s>0&&(e+="&"),e+=n.encode(t)+"="+n.encode(i)}):e+=t}),e.length>0?"?"+e:e},_getQueryParamsKeys:function(t){return Object.keys(t||{})}}),BEM.decl("uri",{_getQueryParamsKeys:function(){return this.__base.apply(this,arguments).sort()}},{_validUrlRegEx:new RegExp("^(?:(?:https?|ftp)://)(?:(?:(?:xn--)?(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:xn--)?(:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:xn--)?(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/[^\\s]*)?"),_acceptableUrlRegEx:/\S+\.\S{2,}/,setParam:function(t,e,i){void 0===i&&(i=e,e=t,t=BEM.blocks.location.getInstance().getState().url);var n=this.parse(t);return BEM.blocks.utils.isEmpty(i)?n.deleteParam(e).toString():n.queryParams[e]?n.replaceParam(e,i).toString():n.addParam(e,i).toString()},setParams:function(t,e){"object"==typeof t&&(e=t,t=BEM.blocks.location.getInstance().getState().url);var i=this.parse(t);return BEM.blocks.utils.forOwn(e,function(t,e){void 0===t?i.deleteParam(e):i.queryParams[e]?i.replaceParam(e,t):i.addParam(e,t)}),i.toString()},delParams:function(t,e){void 0===e&&Array.isArray(t)&&(e=t,t=BEM.blocks.location.getInstance().getState().url);var i=this.parse(t);return"string"==typeof e&&i.deleteParam(e),Array.isArray(e)&&e.forEach(function(t){i.deleteParam(t)}),i.toString()},filterParams:function(t,e){void 0===e&&(e=t,t=BEM.blocks.location.getInstance().getState().url);var i=this.parseParams(t);for(var n in i)i.hasOwnProperty(n)&&(e.call(this,n,i[n],t)||(t=this.delParams(t,n)));return t},buildRelativeUrl:function(t,e){return void 0===e&&"object"==typeof t&&(e=t,t=BEM.blocks.location.getInstance().getState().url),!e||BEM.blocks.utils.isEmpty(e)?t:(e=Array.isArray(e)?[].concat(e):$.extend({},e),e=$.param(e,!0),BEM.blocks.uri.normalize(t+(t.indexOf("?")>=0?"&":"?")+e))},parseParams:function(t){return void 0===t&&(t=BEM.blocks.location.getInstance().getState().url),this.parse(this.clearHashSymbol(t)).queryParams},getFlatParams:function(t){var e=this.parseParams(t),i={};return BEM.blocks.utils.forOwn(e,function(t,e){i[e]=1===t.length?t[0]:t}),i},clearHashSymbol:function(t){return BEM.blocks.utils.isEmpty(t)&&(t=BEM.blocks.location.getInstance().getState().url),t.replace(/[^/]*\/?#!\//,"")},getPath:function(t){return this.parse(t).path()},isValid:function(t){return this._validUrlRegEx.test(t)},isAcceptable:function(t){return this._acceptableUrlRegEx.test(t)},getParamValue:function(t,e){void 0===e&&(e=t,t=BEM.blocks.location.getInstance().getState().url);var i=this.parse(t).getParam(e);return"string"==typeof i?i:Array.isArray(i)?i[0]:void 0}}),BEM.blocks.utils=function(){throw new Error("This is static block")},BEM.blocks.utils.getRnd=function(t){return(new Date).getTime()+Math.floor(Math.random()*Math.pow(10,t))},BEM.blocks.utils.memoize=function(t){var e;return function(){return e||(e=t.apply(this)),e}},BEM.blocks.utils.forOwn=function(t,e,i){var n;for(n in t)if(t.hasOwnProperty(n)&&void 0!==e.call(i,t[n],n,t))return},BEM.blocks.utils.get=function(t,e,i){if(null===t||void 0===t||"string"!=typeof e)return i;var n,s=e.split("."),o=t,r=s.length;for(n=0;n<r;n++)if(null===(o=o[s[n]])||void 0===o)return i;return o},BEM.blocks.utils.escape=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},BEM.blocks.utils.unescape=function(t){return String(t).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#39;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},BEM.blocks.utils.isEmpty=function(t){if(null===t||void 0===t)return!0;if(t.length>0)return!1;if(0===t.length)return!0;for(var e in t)if(hasOwnProperty.call(t,e))return!1;return!0},BEM.blocks.utils.getPassportUrl=function(t,e){var i=BEM.blocks["i-global"].param("passport-host")+(BEM.blocks["i-global"].param("login")?"/passport?mode=passport":"/auth"),n=Math.floor(1e4*Math.random()),s=BEM.blocks.location.getInstance().getUri().replaceParam("ncrnd",n);return e&&Object.keys(e).forEach(function(t){s.replaceParam(t,e[t])}),BEM.blocks.uri.setParams(i,$.extend({retpath:s.toString()},t))},BEM.blocks.utils.EMAIL_PATTERN=/[^@]+@[^.]+\..{2,}/i,BEM.blocks.utils.isValidEmail=function(t){return this.EMAIL_PATTERN.test(t)},BEM.blocks.utils.getHash=function(t){var e=0;if(0===t.length)return e;for(var i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e&=e;return Math.abs(e)},Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,i=Object(this),n=i.length>>>0,s=arguments[1],o=0;o<n;o++)if(e=i[o],t.call(s,e,o,i))return e}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){"use strict";if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n)for(var s=Object.keys(Object(n)),o=0,r=s.length;o<r;o++){var a=s[o],c=Object.getOwnPropertyDescriptor(n,a);void 0!==c&&c.enumerable&&(e[a]=n[a])}}return e}}),Number.isNaN||(Number.isNaN=function(t){return"number"==typeof t&&isNaN(t)}),BEM.DOM.decl("i-global",{},{extendCounterParams:function(t){switch(t||(t={}),this.param("page")){case"index":case"search":t.service="images.yandex";break;case"search-by-image":case"similar":case"cbir-products":case"cbir-sites":case"cbir-ocr":case"cbir-landing":case"legacy-ocr":t.service="cbir.yandex";break;default:t.service="yandex"}return this.param("isYandexApp")?t.ui="webmobileapp.yandex":this.param("tablet")?t.ui=encodeURIComponent("images.yandex/pad"):this.param("mobile")?t.ui=encodeURIComponent("images.yandex/touch"):t.ui="images.yandex",t}}),function(){var t;function e(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16)})}function i(t){return decodeURIComponent(t)}BEM.decl("i-cookie",{defaultExpires:Math.round(new Date/1e3)+604800,getExpirationDate:function(t){return Math.round(Date.now()/1e3+24*t*60*60)},getDefaultParams:function(){return{yp:{expires:new Date("Tue Jan 1 00:00:00 2038"),domain:".yandex."+BEM.blocks["i-global"].param("tld"),path:"/",samesite:"none",secure:!0},ys:{domain:".yandex."+BEM.blocks["i-global"].param("tld"),path:"/",samesite:"none",secure:!0}}},ypRead:function(){for(var t=$.cookie("yp"),e=t?t.split("#"):[],n=new Date/1e3,s={},o=0,r=e.length;o<r;o++){var a=e[o].split("."),c=a[0],l=a[1],u=a.slice(2).join(".");c>n&&(s[l]={value:i(u),expires:c})}return s},ypWrite:function(t){for(var i,n=[],s=0,o=Object.keys(t),r=o.length;s<r;s++)i=t[o[s]],n.push([i.expires,o[s],!1===i.encode?i.value:e(i.value)].join("."));$.cookie.set("yp",n.join("#"),this.params.yp)},ypRemove:function(t){var e=this.ypRead();t&&e[t]&&(delete e[t],this.ypWrite(e))},yp:function(t,e,i){var n={};"object"==typeof t&&(t=(n=t).name,e=n.value,i=n.expires);var s=this.ypRead(),o=s[t];return void 0===e?o&&o.value:(o||(o={}),o.value=e,o.expires=i||o.expires||this.defaultExpires,o.encode=n.encode,s[t]=o,this.ypWrite(s))},ysRead:function(){var t=$.cookie("ys"),e={};return(t?t.split("#"):[]).forEach(function(t){var n=t.split("."),s=n[0],o=n.slice(1).join(".");e[s]=i(o)}),e},ysWrite:function(t){for(var i=[],n=0,s=Object.keys(t),o=s.length;n<o;n++)i.push([s[n],e(t[s[n]])].join("."));$.cookie.set("ys",i.join("#"),this.params.ys)},ys:function(t,e){var i=this.ysRead();return e?(i[t]=e,this.ysWrite(i)):i[t]}},{get:function(){return t||(t=BEM.create("i-cookie"))}})}(),jQuery.cookie=(s=function(t,e,i){if(void 0===e){var n=s.get(t);return n?decodeURIComponent(n):null}s.set(t,encodeURIComponent(e),i)},$.extend(s,{get:function(t){return this.getAll()[t]},getAll:function(){for(var t=this.readCookie(),e=t?t.split("; "):[],i={},n=0;n<e.length;n++){var s=e[n].split("="),o=s[0],r=s.slice(1).join("=");'"'===r.charAt(0)&&(r=r.slice(1,-1)),i[o]=r}return i},set:function(t,e,i){var n,s;i||(i={}),"number"==typeof(n=i.expires)&&(n=new Date(Date.now()+24*n*60*60*1e3)),s=[t,"=",e,n&&"; expires="+n.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.samesite&&"; samesite="+i.samesite,i.secure?"; secure":""].join(""),this.writeCookie(s)},remove:function(t){this.set(t,"",{expires:-1})},readCookie:function(){return document.cookie},writeCookie:function(t){document.cookie=t}}),s),Ya.reactBus=Ya.reactBus||function(t,e){var i=[],n=t.emit,s=!1,o=window.Ya&&window.Ya.InternalState||{},r=o&&o.expFlags||{};function a(){if((window.BEM||e)&&!s)return s=!0,t.emit=n,i.forEach(function(e){t.emit.apply(t,e)}),i.length=0,!0}return t.emit=function(){return i.push(Array.prototype.slice.call(arguments)),t},e||r.react_init_on_page_load||o.reactInitOnPageLoad?document.addEventListener("DOMContentLoaded",a):BEM.DOM.ready(a),t}(new(function(){var t={exports:{}};function e(){}return e.prototype={on:function(t,e,i){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){var n=this;function s(){n.off(t,s),e.apply(i,arguments)}return s._=e,this.on(t,s,i)},emit:function(t){for(var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),n=0,s=i.length;n<s;n++)i[n].fn.apply(i[n].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),n=i[t],s=[];if(n&&e)for(var o=0,r=n.length;o<r;o++)n[o].fn!==e&&n[o].fn._!==e&&s.push(n[o]);return s.length?i[t]=s:delete i[t],this}},t.exports=e,t.exports.TinyEmitter=e,t.exports}())),BEM.channel("i-react-bus").trigger("loaded"),function(t,e){var i={};/msie|trident/i.test(e)?i.ie=parseInt(e.split(/msie|rv:/i)[1],10):-1!==e.indexOf("Opera")?i.opera=parseInt(e.split(/Version\//i)[1],10):"undefined"!=typeof InstallTrigger&&-1!==e.indexOf("Firefox")&&(i.firefox=parseInt(e.split(/Firefox\//)[1],10));var n,s={},o={};(n=e.match(/Windows\sPhone[^\d]*\s([\d.]+)/))?s.wp=n[1]:(n=e.match(/Android\s+([\d.]+)/))?s.android=n[1]:e.match(/\sHTC[\s_].*AppleWebKit/)?s.android="2.3":(n=e.match(/iPhone\sOS\s([\d_]+)/))?(s.ios=n[1].replace(/_/g,"."),o.iphone=!0):(n=e.match(/iPad.*OS\s([\d_]+)/))?(s.ios=n[1].replace(/_/g,"."),o.ipad=!0):(n=e.match(/Bada\/([\d.]+)/))?s.bada=n[1]:(n=e.match(/MSIE\s9/))?s.wp="7.5":s.other=!0,BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){var t=this.__self,e="other";["ios","android","bada","wp","opera"].some(function(i){return t[i]&&(e=i)}),this.setMod("platform",e)}}},setVersion:function(){var t=this.parseVersion();t&&(this.setMod(t.platform,t.major),this.setMod(t.platform+"-subversion",t.subversion))},parseVersion:function(){if(this.__self.ios||this.__self.android){var t=(this.__self.ios||this.__self.android).split("."),e=t.shift(),i=t.join("-");return{platform:this.getMod("platform"),major:e,subversion:i}}}},{ios:s.ios,iphone:o.iphone,ipad:o.ipad,android:s.android,bada:s.bada,wp:s.wp,other:s.other,ua:e,ie:i.ie,opera:i.opera,firefox:i.firefox})}(window,navigator.userAgent||""),function(){var t,e;BEM.decl("i-ua",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.__self.wp&&this.afterCurrentEvent(function(){var t=document.querySelector("html"),e=t.getAttribute("class").replace("i-ua_inlinesvg_no","i-ua_inlinesvg_yes");t.setAttribute("class",e)})}}}},{canUseCSSAnimation:function(){var t=document.createElement("div"),e="Webkit Moz O ms Khtml".split(" ");if(void 0!==t.style.animationName)return!0;for(var i=0;i<e.length;i++)if(void 0!==t.style[e[i]+"AnimationName"])return!0;return!1},hasHistoryAPI:Boolean(window.history&&history.pushState),canUseAjax:function(){return void 0===t&&(t="function"==typeof(window.History||window.history||{}).replaceState&&this.isCookieEnabled()),t},isCookieEnabled:function(){if(void 0===e){var t=Math.random().toString(16).slice(2);document.cookie=t+"=1",e=document.cookie.indexOf(t)>=0,document.cookie=t+"=;expires="+new Date(0).toGMTString()}return e},getTransitionEndEvent:BEM.blocks.utils.memoize(function(){var t={webkitTransition:"webkitTransitionEnd",OTransition:"otransitionend",mozTransition:"transitionend",transition:"transitionend"};for(var e in t)if(t.hasOwnProperty(e)&&void 0!==document.body.style[e])return t[e];return"transitionend"}),isPointerEventsAvailable:BEM.blocks.utils.memoize(function(){return void 0!==document.body.style.pointerEvents}),isCopySupported:function(){return void 0===this._isCopySupported&&(this._isCopySupported="getSelection"in window&&"queryCommandSupported"in document&&"execCommand"in document&&document.queryCommandSupported("copy")),this._isCopySupported},getConnectionType:function(){var t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return t?t.type:""},isYandexAppIos:function(){var t=window.Ya.userAgent||window.navigator.userAgent;return/YaApp_iOS/.test(t)},isYandexAppAndroid:function(){var t=window.Ya.userAgent||window.navigator.userAgent;return/YandexSearch/.test(t)},isFirefox:"undefined"!=typeof InstallTrigger})}(),BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._detectIE11()}}},_detectIE11:function(){11===BEM.blocks["i-ua"].ie&&this.setMod("browser","ie11")}}),o=window,r=window.Ya.userAgent||window.navigator.userAgent,c={},l={},u={},h={},d=o.innerWidth>o.innerHeight,r.match(/Android\s+([\d.]+)/)?(a=r.match(/Android\s+([\d.]+)/),c.android=a[1]):r.match(/\sHTC[\s_].*AppleWebKit/)?c.android="2.3":r.match(/iPhone\sOS\s([\d_]+)/)?(a=r.match(/iPhone\sOS\s([\d_]+)/),c.ios=a[1].replace(/_/g,"."),u.iphone=!0):r.match(/iPad.*OS\s([\d_]+)/)?(a=r.match(/iPad.*OS\s([\d_]+)/),c.ios=a[1].replace(/_/g,"."),u.ipad=!0):r.match(/Bada\/([\d.]+)/)?(a=r.match(/Bada\/([\d.]+)/),c.bada=a[1]):r.match(/Windows\sPhone[^\d]*\s([\d.]+)/)?(a=r.match(/Windows\sPhone[^\d]*\s([\d.]+)/),c.wp=a[1]):r.match(/MSIE\s9/)?c.wp="7.5":c.other=!0,r.match(/\s(CrMo|Chrome)\/([\d.]+)/)&&(a=r.match(/\s(CrMo|Chrome)\/([\d.]+)/),l.chrome=a[2]),BEM.decl("i-ua",{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=this.__self;this.setMod("platform",t.ios?"ios":t.android?"android":t.bada?"bada":t.wp?"wp":t.opera?"opera":"other").setMod("ios",t.ios?parseInt(t.ios,10):"").setMod("android",t.android?parseInt(t.android,10):"")}}},{ua:r,ios:c.ios,iphone:u.iphone,ipad:u.ipad,android:c.android,bada:c.bada,wp:c.wp,other:c.other,chrome:l.chrome,screenSize:screen.width>320?"large":screen.width<320?"small":"normal",connection:h.connection,flash:h.flash,video:h.video,svg:h.svg,width:o.innerWidth,height:o.innerHeight,landscape:d}),function(t){var e=t.documentElement.style;BEM.DOM.decl("i-ua",{},{objectFit:"objectFit"in e||"OObjectFit"in e})}(document),function(t){var e=1,i=!1;if("deviceXDPI"in screen&&"logicalXDPI"in screen?e=screen.deviceXDPI/screen.logicalXDPI:"devicePixelRatio"in t&&(e=t.devicePixelRatio),"function"==typeof t.matchMedia){i=t.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 124dpi)").matches}else i=e>=1.3;BEM.DOM.decl("i-ua",{},{dpr:e,hiDpi:i})}(window),Array.prototype.findIndex||(Array.prototype.findIndex=function(t){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,i=Object(this),n=i.length>>>0,s=arguments[1],o=0;o<n;o++)if(e=i[o],t.call(s,e,o,i))return o;return-1}),BEM.DOM.decl("b-page",{onSetMod:{js:{inited:function(){this.findBlocks(),this.bindEvents(),this._loadAsyncBundles(),BEM.blocks["i-global"].setParams({hasHistoryAPI:Boolean(window.history&&history.pushState)})}}},findBlocks:$.noop,bindEvents:function(){return this.bindToWin("blur",$.throttle(function(){this.trigger("blur")},150,this)),this.bindToWin("resize orientationchange",$.throttle(this._onResize,200,this)),this.bindToWin("resize orientationchange",$.debounce(this._onResize,800)),this.bindToWin("scroll",$.throttle(this._onDomScroll,200,this)),this},destruct:function(){this.unbindEvents(),this.__base.apply(this,arguments)},_onResize:function(){this.trigger("resize")},_onDomScroll:function(){var t=this;window.requestAnimationFrame(function(){t.trigger("scroll")})},getSeo:function(){return this.params.seo},_loadAsyncBundles:function(){BEM.blocks["i-global"].param("pushBundleAsyncOnInit").forEach(function(t){BEM.blocks["i-bundle-async"].load(t)})},updateTitle:function(t){var e=document.createElement("i");e.innerHTML=t,document.title=e.firstChild&&e.firstChild.nodeValue||e.nodeValue||""},_getFilterParams:$.noop},{getInstance:function(){return this._instance||(this._instance=BEM.DOM.scope.bem("b-page")),this._instance}}),BEM.DOM.decl("b-page",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.findBlocks(),BEM.blocks["i-global"].param("isPumpkin")&&Ya.reactBus.emit("HeaderDesktop:updateContext",{query:BEM.blocks.uri.getParamValue("text")})}}},findBlocks:function(){return this._header=this.findBlockInside("header"),this._headerHeight=0,this._header&&(this._headerHeight=this._header.getHeight()),this},bindEvents:function(){return this.__base.apply(this,arguments),BEM.blocks["i-global"].param("mobile")&&this.bindToWin("touchmove",$.throttle(this._onTouchMove,200,this)),this},_onTouchMove:function(){this.trigger("touchmove")},_getTabs:function(){return this.tabsNavigation=this.findBlockInside("tabs-navigation"),this.tabsNavigation}}),BEM.DOM.decl("b-page",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),window.Ya.reactBus&&window.Ya.reactBus.on("images-viewer:beforeOpened",this._beforePaneOpened,this).on("images-viewer:beforeClosed",this._beforePaneClosed,this)}}},unbindEvents:function(){return this.__base.apply(this,arguments),window.Ya.reactBus.off("images-viewer:beforeOpened",this._beforePaneOpened).off("images-viewer:beforeClosed",this._beforePaneClosed),this},_beforePaneOpened:function(){var t=this.blockInside({block:"fade",modName:"region",modVal:"main"});return t&&(t.coverTabs(),t.coverHeader()),this.delMod("scroll"),this._saveSerpListWidth(),this.disableScroll(),this},_saveSerpListWidth:function(){this._serpListWidthBeforeOpenPane=this._getSerpListWidth()},_getSerpListWidth:function(){var t=this.findBlockInside("serp-list");return t&&t.domElem?t.domElem.width():null},_beforePaneClosed:function(t){var e=this.blockInside({block:"fade",modName:"region",modVal:"main"});e&&e.coverPageLayout();var i=this._getSerpListWidth();return this.enableScroll(),BEM.blocks["navigation-controller"].get().scroll("down"),i&&this._serpListWidthBeforeOpenPane!==i&&this.findBlockInside("serp-list").reFitAllItems(),this},_getFilterParams:function(){var t=this.__base.apply(this,arguments)||[];return t.push("p","ogl_url","rlt_url","img_url","pos","lr","rpt","parent-reqid","suggest_reqid","srcrwr","exp_flags"),BEM.blocks["i-global"].getFlag("images_react_app_disable")||t.push("isize","iw","ih","wp","iorient","type","icolor","itype","recent","site"),t},findBlocks:function(){return this.__base.apply(this,arguments),this.cbirIntent=this.findBlockInside("cbir-intent"),this}},{live:function(){return this.__base.apply(this,arguments),this.liveInitOnBlockInsideEvent("search:submit","search2",function(t,e){var i=BEM.blocks["serp-header"].getSearch();i.submit(e.event,e.data),i.countSubmit()}),!1},forceOperaRepaint:function(){var t=document.body.style;t.position="static",setTimeout(function(){t.position="relative"},1)}}),function(){var t=Ya.Rum,e=!(window.BigInt&&"PerformanceObserver"in window);function i(e){t._unsubscribers.push(e)}function n(t,n,o){if(!e){var r=o||{};if(t){r.type=t,r.hasOwnProperty("buffered")||(r.buffered=!0);var a=new PerformanceObserver(n);return s(function(){try{a.observe(r)}catch(t){return void console.error(t.message)}i(function(){a.disconnect()})},0),a}throw new Error("PO without type field is forbidden")}}function s(t,e){var n=setTimeout(t,e);return i(function(){clearInterval(n)}),n}function o(t,e,n){addEventListener(t,e,n),i(function(){removeEventListener(t,e,n)})}function r(e,i,n){o("visibilitychange",function s(){if("hidden"===document.visibilityState){if(!n){removeEventListener("visibilitychange",s);try{"function"==typeof e.takeRecords&&(t.getSetting("disableWrongBufferClean")||e.takeRecords()),e.disconnect()}catch(t){}}i()}}),o("beforeunload",i)}function a(t,e){return"string"==typeof t?encodeURIComponent(t):Math.round(1e3*(t-(e||0)))/1e3}function c(t){if(!t)return"";var e=(t.tagName||"").toLowerCase(),i=t.className&&void 0!==t.className.baseVal?t.className.baseVal:t.className;return e+(i=i?(" "+i).replace(/\s+/g,"."):"")}function l(t){function e(){removeEventListener("DOMContentLoaded",e),removeEventListener("load",e),t()}"loading"===document.readyState?(o("DOMContentLoaded",e),o("load",e)):t()}function u(e){t._onComplete.push(e)}function h(){return t._periodicTasks}function d(){var e=t._vars;return Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t]).replace(/\*/g,"%2A")})}var p={connectEnd:2116,connectStart:2114,decodedBodySize:2886,domComplete:2124,domContentLoadedEventEnd:2131,domContentLoadedEventStart:2123,domInteractive:2770,domLoading:2769,domainLookupEnd:2113,domainLookupStart:2112,duration:2136,encodedBodySize:2887,entryType:2888,fetchStart:2111,initiatorType:2889,loadEventEnd:2126,loadEventStart:2125,nextHopProtocol:2890,redirectCount:1385,redirectEnd:2110,redirectStart:2109,requestStart:2117,responseEnd:2120,responseStart:2119,secureConnectionStart:2115,startTime:2322,transferSize:2323,type:76,unloadEventEnd:2128,unloadEventStart:2127,workerStart:2137};function f(t,e){Object.keys(p).forEach(function(i){if(i in e){var n=e[i];(n||0===n)&&t.push(p[i]+"="+a(n))}})}var m,g,_,b,v="690.2096.2877",y="690.2096.207",E="690.2096.2044",M=3,k=document.createElement("link"),w=window.performance||{},B="function"==typeof w.getEntriesByType;function S(e,i,n,s){void 0===i&&(i=t.getTime()),void 0!==n&&!0!==n||t.mark(e,i);var o=C(e);if(o.push("207="+a(i)),T(o,s)){D(y,o),m[e]=m[e]||[],m[e].push(i);var r=t._markListeners[e];r&&r.length&&r.forEach(function(t){t(i)})}}function C(e){return b.concat([t.isVisibilityChanged()?"-vsChanged=1":"","1701="+e,t.ajaxStart&&"1201.2154="+a(t.ajaxStart),t.ajaxComplete&&"1201.2052="+a(t.ajaxComplete)])}function I(){_=d(),t.getSetting("sendClientUa")&&_.push("1042="+encodeURIComponent(navigator.userAgent))}function P(){var t=window.performance&&window.performance.timing&&window.performance.timing.navigationStart;b=_.concat(["143.2129="+t])}function T(t,e){if(e){if(e.isCanceled&&e.isCanceled())return!1;var i=t.reduce(function(t,e,i){return"string"==typeof e&&(t[e.split("=")[0]]=i),t},{});Object.keys(e).forEach(function(n){if("function"!=typeof e[n]){var s=i[n],o=n+"="+e[n];void 0===s?t.push(o):t[s]=o}})}return!0}function D(e,i,n){var s=encodeURIComponent(window.YaStaticRegion||"unknown");i.push("-cdn="+s);var o=i.filter(Boolean).join(",");t.send(null,e,o,void 0,void 0,void 0,void 0,n)}function x(t,e){D(t,A().concat(e))}function O(e,i){var n=g[e];n&&0!==n.length&&(n.push(t.getTime(),i),L(e))}function L(e,i,n,s){var o,r,c,l=g[e];if(void 0!==i?o=(r=s&&s.originalEndTime?s.originalEndTime:t.getTime())-i:l&&(o=l[0],r=l[1],c=l[2]),void 0!==o&&void 0!==r){var u=C(e);u.push("207.2154="+a(o),"207.1428="+a(r),"2877="+a(r-o)),T(u,n)&&T(u,c)&&(D(v,u,s&&s.force),delete g[e])}}function R(t,e){if(!B)return e(null);k.href=t;var i=0,n=100,o=k.href;s(function t(){var r=w.getEntriesByName(o);if(r.length)return e(r);i++<M?(s(t,n),n+=n):e(null)},0)}function N(t,e){R(e,function(i){i&&j(t,i[i.length-1],e)})}function j(e,i,n){var s=C(e);t.getSetting("sendUrlInResTiming")&&s.push("13="+encodeURIComponent(n)),f(s,i),D(E,s)}function A(){return _}var F={bluetooth:2064,cellular:2065,ethernet:2066,none:1229,wifi:2067,wimax:2068,other:861,unknown:836,0:836,1:2066,2:2067,3:2070,4:2071,5:2768},q=navigator.connection;function U(t){q&&t.push("2437="+(F[q.type]||2771),void 0!==q.downlinkMax&&"2439="+q.downlinkMax,q.effectiveType&&"2870="+q.effectiveType,void 0!==q.rtt&&"rtt="+q.rtt,void 0!==q.downlink&&"dwl="+q.downlink)}var Y,V,z,W,$,H,K,G,X="690.2096.4004",Q=!1,J=($="layout-shift",Boolean(window.PerformanceObserver&&window.PerformanceObserver.supportedEntryTypes&&-1!==window.PerformanceObserver.supportedEntryTypes.indexOf($))?0:null);function Z(){W>Y&&(Y=W,V=z)}function tt(){if(null!=Y&&!Q){Q=!0;var t=["s="+Math.round(1e6*Y)/1e6],e=function(t){var e=null;if(!t)return null;var i=null;return(e=t.reduce(function(t,e){return t&&t.value>e.value?t:e}))&&e.sources&&e.sources.length&&(i=e.sources.find(function(t){return t.node&&1===t.node.nodeType})||e.sources[0]),i&&c(i.node)}(V);t.push("target="+e),x(X,t),Y=J,W=void 0,z=void 0}}function et(){if(null!=H){var e=t.getLCPAdditionalParams(K);S("largest-contentful-paint",H,!1,e),H=null,K=null}}u(tt),u(function(){return Q=!1}),u(et);var it={"first-paint":2793,"first-contentful-paint":2794},nt=Object.keys(it).length,st={},ot=window.performance||{},rt="function"==typeof ot.getEntriesByType,at=0;function ct(){if(rt&&(t.getSetting("forcePaintTimeSending")||!t.isVisibilityChanged()))for(var e=ot.getEntriesByType("paint"),i=0;i<e.length;i++){var n=e[i],s=it[n.name];s&&!st[n.name]&&(st[n.name]=!0,at++,S("1926."+s,n.startTime))}}var lt=3e3;function ut(){return t._tti.events||[]}function ht(){return t._tti}function dt(e,i,n){if(ht()){var s=t.getTime();pt(function(o){var r={2796.2797:ft(ut(),i),689.2322:a(s)};n&&Object.keys(n).forEach(function(t){r[t]=n[t]}),S(e||"2795",o,!0,r),t._tti.fired=!0},i)}}function pt(e,i){ht()&&(i||(i=t.getTime()),function n(){var o,r=i,a=t.getTime(),c=ut(),l=c.length;0!==l&&(o=c[l-1],r=Math.max(r,Math.floor(o.startTime+o.duration))),a-r>=lt?e(r):s(n,1e3)}())}function ft(t,e){return t=t||[],e=e||0,t.filter(function(t){return e-t.startTime<=50}).map(function(t){var e=t.name?t.name.split("-").map(function(t){return t[0]}).join(""):"u",i=Math.floor(t.startTime);return e+"-"+i+"-"+Math.floor(i+t.duration)}).join(".")}var mt="690.2096.361",gt=document.createElement("a"),_t=0,bt={};function vt(){if(window.PerformanceObserver){bt={},_t=0;var t=function(t){!function(t){if(t&&t.length)for(var e=bt,i=0;i<t.length;i++){var n=yt(t[i]);if(n){var s=n.domain+"-"+n.extension,o=e[s]=e[s]||{count:0,size:0};o.count++,o.size+=n.size}}}(t.getEntries())};n("resource",t),n("navigation",t),h().push(Et)}}function yt(t){var e=t.transferSize;if(null!=e){gt.href=t.name;var i=gt.pathname;if(0!==i.indexOf("/clck")){var n=i.lastIndexOf("."),s="";return-1!==n&&i.lastIndexOf("/")<n&&i.length-n<=5&&(s=i.slice(n+1)),{size:e,domain:gt.hostname,extension:s}}}}function Et(){var e=t.getSetting("maxTrafficCounters")||250;if(_t>=e)return!1;for(var i=Object.keys(bt),n="",s=0;s<i.length;s++){var o=i[s],r=bt[o];n+=encodeURIComponent(o)+"!"+r.count+"!"+r.size+";"}return n.length&&(_t++,x(mt,["d="+n,"t="+a(t.getTime())])),bt={},_t<e}u(Et);var Mt="690.1033",kt={visible:1,hidden:2,prerender:3},wt=window.performance||{},Bt=wt.navigation||{},St=wt.timing||{},Ct=St.navigationStart;function It(){var e=St.domContentLoadedEventStart,i=St.domContentLoadedEventEnd;if(0!==e||0!==i){var n=0===St.responseStart?Ct:St.responseStart,o=0===St.domainLookupStart?Ct:St.domainLookupStart,r=["2129="+Ct,"1036="+(o-Ct),"1037="+(St.domainLookupEnd-St.domainLookupStart),"1038="+(St.connectEnd-St.connectStart),St.secureConnectionStart&&"1383="+(St.connectEnd-St.secureConnectionStart),"1039="+(St.responseStart-St.connectEnd),"1040="+(St.responseEnd-n),"1040.906="+(St.responseEnd-o),"1310.2084="+(St.domLoading-n),"1310.2085="+(St.domInteractive-n),"1310.1309="+(i-e),"1310.1007="+(e-n),navigator.deviceMemory&&"3140="+navigator.deviceMemory,navigator.hardwareConcurrency&&"3141="+navigator.hardwareConcurrency];Object.keys(p).forEach(function(t){t in St&&St[t]&&r.push(p[t]+"="+a(St[t],Ct))}),t.vsStart?(r.push("1484="+(kt[t.vsStart]||2771)),t.vsChanged&&r.push("1484.719=1")):r.push("1484="+kt.visible),Bt&&(Bt.redirectCount&&r.push("1384.1385="+Bt.redirectCount),1!==Bt.type&&2!==Bt.type||r.push("770.76="+Bt.type)),U(r),x(Mt,r)}else s(It,50)}var Pt="690.2096.2892",Tt=window.performance||{},Dt="function"==typeof Tt.getEntriesByType;if(!t)throw new Error("Rum: interface is not included");if(t.enabled){function xt(){m={},g=t._deltaMarks,I(),P(),t.ajaxStart=0,t.ajaxComplete=0,l(Lt)}function Ot(){var e;t.sendTimeMark=S,t.sendResTiming=N,t.sendTiming=j,t.timeEnd=O;var i=t._defRes;for(e=0;e<i.length;e++)N(i[e][0],i[e][1]);t._defRes=[];var n=t._defTimes;for(e=0;e<n.length;e++)S(n[e][0],n[e][1],!1,n[e][2]);t._defTimes=[],Object.keys(g).forEach(function(t){L(t)})}function Lt(){var e=window.performance&&window.performance.timing&&window.performance.timing.navigationStart,i=t.getSetting("skipTiming");e&&s(function(){Ot(),i||It(),ct(),at<nt&&n("paint",function(t,e){ct(),e&&e.disconnect()},{buffered:Boolean(t.getSetting("enablePaintTimeBuffering"))}),t.getSetting("sendAutoElementTiming")&&(!window.PerformanceObserver||!t.getSetting("forcePaintTimeSending")&&t.isVisibilityChanged()||n("element",function(t){for(var e=t.getEntries(),i=0;i<e.length;i++){var n=e[i];S("element-timing."+n.identifier,n.startTime)}})),o("pageshow",jt),dt(),"complete"===document.readyState?Rt({skipTimingApi:i}):o("load",Rt.bind(void 0,{skipTimingApi:i}))},0)}function Rt(e){var s,a;t.getSetting("disableOnLoadTasks")||(removeEventListener("load",Rt),e.skipTimingApi||function(){if(Dt){var t=Tt.getEntriesByType("navigation")[0];if(t){var e=[];f(e,t),U(e);var i=Tt.getEntriesByName("yndxNavigationSource")[0];i&&e.push("2091.186="+i.value);var n=Tt.getEntriesByName("yndxNavigationToken","yndxEntry")[0];n&&e.push("2091.3649="+n.value),x(Pt,e)}}}(),(a=t.getSetting("periodicStatsIntervalMs"))||null===a||(a=15e3),a&&(s=setInterval(At,a),i(function(){clearInterval(s)}),Nt=s),o("beforeunload",At),vt(),n("first-input",function(t,e){var i=t.getEntries()[0];if(i){var n=i.processingStart,s={duration:i.duration,js:i.processingEnd-n,name:i.name};i.target&&(s.target=c(i.target)),L("first-input",n-i.startTime,s),e.disconnect()}},{buffered:Boolean(t.getSetting("fidFromBuffer"))}),function(){if(window.PerformanceObserver){Y=J,V=null,z=null,W=null;var e=t.getSetting("clsWindowGap")||1/0,i=t.getSetting("clsWindowSize")||1/0;r(n("layout-shift",function(t){var n=t.getEntries();null==Y&&(Y=0);for(var s=0;s<n.length;s++){var o=n[s];o.hadRecentInput||(W&&o.startTime-z[z.length-1].startTime<e&&o.startTime-z[0].startTime<i?(W+=o.value,z.push(o)):(Z(),W=o.value,z=[o]))}Z()}),tt,!0)}}(),!window.PerformanceObserver||!t.getSetting("forcePaintTimeSending")&&t.isVisibilityChanged()||(H=null,K=null,G=!1,r(n("largest-contentful-paint",function(t){var e=t.getEntries(),i=e[e.length-1];H=i.renderTime||i.loadTime,K=i,G||(S("largest-loading-elem-paint",H),G=!0)}),et)))}var Nt;function jt(t){t.persisted&&S("bfcache")}function At(){var t=!1;h().forEach(function(e){e()&&(t=!0)}),t||clearInterval(Nt)}u(Ot),t.destroy=function(e){var i=t._unsubscribers;e.shouldComplete&&t.completeSession();for(var n=0;n<i.length;n++)i[n]();removeEventListener("visibilitychange",t._onVisibilityChange),t._unsubscribers=[],t._periodicTasks=[],t._markListeners={},t._deltaMarks={}},t.restart=function(e,i,n){t.destroy({shouldComplete:n}),t.init(e,i),addEventListener("visibilitychange",t._onVisibilityChange),xt(),function(){for(var e=0;e<t._onInit.length;e++)t._onInit[e]()}()},t.setVars=function(e){Object.keys(e).forEach(function(i){t._vars[i]=e[i]}),I(),P()},t.completeSession=function(){for(var e=t._onComplete,i=0;i<e.length;i++)e[i]()},xt(),t._periodicTasks=[],t.sendHeroElement=function(t){S("2876",t)},t._subpages={},t.makeSubPage=function(e,i){var n=t._subpages[e];t._subpages[e]=void 0===n?n=0:++n;var s=!1;return{689.2322:a(void 0!==i?i:t.getTime()),2924:e,2925:n,isCanceled:function(){return s},cancel:function(){s=!0}}},t.getTimeMarks=function(){return m},t.getVarsList=d,t.getResourceTimings=R,t.pushConnectionTypeTo=U,t.pushTimingTo=f,t.normalize=a,t.sendCounter=D,t.sendDelta=L,t.onReady=l,t.getSelector=c,t.finalizeLayoutShiftScore=tt,t.finalizeLargestContentfulPaint=et,t.sendTrafficData=Et,t._getCommonVars=A,t._addListener=o,t._observe=n,t._timeout=s,t.sendTTI=dt,t._getLongtasksStringValue=ft,t.onQuietWindow=pt,t.sendBFCacheTimeMark=jt}else t.getSetting=function(){return""},t.getVarsList=function(){return[]},t.getResourceTimings=t.completeSession=t.pushConnectionTypeTo=t.pushTimingTo=t.normalize=t.sendCounter=t.destroy=t.restart=t.setVars=t.completeSession=t.sendDelta=t.sendTimeMark=t.sendResTiming=t.sendTiming=t.sendTTI=t.makeSubPage=t.sendHeroElement=t.onReady=t.onQuietWindow=function(){}}(),BEM.decl("rum__bem-ajax",{onSetMod:{js:function(){var t=this;this._requests={},this._lastAjaxPerf=null,BEM.channel("ajax").on({ajaxAction:function(){t._actionTime=Ya.Rum.getTime(),Ya.Rum.completeSession(),t._lastAjaxPerf&&(t._lastAjaxPerf._ttiSent||t._lastAjaxPerf.sendTTI(),t._lastAjaxPerf=null)},successCallbacksStarted:function(){t._renderStart=Ya.Rum.getTime()},successCallbacksFinished:function(){t._renderStart&&(t._renderDuration=Ya.Rum.getTime()-t._renderStart,t._renderStart=null)}}),BEM.DOM.doc.on({ajaxSend:this._onSend.bind(this),ajaxSuccess:this._onSuccess.bind(this),ajaxError:this._onError.bind(this),ajaxComplete:this._onComplete.bind(this)})}},_getRequestTracker:function(t){return this._requests[$.identify(t)]},_onSend:function(t,e,i){i=i||{},this._shouldTrackRequest(i)&&(this._requests[$.identify(e)]=new Ya.Rum.AjaxPerf({xhr:e,url:i.url,actionTime:this._actionTime}),this._actionTime=null)},_onSuccess:function(t,e,i,n){if(n&&n.error){var s=this._getRequestTracker(e);s&&s.onRequestError("Handled: "+n.error)}},_onError:function(t,e,i,n){var s=this._getRequestTracker(e);s&&s.onRequestError(n)},_onComplete:function(t,e){var i=this._getRequestTracker(e);i&&(i.onRequestComplete(),this._renderDuration&&i.onRenderComplete(this._renderDuration),delete this._requests[$.identify(e)],this._renderDuration=null,this._lastAjaxPerf=i,this.afterCurrentEvent(function(){i.send(),Ya.Rum.onQuietWindow(i.sendTTI.bind(i),i._completeTime)}))},_shouldTrackRequest:function(t){var e=BEM.blocks.uri.parse(t.url),i=e.queryParams;return this._validateUrl(e)&&i.ajax&&!(i.rpt||i.filter)},_validateUrl:function(t){return!1}},{getInstance:function(){return this._instance||(this._instance=BEM.create("rum__bem-ajax"))}}),BEM.decl("rum__bem-ajax",{_validateUrl:function(t){var e=t.toString(),i=BEM.blocks.location.getInstance(),n={url:e,path:t.path(),params:t.queryParams};return"b-page_type_search"===i.detectBlock(n)&&e.indexOf("serp-list_infinite_yes")>-1}}),BEM.DOM.decl("extra-content",{appendContent:function(t){BEM.DOM.append(this.domElem,$(t).children())},setMetadata:function(t){this._metadata=t},getMetadata:function(){return this._metadata||this.params.metadata}},{getInstance:function(){if(!this._instance){var t=$(this.buildSelector());this._instance=t.length?t.bem(this.getName()):void 0}return this._instance}}),BEM.decl("i-bundle-async",{},{_bundles:{},isLoadingDone:function(t){var e=this._bundles[t];return!!e&&"pending"!==e.state()},load:function(t){var e,i,n=this,s=BEM.channel("bundle-loaded");return this._bundles[t]?("resolved"===this._bundles[t].state()&&s.trigger(t),this._bundles[t]):(i=$.Deferred(),(e=BEM.blocks["i-global"].param("pushBundleAsyncUrls"))[t]?($.getJSON(e[t]).done(function(e){var n=BEM.blocks["i-global"].param("nonce"),s=[];e.css&&s.push('<style data-bundle_s="'+t+'">'+e.css+"</style>"),e.js&&s.push('<script data-bundle_s="'+t+'" nonce="'+n+'">'+e.js+"<\/script>"),BEM.DOM.append(BEM.DOM.scope,s.join("")),i.resolve()}).fail(function(){n._onError(i,t)}),this._bundles[t]=i.promise(),this._bundles[t].then(function(){s.trigger(t)}),this._bundles[t]):(this._onError(i,t),i))},_onError:function(t,e){window.Ya.counter.hitDelayed({dtype:"iweb",reqid:BEM.blocks["i-global"].param("reqid"),path:"/"+BEM.blocks["i-global"].param("project")+"/bundles/load-ajax-error",vars:window.Ya.counter.stringifyParams({17:e},",")}),t.reject()}}),BEM.DOM.decl({block:"internal-store-updater"},{onSetMod:{js:{inited:function(){BEM.blocks["i-global"].setParams(this.params)}}}}),function(t,e,i){var n={bubbles:!1,cancelable:!1,view:null,detail:null,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null,buttons:0,pointerId:0,width:0,height:0,pressure:0,tiltX:0,tiltY:0,pointerType:"",hwTimestamp:0,isPrimary:!1,target:null,currentTarget:null,which:0,pageX:0,pageY:0,timeStamp:0},s=Object.keys(n),o=s.map(function(t){return n[t]}),r=s.length,a=!1,c=[0,1,4,2];try{a=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}function l(t,e){var i={},n=t.originalEvent||{};e||(e={});for(var l,u=0;u<r;u++)i[l=s[u]]=e[l]||t[l]||n[l]||o[u];return i.x=i.clientX,i.y=i.clientY,i.pressure=i.pressure||(i.buttons?.5:0),i.buttons||a||(i.buttons=c[i.which]||0),i.originalEvent=t.originalEvent||null,e.preventDefault?i.preventDefault=function(){e.preventDefault(),t.preventDefault()}:(i.preventDefault=function(){t.preventDefault()},i._preventScroll=function(){}),i}var u=t.Map&&t.Map.prototype.forEach?new t.Map:{array:[],size:0,set:function(t,e){if(void 0===e)return this.delete(t);this.has(t)||this.size++,this.array[t]=e},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach(function(i,n){t.call(e,i,n,this)},this)}},h={eventMap:{},captureInfo:{},eventSourceList:[],registerSource:function(t,e){var i=e.events;i&&(i.forEach(function(t){e[t]&&(this.eventMap[t]=e[t].bind(e))},this),this.eventSourceList.push(e))},register:function(t){for(var e,i=this.eventSourceList.length,n=0;n<i&&(e=this.eventSourceList[n]);n++)e.register.call(e,t)},unregister:function(t){for(var e,i=this.eventSourceList.length,n=0;n<i&&(e=this.eventSourceList[n]);n++)e.unregister.call(e,t)},contains:function(t,e){return!!t.contains&&t.contains(e)},getCommonAncestor:function(t,i){for(;t&&t!==e.documentElement;){if(t.contains&&t.contains(i))return t;t=t.parentNode}return null},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){var e=[],i=t.target,n=this.getCommonAncestor(i,t.relatedTarget);for(t.bubbles=!1;i&&i!==n;)e.push(i),i=i.parentNode;for(;e.length;)t.target=e.pop(),this.fireEvent("pointerenter",t)},leave:function(t){var e=[],i=t.target,n=this.getCommonAncestor(i,t.relatedTarget);for(t.bubbles=!1;i&&i!==n;)e.push(i),i=i.parentNode;for(;e.length;)t.target=e.shift(),this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.contains(t.target,t.relatedTarget)||this.leave(t)},enterOver:function(t){this.over(t),this.contains(t.target,t.relatedTarget)||this.enter(t)},listen:function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},unlisten:function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},addEvent:function(t,e){i(t).on(e,this.boundHandler)},removeEvent:function(t,e){i(t).off(e,this.boundHandler)},eventHandler:function(t){var e=this.eventMap[t.type];e&&e(t,t.originalEvent)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var n=function(t,e){var n=i.Event(t),s=e.preventDefault,o=n.preventDefault.bind(n);return jQuery.extend(n,e),n.preventDefault=function(){s(),o()},n}(t,e);return n._target=n._target||e.target,n},fireEvent:function(t,e){var i=this.makeEvent(t,e);return this.dispatchEvent(i)},getTarget:function(t){return this.captureInfo[t.pointerId]||t._target},setCapture:function(t,n){this.captureInfo[t]&&this.releaseCapture(t),this.captureInfo[t]=n,this.implicitRelease=this.releaseCapture.bind(this,t),i(e).on("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(i.Event("gotpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:n}))},releaseCapture:function(t){var n=this.captureInfo[t];n&&(this.captureInfo[t]=void 0,i(e).off("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(i.Event("lostpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:n})))},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return i.event.trigger(t,null,e,!t.bubbles)},asyncDispatchEvent:function(e){(t.requestAnimationFrame||setTimeout)(this.dispatchEvent.bind(this,e))}};h.boundHandler=h.eventHandler.bind(h);var d,p,f={POINTER_ID:1,POINTER_TYPE:"mouse",DEDUP_DIST:25,events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){h.listen(t,this.events)},unregister:function(t){h.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,i=this.lastTouches,n=t.clientX,s=t.clientY,o=0,r=i.length;o<r&&(e=i[o]);o++){var a=Math.abs(n-e.x),c=Math.abs(s-e.y);if(a<=this.DEDUP_DIST&&c<=this.DEDUP_DIST)return!0}},prepareEvent:function(t){return l(t,{pointerId:this.POINTER_ID,isPrimary:!0,pointerType:this.POINTER_TYPE})},mousedown:function(t){this.isEventSimulatedFromTouch(t)||(u.has(this.POINTER_ID)&&this.cancel(t),u.set(this.POINTER_ID,t),h.down(this.prepareEvent(t)))},mousemove:function(t){this.isEventSimulatedFromTouch(t)||h.move(this.prepareEvent(t))},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=u.get(this.POINTER_ID);e&&e.button===t.button&&(h.up(this.prepareEvent(t)),this.cleanupMouse())}},mouseover:function(t){this.isEventSimulatedFromTouch(t)||h.enterOver(this.prepareEvent(t))},mouseout:function(t){this.isEventSimulatedFromTouch(t)||h.leaveOut(this.prepareEvent(t))},cancel:function(t){h.cancel(this.prepareEvent(t)),this.cleanupMouse()},cleanupMouse:function(){u.delete(this.POINTER_ID)}},m={POINTER_TYPE:"touch",DEDUP_TIMEOUT:2500,CLICK_COUNT_TIMEOUT:200,events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){h.listen(t,this.events)},unregister:function(t){h.unlisten(t,this.events)},firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===u.size||1===u.size&&u.has(1))&&(this.firstTouch=t.identifier,this.firstTouchTarget=t.target,this.scrolling=!1,this.firstXY={X:t.clientX,Y:t.clientY},this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstTouchTarget=null,this.firstXY=null,this.shouldScrollCache=void 0,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,this.CLICK_COUNT_TIMEOUT)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){return"touchstart"===t||"touchmove"===t?1:0},findTarget:function(t){return e.elementFromPoint(t.clientX,t.clientY)},touchToPointer:function(t){var e=this,n=this.currentTouchEvent,s=t.identifier+2;return l(n,i.extend({},t,{pointerId:s,target:h.captureInfo[s]||this.findTarget(t),bubbles:!0,cancelable:!0,detail:this.clickCount,button:0,buttons:this.typeToButtons(n.type),width:t.webkitRadiusX||t.radiusX||0,height:t.webkitRadiusY||t.radiusY||0,pressure:t.webkitForce||t.force||.5,isPrimary:this.isPrimaryTouch(t),pointerType:this.POINTER_TYPE,preventDefault:function(){e.scrolling=!1,e.shouldScrollCache=!1,e.firstXY=null}}))},processTouches:function(t,e){var i=t.originalEvent.changedTouches;this.currentTouchEvent=t;for(var n,s=0;s<i.length;s++)n=i[s],e.call(this,this.touchToPointer(n))},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e,i=this.scrollTypes;return t===i.EMITTER?e="none":t===i.XSCROLLER?e="X":t===i.YSCROLLER?e="Y":i.SCROLLER.exec(t)&&(e="XY"),e},shouldScroll:function(t){if(void 0!==this.shouldScrollCache)return this.shouldScrollCache;if(!this.firstXY)return!0;for(var e,i,n=this.firstTouchTarget;n&&1===n.nodeType&&null===(e=n.getAttribute("touch-action"));)n=n.parentNode;var s=this.touchActionToScrollType(e);if("none"===s)i=!1;else if("XY"===s||void 0===s)i=!0;else{var o=t.originalEvent.changedTouches[0],r=s,a="Y"===s?"X":"Y";i=Math.abs(o["client"+r]-this.firstXY[r])>=Math.abs(o["client"+a]-this.firstXY[a])}return this.shouldScrollCache=i,this.firstXY=null,this.firstTouchTarget=null,this.shouldScrollCache},findTouch:function(t,e){for(var i,n=0,s=t.length;n<s&&(i=t[n]);n++)if(i.identifier===e)return!0},vacuumTouches:function(t){var e=t.originalEvent.touches;if(u.size>=e.length){var i=[];u.forEach(function(t,n){if(1!==n&&!this.findTouch(e,n-2)){var s=t.out;i.push(s)}},this),i.forEach(this.cancelOut,this)}},touchstart:function(t){var e=t.originalEvent.changedTouches[0];this.vacuumTouches(t),this.setPrimaryTouch(e),this.dedupSynthMouse(e),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){u.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),h.over(t),h.enter(t),h.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=u.get(t.pointerId);if(e){var i=e.out,n=e.outTarget;h.move(t),i&&n!==t.target&&(i.relatedTarget=t.target,t.relatedTarget=n,i.target=n,t.target?(h.leaveOut(i),h.enterOver(t)):(t.target=n,t.relatedTarget=null,this.cancelOut(t))),e.out=t,e.outTarget=t.target}},touchend:function(t){this.dedupSynthMouse(t.originalEvent.changedTouches[0]),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(h.up(t),h.out(t),h.leave(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){h.cancel(t),h.out(t),h.leave(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){u.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=f.lastTouches;if(this.isPrimaryTouch(t)){var i={x:t.clientX,y:t.clientY};e.push(i);var n=function(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)}.bind(null,e,i);setTimeout(n,this.DEDUP_TIMEOUT)}}},g={POINTER_TYPES:["","unavailable","touch","pen","mouse"],HAS_BITMAP_TYPE:t.MSPointerEvent&&"number"==typeof t.MSPointerEvent.MSPOINTER_TYPE_MOUSE,events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){h.listen(t,this.events)},unregister:function(t){h.unlisten(t,this.events)},prepareEvent:function(t){var e=l(t);return this.HAS_BITMAP_TYPE&&(e.pointerType=this.POINTER_TYPES[e.pointerType]),e},cleanup:function(t){u.delete(t)},MSPointerDown:function(t){u.set(t.originalEvent.pointerId,t),h.down(this.prepareEvent(t))},MSPointerMove:function(t){h.move(this.prepareEvent(t))},MSPointerUp:function(t){h.up(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSPointerOut:function(t){h.leaveOut(this.prepareEvent(t))},MSPointerOver:function(t){h.enterOver(this.prepareEvent(t))},MSPointerCancel:function(t){h.cancel(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSGotPointerCapture:function(t){h.fireEvent("gotpointercapture",this.prepareEvent(t))},MSLostPointerCapture:function(t){h.fireEvent("lostpointercapture",this.prepareEvent(t))}},_=function(t){if(!u.has(t))throw new Error("InvalidPointerId")};if(t.Element&&Element.prototype.setPointerCapture?(d=function(t,e){t.setPointerCapture(e)},p=function(t,e){t.releasePointerCapture(e)}):t.navigator.msPointerEnabled?(d=function(t,e){_(e),t.msSetPointerCapture(e)},p=function(t,e){_(e),t.msReleasePointerCapture(e)}):(d=function(t,e){_(e),h.setCapture(e,t)},p=function(t,e){_(e),h.releaseCapture(e,t)}),i.fn.extend({setPointerCapture:function(t){d(this[0],t)},releasePointerCapture:function(t){p(this[0],t)}}),!t._pointerPolyfillInited)if(t._pointerPolyfillInited=!0,t.PointerEvent){i.event.fixHooks||(i.event.fixHooks={});var b=i.event.fixHooks;["move","down","up","over","out","enter","leave","cancel"].forEach(function(t){var e="pointer"+t;b[e]||(b[e]={}),b[e].props=s.concat(b[e].props||[])})}else delete i.event.special.pointerenter,delete i.event.special.pointerleave,t.navigator.msPointerEnabled?h.registerSource("ms",g):(h.registerSource("mouse",f),void 0!==t.ontouchstart&&h.registerSource("touch",m)),h.register(document)}(window,document,jQuery),function(t,e){if(!e.event.special.pointerclick){var i,n=void 0!==t.ontouchstart||navigator.msMaxTouchPoints>0,s=10,o=25,r=900,a=[],c=[],l=null,u=null,h="touchAction"in document.documentElement.style?function(t){return function t(e){return!(!e||e===document.documentElement)&&("manipulation"===getComputedStyle(e)["touch-action"]||t(e.parentElement))}(t)}:function(){return!1};n?(i={click:function(t){var e=Object(t.originalEvent)._sourcePoint;if(!e)return d.apply(this,arguments);e.isDefaultPrevented()&&t.preventDefault()},"pointerdown pointermove pointerleave pointercancel pointerup":function(t){var e,i,n=t.type;if("mouse"!==t.pointerType&&("pointerdown"!==n&&"pointerup"!==n||!h(t.target)))if("pointerdown"===n)u=t;else if("pointermove"===n&&u&&(u.target!==t.target||(e=u,i=t,Math.abs(e.clientX-i.clientX)>s||Math.abs(e.clientY-i.clientY)>s)))u=null;else if("pointerleave"===n||"pointercancel"===n)u=null;else if("pointerup"===n){if(function(t){if(!t.isPrimary)return;a.push(t),setTimeout(Array.prototype.shift.bind(a),r)}(t),!u)return;if(!(t.timeStamp-u.timeStamp>250))return l||(l=setTimeout(function(){l=u=null})),d.apply(this,arguments);u=null}}},["mousedown","click"].forEach(function(e){t.addEventListener(e,function(t){!function(t){var e=t.clientX,i=t.clientY,n="_compat"+t.type;if(t._sourcePoint)return;for(var s=0;s<a.length;s++){var l=a[s],u=l.target===t.target;if(!l[n]&&((u||!(Math.abs(e-l.clientX)>o||Math.abs(i-l.clientY)>o))&&(u||document.elementFromPoint(l.clientX,l.clientY)!==l.target))){t._sourcePoint=l,l[n]=t;break}}c.push(t),setTimeout(Array.prototype.shift.bind(c),r)}(t),function(t){var e=function(t){for(var e=0;e<c.length;e++)if(c[e]===t)return c[e]._sourcePoint}(t);return Boolean(e)&&e.target!==t.target}(t)&&(t.preventDefault(),t.stopPropagation())},!0)})):i={click:function(t){return d.apply(this,arguments)}},e.event.special.pointerclick={setup:function(){e(this).on(i)},teardown:function(){e(this).off(i)}}}function d(t){var i,n=t.type;return t.button||(t.type="pointerclick",i=e.event.dispatch.apply(this,arguments),t.type=n),i}}(window,jQuery),BEM.DOM.decl("paranja",{onSetMod:{js:{inited:function(){[].concat(this.params.rel||[]).forEach(function(t){$(t.elem||this.domElem).on(t.event,this[t.method].bind(this))},this),this.bindTo("pointerclick",function(){this.trigger("click")})}},state:{open:function(){this.trigger("open")},close:function(){this.trigger("close")}}},open:function(t){this.setMod("state","open")},close:function(t){this.setMod("state","close")}},{live:!1}),function(){var t={},e=5e3,i=1,n="csp.yandex.net",s="web4",o="690.1893.1894",r="ru";function a(){var t;try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=!1}}return t||"undefined"==typeof XMLHttpRequest||(t=new XMLHttpRequest),t}function c(t){this.cspProtocol=t.cspProtocol||"https",this.cspUrl=t.cspUrl||this.cspProtocol+"://"+(t.cspHost||n)+"/csp",this.reqid=t.reqid,this.login=t.login,this.yandexuid=t.yandexuid,this.checkTimeout=t.checkTimeout||e,this.checkTimeoutId=null,this.from=t.from||s,this.project=t.project,this.platform=t.platform,this.page=t.page,this.env=t.env,this.counter=t.counter||o,this.tld=t.tld||r,this.domainExact=t.domainExact||["yandex."+this.tld,"yastatic.net","yandex.st"],this.domainSuffix=t.domainSuffix||[".yandex."+this.tld,".yandex.net",".yandex.ru"],this.onSendError=t.onSendError,this.check=this.check.bind(this),this.shouldCheckPeriodically=t.shouldCheckPeriodically;var i,a=document.cookie;return this.login||(i=a.match(/(?:^|;)\s*yandex_login\s*=\s*([^;]+)/))&&(this.login=i[1].trim()),this.yandexuid||(i=a.match(/(?:^|;)\s*yandexuid\s*=\s*([^;]+)/))&&(this.yandexuid=i[1].trim()),this}String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return(void 0===e||e>this.length)&&(e=this.length),this.substring(e-t.length,e)===t}),c.prototype.start=function(){return document.addEventListener("DOMContentLoaded",this.check,!1),this},c.prototype.stop=function(){return this._removeListener(),document.removeEventListener("DOMContentLoaded",this.check),this},c.prototype._removeListener=function(){this.checkTimeoutId&&(this.removeListenerCallback(),clearTimeout(this.checkTimeoutId))},c.prototype.check=function(){if("withCredentials"in a()){var t=document.documentElement,e=function(t){var e=t.target,i=e.nodeName.toLowerCase();"script"!==i&&"object"!==i&&"iframe"!==i&&"img"!==i||this._detect(i,e)}.bind(this);return this._detectByElem("script"),this._detectByElem("object"),this._detectByElem("iframe"),this._detectByElem("img"),t.addEventListener("load",e,!0),this.removeListenerCallback=function(){t.removeEventListener("load",e,!0)},this._removeListener(),this.checkTimeoutId=setTimeout(this.removeListenerCallback,this.checkTimeout),this.shouldCheckPeriodically&&(this._checkPeriodicallyCallback=function(){this.check(),i*=2,this._checkPeriodically()}.bind(this),this._checkPeriodically()),this}},c.prototype._detectByElem=function(t){for(var e,i=document.getElementsByTagName(t),n=0;n<i.length;n++)e=i[n],this._detect(t,e)},c.prototype._detect=function(t,e){if(e.src&&!e.checked){e.checked=!0;var i=e.src;this._filterSrc(i)&&this._send(t,i)}},c.prototype._filterSrc=function(t){var e=/^(?:(?![^:@]+:[^:@\/]*@)[^:\/?#.]+:)?(?:\/\/)?(?:(?:[^:@\/]*(?::[^:@\/]*)?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)/.exec(t||"")[1];return this.domainExact.every(function(t){return t!==e})&&this.domainSuffix.every(function(t){return!e.endsWith(t)})},c.prototype._send=function(t,e){var i=a(),n="from="+encodeURIComponent(this.from)+"&path="+encodeURIComponent(this.counter)+"&project="+encodeURIComponent(this.project)+"&platform="+encodeURIComponent(this.platform)+"&page="+encodeURIComponent(this.page)+"&env="+encodeURIComponent(this.env)+"&tag="+encodeURIComponent(t)+"&reqid="+encodeURIComponent(this.reqid)+"&url="+encodeURIComponent(e)+"&yandex_login="+encodeURIComponent(this.login)+"&yandexuid="+encodeURIComponent(this.yandexuid);i.open("POST",this.cspUrl,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4===i.readyState&&200!==i.status&&this.onSendError&&this.onSendError(i.status,i.responseText)}.bind(this),i.send(n)},c.prototype._checkPeriodically=function(){this.checkPeriodicallyTimeoutId=setTimeout(this._checkPeriodicallyCallback,1e4*i)},t.exports=c,BEM.DOM.decl("detect-scripts",{onSetMod:{js:{inited:function(){var e=BEM.blocks["i-global"],i=this.params;i.login=e.param("login"),i.yandexuid=e.param("yandexuid"),i.reqid=e.param("reqid"),i.tld=e.param("tld"),i.page=e.param("page"),i.platform=e.param("platform"),this._detectScripts=new t.exports(i),this._detectScripts.check()}}}})}(),BEM.decl("i-url-controller",{},{passedParams:["ncrnd","rdrnd","nojs","numdoc","i-m-a-hacker","l10n","family","yandex_login","yandexuid","time","noredirect","noredirect_com","lr","nocache","waitall","sbh","dbgwzr","srcskip","srcask","srcrwr","graphrwr","metahost","relev","rearr","pron","snip","no-tests","test-id","test-tag","exp_confs","exp_flags","flag","template_exp_flags","category","popular_category","promo","_yasc","spravka","dark_theme","mstatid","from","tld","rdpass","suggest-uri","disable","qa-project","qa-field","qa-functionality","qa-element","qa-test-id","qa-run-id","videoapp","counterDebug","patch","conditional_patch","cache_whitelist","login","distr_source","distr_path","distr_vars","timeout","waitall","ui","uuid","appsearch_header","for_serp_iframe","tpid","testRunId"],rejectedParams:["uinfo","viewport","json_dump","parent-reqid","photo-upload","spas","bootstrap","tmpl_version"],setCurrent:function(t){return this._current=t,this},setNext:function(t){return this._next=t,this},build:function(){return this.fillNextParams().fillCurrentParams().buildURL()},fillNextParams:function(){var t=this._next,e=t.url||location.href,i=this.rejectedParams;return t.path=t.path||BEM.blocks.uri.getPath(BEM.blocks.uri.clearHashSymbol(e)),t.params=$.extend({},BEM.blocks.uri.parseParams(e),t.params),t.params=Object.keys(t.params).reduce(function(e,n){var s=t.params[n];return-1===i.indexOf(n)&&null!==s&&(e[n]=s),e},{}),this},fillCurrentParams:function(){var t,e=this._next.params,i=this._current.params;return this.passedParams.forEach(function(n){e[n]||(t=i[n])&&(e[n]=t)}),BEM.blocks["i-global"].param("filterIsForced")&&(e.family="yes"),this},buildURL:function(){var t=this._next;return t.url=BEM.blocks.uri.buildRelativeUrl(t.path,t.params),this},mergePassedUrlParams:function(){var t=[].slice.call(arguments),e={};return BEM.blocks.utils.forOwn(BEM.blocks.location.getInstance().getState().params,function(t,i){-1!==this.passedParams.indexOf(i)&&(e[i]=t)},this),BEM.blocks["i-global"].param("filterIsForced")&&(e.family="yes"),BEM.blocks["i-global"].param("isYandexApp")&&(e.service=BEM.blocks["i-global"].param("id")+".yandex"),Object.assign.apply(Object,[e].concat(t)),e},addPassedParams:function(t){this.passedParams.push(t)},delPassedParams:function(t){for(var e=[],i=0;i<this.passedParams.length;i++)this.passedParams[i]!==t&&e.push(this.passedParams[i]);this.passedParams=e}}),BEM.decl("location",{onSetMod:{js:{inited:function(){this._history=BEM.blocks.history.getInstance(),this._syncState(),this._history.on("statechange",this.changeThis(this._onStateChange))}}},_onStateChange:function(){this._syncState(),this._state.referer!==BEM.blocks.uri.normalize(window.location.href)&&!1!==this._state.trigger&&(this.trigger("change",this._state),this._state.block&&this.channel(this._state.block).trigger("change"))},_syncState:function(){var t=this._history.state,e=BEM.blocks.uri.parse(t.url);return this._state=$.extend({},t.data,{referer:this._state&&this._state.url,url:e.build(),hostname:e.host(),path:e.path(),params:e.queryParams}),this},change:function(t){var e=BEM.blocks.uri.parse(t.url);if(t.url&&delete t.params,t.url=e.build(),t.params){var i=BEM.blocks.uri.parse(),n=t.forceParams?t.params:$.extend({},this._state.params,t.params);Object.keys(n).forEach(function(t){i.addParam(t,n[t])}),t.url=i.build()}!1===t.trigger||(t.trigger=!0);try{this._history.changeState(!1===t.history?"replace":"push",{data:t,url:t.url})}catch(e){if("SecurityError"===e.name)throw e;"undefined"!=typeof console&&console.error&&console.error("location.assign fallback",e),window.location.assign(t.url)}},getState:function(){return $.extend(!0,{},this._state)},getUri:function(){return BEM.blocks.uri.parse(this._state.url)},getReferer:function(){return this._state.referer}},{_instance:null,getInstance:function(){return this._instance||(this._instance=BEM.create("location"))}}),BEM.decl("location",{CHANGE_DEBOUNCE:600,onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.changeDebounced=$.debounce(this.change,this.CHANGE_DEBOUNCE,this),this.fillBlock(this.getOriginalState()),this._isChangeByYandexAppsAPI()&&this.setMod("yandex-apps-api",!0),Ya.reactBus.on("location:change",this.change,this)}}},_isChangeByYandexAppsAPI:function(){var t=BEM.blocks["i-global"].param("hasYandexAppsAPI"),e=BEM.blocks["i-global"].param("isYandexAppIosWebview"),i=BEM.blocks["i-global"].param("isYandexAppAndroidWebview");return t&&!(e||i)},_onStateChange:function(){this.__base.apply(this,arguments),!1!==this._state.trigger&&this._state.block&&this.trigger(this._state.block,this._state)},_syncState:function(){this.__base.apply(this,arguments),this.fillBlock(this.getOriginalState())},getOriginalState:function(){return this._state},change:function(t,e,i){e&&e.preventDefault&&e.preventDefault(),this.fillURL(t,i),this._isChangeByAssign(t)?window.location.assign(t.url):this.__base.apply(this,arguments)},_isChangeByAssign:function(t){var e,i;return!!t.reload||(i=BEM.blocks["i-global"].param("isPumpkin"),e=!1!==t.trigger,!(!i||!e))},fillURL:function(t,e){BEM.blocks["i-url-controller"].setCurrent(this.getState()).setNext(t,e).build()},fillBlock:function(t){return t.block||(t.block=this.detectBlock(t)),this},getParamValue:function(t){var e=this._state.params[t];return e&&e[0]},hasParam:function(t,e){var i=this._state.params[t];return!!i&&(e?-1!==i.indexOf(e):Boolean(i[0]))}}),BEM.decl("location",{_isChangeByYandexAppsAPI:function(){var t=this.__base.apply(this,arguments);return t=t&&-1===location.search.indexOf("service=cbir.yandex")}}),BEM.decl("location",{detectBlock:function(t){var e=t.params.rpt&&t.params.rpt[0];if("imageinfo"===e||"imageview"===e){var i=t.params.cbir_page&&t.params.cbir_page[0];if("similar"===i)return"b-page_type_similar";if("products"===i)return"b-page_type_cbir-products";if("sites"===i)return"b-page_type_cbir-sites";var n=t.params.url&&t.params.url[0],s=t.params.cbir_id&&t.params.cbir_id[0];return n||s?"b-page_type_search-by-image":"b-page_type_cbir-landing"}if("imagelike"===e||t.params.like)return"b-page_type_similar";if(-1!==t.path.indexOf("search"))return"b-page_type_search";var o=$(".i-global"),r=o.length?o.bem("i-global").params.router.index:void 0;return"/"===t.path||t.path===r||t.path+"/"===r?"b-page_type_index":void 0}}),BEM.decl("history",{onSetMod:{js:{inited:function(){if(!this.hasMod("provider"))throw new Error("Use BEM.blocks['history'].getInstance() instead of BEM.create('history')");this._resetUrl().bindEvents().syncState()}}},destruct:function(){this.unbindEvents(),this.__base.apply(this,arguments)},pushState:function(t,e,i){return this.changeState("push",this.normalizeState(t,e,i))},replaceState:function(t,e,i){return this.changeState("replace",this.normalizeState(t,e,i))},bindEvents:function(){return this},_resetUrl:function(){return this},_removeHashbang:function(t){var e=BEM.blocks.uri,i=e.parse(t);if(""===i.anchor())return t;var n=e.parse(i.anchor().replace(/^!/,""));return i.anchor(""),i.query(n.query()),i.build()},unbindEvents:function(){return this},syncState:function(){return this.state=this.normalizeState(void 0,document.title,window.location.href),this},normalizeState:function(t,e,i){return{data:null===t?void 0:t,title:e,url:i}},changeState:function(t,e){try{window.location.assign(e.url)}catch(t){}}},{hasNativeAPI:function(){return window.history&&"pushState"in window.history},_instance:null,getInstance:function(){return this._instance||(this._instance=BEM.create({block:"history",mods:{provider:this.hasNativeAPI()?"history-api":"hashchange"}}))}}),BEM.decl({block:"history",modName:"provider",modVal:"history-api"},{_onPopState:function(t){var e=t.originalEvent.state;null!==e&&(this.state=this.normalizeState(e,document.title,window.location.href),this.state.data&&delete this.state.data.trigger,this.trigger("statechange",this.state))},bindEvents:function(){return this.__base.apply(this,arguments),BEM.DOM.win.on("popstate",this.changeThis(this._onPopState)),this},unbindEvents:function(){return this.__base.apply(this,arguments),BEM.DOM.win.off("popstate",this._onPopState),this},_resetUrl:function(){return BEM.blocks.uri.parse(window.location.href).anchor()&&window.history.replaceState({},document.title,this._removeHashbang(window.location.href)),this},syncState:function(){var t=window.history.state;return null!==t&&void 0!==t||window.history.replaceState({},document.title,window.location.href),null!==this.state&&void 0!==this.state||(this.state=this.normalizeState(void 0,document.title,window.location.href)),this},changeState:function(t,e){return window.history[t+"State"](e.data,e.title||document.title,e.url),this.state=e,this.trigger("statechange",{state:e,nativeApi:!0}),this}}),BEM.DOM.decl({block:"b-page",modName:"ajax",modVal:"yes"},{onSetMod:{js:{inited:function(){this._location=BEM.blocks.location.getInstance(),this.findBlockOn("i-global"),this.__base.apply(this,arguments),this._cacheKey=this.buildCacheKey()}},type:function(t,e){this.__base.apply(this,arguments),this.findBlockInside("page-layout").setMod("page",e)}},bindEvents:function(){this.__base.apply(this,arguments),this.on("change",this._onChange)},unbindEvents:function(){this.__base.apply(this,arguments)},_addPushbundleTestViewToReq:function(t){return BEM.blocks["i-global"].getFlag("pushbundle_test_view")&&t.push({name:"pushbundle__get-pushbundle-test-view-ajax",callback:this._onPushbundleTestViewLoaded}),t},_onPushbundleTestViewLoaded:function(t){BEM.DOM.append(this.domElem,t.html)},load:function(t){this.trigger("load:start"),Ya.reactBus.emit("b-page:load-start");var e=BEM.create("i-request_type_bem",{url:t.url,cache:t.cache,ctx:this});return this._getCommonAjaxBlocks(t).forEach(function(t){e.block(t.name,t.callback)}),e.on("beforeCallback",function(){Ya.debug&&Ya.debug("set-page-type",t.type),this.setMod("type",t.type)},this),this.showFade(),this._currentRequest=e.get(this.prepareParams(t.params),this._requestCallback.bind(this,t.type)),this},_getCommonAjaxBlocks:function(t){var e=[{name:"i-global__params:ajax",callback:this.updateGlobalParams}];return BEM.blocks.suggest2&&e.push({name:"suggest2-history",callback:function(t){this.trigger("suggestHistoryReceived",t)}}),Array.isArray(t.blocks)&&(e=e.concat(t.blocks)),e.push({name:"content_type_"+t.type,callback:function(e){this._contentLoadCallback(e,t.type)}},{name:"serp-controller",callback:this.updateSerpParams}),e=this._addPushbundleTestViewToReq(e)},_contentLoadCallback:function(t,e){this.__base.apply(this,arguments),t.page=e,this.trigger("contentUpdating",t);var i=this.findElem("content");i[0]?(Ya.reactBus.emit("react-adapter:unmount",i[0]),BEM.DOM.update(i,t.html,function(){Ya.reactBus.emit("react-adapter:mount",i[0]),this.trigger("contentUpdated",t)}.bind(this))):this.trigger("contentUpdated",t)},_requestCallback:function(t){this.trigger("change",{type:t}),this.hideFade()},updateSeoInformation:function(t){this.updateTitle(t.title),$("meta[name=keywords]").attr("content",t.keywords),$("meta[name=description]").attr("content",t.description),this.params.seo.shareTitle=t.shareTitle},_onChange:function(){},buildCacheKey:function(){var t=this._location.getState(),e=BEM.blocks.uri.delParams(t.url,this._getFilterParams()),i="";try{i=decodeURIComponent(e)}catch(t){i=e}return i=i.replace(/\/$/,"").replace(/\/\?/g,"?"),[t.block?t.block:"",t.type?t.type:"",i].join("_")},checkCacheKey:function(){var t=this.buildCacheKey();return this._cacheKey!==t&&(this._cacheKey=t,!0)},resetCacheKey:function(){return this.buildCacheKey()+"_"+Math.floor(1e4*Math.random())},updateCacheKey:function(){this._cacheKey=this.buildCacheKey()},updateGlobalParams:function(t){BEM.blocks["i-global"].setParams(t.params),this.updateSeoInformation(t.params.seo),this.__base.apply(this,arguments)},prepareParams:function(t){return t||{}},updateSerpParams:function(t){var e,i=BEM.blocks["serp-controller"].getInstance(),n=t.params.mods;if(i)for(e in $.extend(i.params,t.params),n)n.hasOwnProperty(e)&&i.setMod(e,n[e])},showFade:function(){this._startedFade=this._startedFade||this.findBlockInside({block:"fade",modName:"region",modVal:"main"}),this._startedFade&&(this._startedFade.setMod("progress","yes"),Ya.reactBus.emit("b-page:fade-shown"))},hideFade:function(){this._startedFade&&(this._startedFade.delMod("progress"),this._startedFade=null,Ya.reactBus.emit("b-page:fade-hidden"))}}),BEM.DOM.decl({block:"b-page",modName:"ajax",modVal:"yes"},{_getCommonAjaxBlocks:function(t){var e=this.__base.apply(this,arguments);return e.push({name:"cookies_ajax",callback:this.updateCookies}),e},_contentLoadCallback:function(t){this.__base.apply(this,arguments),this._getTabs()},updateCookies:function(t){BEM.blocks.cookies.save(t.params.cookies)}}),BEM.DOM.decl({block:"b-page",modName:"ajax",modVal:"yes"},{prepareParams:function(){var t=this.__base.apply(this,arguments);return t.uinfo=BEM.blocks["i-userinfo"].get().getUserInfo(),t["source-serpid"]=BEM.blocks["i-global"].param("serpid"),t},_contentLoadCallback:function(){this.__base.apply(this,arguments);var t=BEM.blocks["i-global"];t.getFlag("enable_webvisor2")&&BEM.blocks["b-statcounter"].hit({params:{text:t.param("query")}})},_getCommonAjaxBlocks:function(t){var e=this.__base.apply(this,arguments);if(e.push(this._getAdvancedSearchAjaxBlock()),"index"===t.type||this.hasMod("type","index"))for(var i=0;i<e.length;i++)if("i-global__params:ajax"===e[i].name){e.splice(i+1,0,{name:"header",callback:this._headerLoadCallback});break}return e},_headerLoadCallback:function(t){var e=$(".header-container");e.length&&(Ya.reactBus.emit("react-adapter:unmount",e[0]),t&&t.html&&BEM.DOM.update(e,t.html,function(){Ya.SuggestInit&&Ya.SuggestInit(),Ya.reactBus.emit("react-adapter:mount",e[0])}))},_getAdvancedSearchAjaxBlock:function(){var t=this.findElem("advanced-search");return t&&t[0]?{name:"advanced-search-props",callback:this._advancedSearchPropsLoadCallback}:{name:"advanced-search-block",callback:this._advancedSearcBlockLoadCallback}},_advancedSearcBlockLoadCallback:function(t){var e=this.findElem("advanced-search-container");e[0]&&"<div></div>"!==t.html&&(t&&t.html?BEM.DOM.update(e,t.html,function(){Ya.reactBus.emit("react-adapter:mount",e[0])}):(Ya.reactBus.emit("react-adapter:unmount",e[0]),BEM.DOM.update(e,"")))},_advancedSearchPropsLoadCallback:function(t){var e=this.findElem("advanced-search-container"),i=t.params||{};i.filtersOrdering||i.tags?Ya.reactBus.emit("advanced-search:updateProps",{query:i.query,baseUrl:i.baseUrl,filtersOrdering:i.filtersOrdering,filtersMetrikaParams:i.filtersMetrikaParams,activeFiltersCount:i.activeFiltersCount,counters:i.counters,filters:i.filters,tags:i.tags,tagsColor:i.tagsColor}):(Ya.reactBus.emit("react-adapter:unmount",e[0]),BEM.DOM.update(e,""))}}),function(t){t.event.special.pointerpress||t.each({pointerpress:"pointerdown",pointerrelease:"pointerup pointercancel"},function(e,i){function n(i){var n,s=i.type;return"mouse"===i.pointerType&&1!==i.which||(i.type=e,n=t.event.dispatch.apply(this,arguments),i.type=s),n}t.event.special[e]={setup:function(){t(this).on(i,n)},teardown:function(){t(this).off(i,n)}}})}(jQuery),$.extend({util:{}}),function(){var t=Object.prototype.toString;function e(e){return"[object Object]"===t.call(e)}function i(t,n,s){var o,r;for(o in t=Object(t),n=Object(n))"__proto__"!==o&&"prototype"!==o&&"constructor"!==o&&(void 0!==(r=s&&s(t[o],n[o],o))?t[o]=r:e(t[o])&&e(n[o])?t[o]=i(t[o],n[o],s):t[o]=n[o]);return t}$.extend($.util,{merge:i,mergeBemjson:function(t,e){return i(t,e,function(t,e,i){if("mix"===i)return[].concat(t,e)})}})}(),BEM.DOM.decl("control",{onSetMod:{focused:{yes:function(){if(this.hasMod("disabled"))return!1;this._focused||(this._focus(),this.trigger("focus"))},"":function(){this._focused&&(this._blur(),this.trigger("blur"))}},disabled:{"*":function(t,e){var i=this._getControl();i.prop("disabled",Boolean(e)).attr("aria-disabled",Boolean(e)),i.attr("tabindex",e?null:this.params._tabindex)},yes:function(){this.delMod("focused")}}},_focus:function(){this._getControl().focus()},_blur:function(){this._getControl().blur()},_getControl:function(){var t=this.elem("control");return t.length>0?t:this.domElem},_onFocusin:function(){this._focused=!0,this.trigger("focus").setMod("focused","yes").bindTo("focusout",this._onFocusout)},_onFocusout:function(){this._focused=!1,this.trigger("blur").delMod("focused").unbindFrom("focusout")},getDefaultParams:function(){return{_tabindex:this._getControl().attr("tabindex")}}},{live:function(){this.liveBindTo("focusin",function(t){this._onFocusin(t)}),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&this.liveBindTo("control","focusin",function(t){t.preventDefault()})}}),BEM.DOM.decl({block:"link",baseBlock:"control"},{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex",this.params._tabindex)},yes:function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex",-1),this.delMod("pressed")}}},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}),this.__base()}}),BEM.DOM.decl("link",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.__base.apply(this,arguments)}}),function(){var t=$(window),e=$(document.documentElement),i=0,n=!1;function s(){e.hasClass("pointerfocus")&&(n=!0,setTimeout(function(){n=!1}))}document.documentMode<=11?e.on("focusin",function(t){var e=t.originalEvent;!e||e.fromElement||e.relatedTarget||s()}):t.on("blur",function(){t.one("focus",s)}),e.addClass("utilityfocus").on({focusin:function(){e.toggleClass("pointerfocus",n).toggleClass("utilityfocus",!n)},keydown:function(){clearTimeout(i),n=!1},"pointerdown pointerup click":function(t){n=!0,clearTimeout(i),i=setTimeout(function(){n=!1},600)}})}(),BEM.DOM.decl({block:"link",modName:"ajax",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments);var e=this.domElem.attr("href");e&&(this.trigger("click",{domEvent:t}),this.isMouseDownTriggered||this.domElem.trigger("onmousedown"),BEM.blocks.location.getInstance().change($.extend({url:e},this.params),t))},_onMouseDown:function(){this.isMouseDownTriggered=!0}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo({block:"link",modName:"ajax",modVal:"yes"},"pointerclick",function(t){this._onClick(t)}),this.liveBindTo({block:"link",modName:"ajax",modVal:"yes"},"mousedown",function(){this._onMouseDown()})}}),BEM.DOM.decl({block:"link",modName:"ajax",modVal:"yes"},{_onClick:function(t){if(2!==t.which&&!t.metaKey&&!t.ctrlKey)return this.__base.apply(this,arguments)}}),p={},BEM.decl("i-request",{onSetMod:{js:{inited:function(){this._preventCache=!1}}},get:function(t,e,i,n){return $.isFunction(i)||(n=i,i=this.params.onError),this._get(t,e,i,$.extend({},this.params,n)),this},_get:function(t,e,i,n){var s=this._buildCacheKey(t,n),o=p[n.cacheGroup];n.cache&&o&&s in o.data?this.afterCurrentEvent(function(){e.call(this.params.callbackCtx,o.data[s])},this):this._do(t,e,i,n)},_do:function(t,e,i,n){},_onSuccess:function(t,e,i,n){n.cache&&!this._preventCache&&this.putToCache(n,t,i),this._preventCache=!1},_buildCacheKey:function(t,e){return"string"==typeof t?t:$.param(t)},putToCache:function(t,e,i){var n=p[t.cacheGroup]||(p[t.cacheGroup]={keys:[],data:{}});n.keys.length>=t.cacheSize&&delete n.data[n.keys.shift()];var s=this._buildCacheKey(e,t);return n.data[s]=i,n.keys.push(s),this},dropCache:function(){return delete p[this.params.cacheGroup],this},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:p}),BEM.decl({block:"i-request_type_bem",baseBlock:"offline-request"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.blocks=[],this._addIConsoleBlock(),this._addExtraContentBlock();var t=this._prepareRequestUrl(),e={dataType:this.params.dataType,url:t,cache:this.params.cache,callbackCtx:this,traditional:!0,paramsToSettings:["traditional"]};BEM.blocks["i-global"].getFlag("disable_jsonp_cors")&&(e.dataType="json",e.crossDomain=!1),this._req=BEM.create("i-request_type_ajax",e),this._initOffline()}}},_prepareRequestUrl:function(){var t=this.params.url,e=this.params.passedParams,i=BEM.blocks.location.getInstance(),n=e.reduce(function(e,n){var s=i.getParamValue(n);return s&&-1===t.indexOf(n+"=")&&e.push(n+"="+s),e},[]);if(n.length){var s=BEM.blocks.utils.isEmpty(BEM.blocks.uri.parseParams(t))?"?":"&";t+=s+n.join("&")}return t},_addIConsoleBlock:function(){BEM.blocks["i-global"].param("isYandexNet")&&this.block("i-console",this._onIConsoleSuccess,{isAjax:!0})},_onIConsoleSuccess:function(t){t&&t.html&&BEM.DOM.scope.append(t.html)},_addExtraContentBlock:function(){this.block("extra-content",this._onExtraContentSuccess)},_onExtraContentSuccess:function(t){BEM.blocks["extra-content"]&&t&&t.html&&BEM.blocks["extra-content"].getInstance().appendContent(t.html)},block:function(t,e,i,n){var s=Array.isArray(t)?t:"string"==typeof t?t.split(" "):[t];if(arguments.length<2)throw new Error("success callback is required");for(var o=0,r=s.length;o<r;o++)this.blocks.push({decl:s[o],success:e,error:"function"===$.type(i)?i:$.noop,params:n||("object"===$.type(i)?i:{}),ctx:this.params.ctx});return this},get:function(t,e,i){var n=this.params;return"function"===$.type(t)?(n.success=t,n.error=e||$.noop,t=void 0):(n.success=e||$.noop,n.error=i||$.noop),BEM.blocks["i-global"].param("isPumpkin")?(this._onError(),this):(this._cachedArgs=$.extend({},this._getArgs(),t),this._get(this._cachedArgs),this)},_get:function(t){return this.afterCurrentEvent(function(){this.trigger("beforeRequest"),this._req.get(t,this._onSuccess,this._onError)}),this},abort:function(){return this._req.abort(),this.blocks.length=0,this},_onSuccess:function(t){if(t&&"captcha"===t.type)return window.Ya.counter.hit({dtype:"stred",pid:40,cid:72952,path:BEM.blocks["i-global"].param("project").replace("/",".")}),void window.location.assign(t.captcha["captcha-page"]);delete this._cachedArgs,this.unbindEvents(),this._updateAssets(t),this._updateMetadata(t),this._callback("success",t)},_onError:function(t,e){var i=this._cachedArgs&&t&&(0===t.readyState||0===t.status);if(!i||(window.Ya.Rum.logError&&"sbs.s3.yandex.net"!==window.location.host&&window.Ya.Rum.logError({message:"i-request_type_bem: can't send request",block:"i-request_type_bem",additional:{url:this._prepareRequestUrl(),message:this._getErrorMessage(t,e),requestArgs:this._cachedArgs,status:t.status,readyState:t.readyState}}),this.params.errorOnInternet)){delete this._cachedArgs,this.unbindEvents();var n={"-url":encodeURIComponent(this._prepareRequestUrl())};t&&t.status&&(n["-status"]=t.status),t&&t.statusText&&(n["-statusText"]=t.statusText),i||this._sendAjaxResultCounter({type:"error",vars:n}),this._callback("error",t)}},_getErrorMessage:function(t,e){return 0===t.status?"Ajax request unsent (E.g. no internet connection).":404===t.status?"Requested page not found. [404]":500===t.status?"Internal Server Error [500].":"parsererror"===e?"Requested JSON parse failed.":"timeout"===e?"Time out error.":"abort"===e?"Ajax request aborted.":"Uncaught Error.\n"+t.responseText},_updateAssets:function(t){if("object"!=typeof t||null===t)return this;var e=this._getNodesFragment(t);e&&this._appendNodesFromFragment(e),delete t.assets},_getNodesFragment:function(t){var e=t.assets&&t.assets.assets;if(e&&e.length){var i=document.createDocumentFragment();return e.forEach(function(e){var n;n="style"===e.type&&e.url?this._createStyleLinkNode(e):this._createNode(t,e),i.appendChild(n)},this),i}},_appendNodesFromFragment:function(t){return document.head.appendChild(t),this},_createNode:function(t,e){var i=e.type,n=document.createElement(i),s=BEM.blocks["i-global"].param("nonce");return e.content&&(n.textContent=e.content),s&&n.setAttribute("nonce",s),e.url&&(n.src=e.url,n.async="async","script"!==i||window.Ya.disableCrossOrigin||(n.crossOrigin=""),Ya.Rum.sendResTiming(2778,n.src)),"script"===i&&e.bundleName&&this._setBundleWaitEvents(t,n,e.bundleName),e.attrs&&Object.keys(e.attrs).forEach(function(t){n.setAttribute(t,e.attrs[t])}),n},_setBundleWaitEvents:function(t,e,i){this.__self._waitJSBundles[i]=1,e.addEventListener("load",function(){delete this.__self._waitJSBundles[i],this._callBlockWithSuccessCB(t)}.bind(this)),e.addEventListener("error",function(){window.Ya.counter.hitDelayed({dtype:"iweb",reqid:BEM.blocks["i-global"].param("reqid"),path:"/"+BEM.blocks["i-global"].param("project")+"/bundles/load-error",vars:window.Ya.counter.stringifyParams({17:i},",")})})},_createStyleLinkNode:function(t){var e=document.createElement("link");return e.rel="stylesheet",e.href=t.url,e},_updateMetadata:function(t){if(t&&t.metadata){var e=t.metadata;BEM.blocks["i-global"].setParams({bundlesMetadata:e.bundles||e.bundlesMetadata,assetsMetadata:e.assets||e.assetsMetadata}),BEM.blocks["extra-content"]&&BEM.blocks["extra-content"].getInstance().setMetadata(e.extraContent)}},_callback:function(t,e){this.trigger("beforeCallback"),"success"!==t?this._blocksCallback(t,e):this._callBlockWithSuccessCB(e)},_callBlockWithSuccessCB:function(t){if(t&&!t.error){var e={};this.blocks.forEach(function(i,n){if(!this.blocks[n].called){var s=this._getBlockName(i.decl),o=t.blocks?t.blocks[n]:t[i.decl];this._isBlockWaitBundle(o)||(i.success.call(i.ctx,o,i.decl),this.blocks[n].called=!0,this._setSuccessData(e,t,{decl:i.decl,blockName:s,index:n}))}}.bind(this)),this.__self._requestCallbackEnabled(this.blocks)&&this.params.success.call(this.params.ctx,e)}else this.params.fixAPI?this._callback("error",void 0):this._callback("error",t)},_isBlockWaitBundle:function(t){if(!t||!t.params)return!1;var e,i,n=Array.isArray(t.params.bundles)&&t.params.bundles.length;if(n)for(i=0;i<n;i++)if(e=t.params.bundles[i],this.__self._waitJSBundles[e])return!0;return!1},_blocksCallback:function(t,e){this.blocks.forEach(function(i){i[t].call(i.ctx,e,i.decl)}),this.params[t].call(this.params.ctx,e)},_setSuccessData:function(t,e,i){var n=i.blockName,s=i.index;"string"==typeof i.decl?t[n]=e.blocks[s]:(Array.isArray(t[n])||(t[n]=[]),t[n].push(e.blocks[s]))},_getBlockName:function(t){return"string"==typeof t?t:t.block},_getRequestString:function(){var t={blocks:this.blocks.map(function(t){return{block:t.decl,params:t.params,version:2}})},e=BEM.blocks["i-global"];t.metadata={bundles:e.param("bundlesMetadata"),assets:e.param("assetsMetadata")};var i=BEM.blocks["extra-content"]&&BEM.blocks["extra-content"].getInstance();return i&&(t.metadata.extraContent=i.getMetadata()),JSON.stringify(t)},_getArgs:function(){var t={format:"json",request:this._getRequestString()};return"jsonp"!==this.params.dataType&&"json"!==this.params.dataType||(t.yu=BEM.blocks["i-global"].param("yandexuid")),t},_onChangeNetworkStatus:function(t){if(this._cachedArgs&&t){var e=this._cachedArgs;delete this._cachedArgs,this._get(e)}},_sendAjaxResultCounter:function(t){var e={dtype:"stred",reqid:BEM.blocks["i-global"].param("reqid"),path:BEM.blocks["i-global"].param("project").replace("/",".")+".ajax."+t.type};t.vars&&(e.vars=window.Ya.counter.stringifyParams(t.vars,",")),window.Ya.counter.hit(e),"error"===t.type&&window.Ya.Rum.logError&&window.Ya.Rum.logError({message:"i-request_type_bem: request error",block:"i-request_type_bem",additional:t.vars})},getDefaultParams:function(){return{url:"/",dataType:"json",jsonp:!1,passedParams:["exp_flags","conditional_patch","tpid","testRunId","promo","_yasc","spravka","dark_theme","mstatid"],ctx:this}}},{_waitJSBundles:{},isWaitBundles:function(){return Boolean(Object.keys(this._waitJSBundles).length)},_requestCallbackEnabled:function(t){return!this.isWaitBundles()||t.every(function(t){return Boolean(t.called)})}}),BEM.decl({block:"i-request_type_bem"},{_getArgs:function(){var t=this.__base.apply(this,arguments),e=BEM.blocks["i-global"],i=e.param("isYandexAppIos")&&!e.getFlag("images_searchapp_enable_cookie_yu");if(e.getFlag("images_disable_cookie_yu")||i)return t;var n={};return"jsonp"!==this.params.dataType&&"json"!==this.params.dataType||(n.yu=$.cookie("yandexuid")),$.extend(t,n)}}),BEM.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:{inited:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}}},_get:function(t,e,i,n){this._number++,this._requestNumber++,this._retryCount=n.retryCount,this.__base.apply(this,arguments)},_do:function(t,e,i,n){var s=this;if(s._number>s._preventNumber){var o=arguments,r={data:n.data?$.extend({},n.data,t):t},a=s._wrapCallback(function(i,o,r){s._onSuccess(s._buildCacheKey(t,n),t,i[0],n),s._allowCallback(o,r)&&e.apply(n.callbackCtx,i)}),c=s._wrapCallback(function(t,e,r){s._allowCallback(e,r)&&(s._retryCount-- >0?setTimeout(function(){s._do.apply(s,o)},n.retryInterval):i&&i.apply(n.callbackCtx,t))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback","xhrFields","cache"].concat(n.paramsToSettings||[]),function(t,e){r[e]=n[e]}),$.ajax(r).done(a).fail(c)}},_wrapCallback:function(t){var e=this._requestNumber,i=this._number;return function(n){null!==n&&t(arguments,e,i)}},_allowCallback:function(t,e){return e>this._preventNumber&&this._requestNumber===t},_buildCacheKey:function(t,e){return"string"==typeof t?t:this.__base(t)+e.url},abort:function(){this._preventNumber=++this._number},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}}),BEM.decl("i-request_type_ajax",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.cacheIrrelevantParams=["yu","uinfo","viewport","rpt","_","pos"]}}},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{timeout:3e5})},_get:function(t,e,i,n){var s=BEM.blocks["i-global"].param("version");if(s&&(n.data=n.data||{},n.data.tmpl_version=s),this.params.timeout){var o,r=this._buildCacheKey(t,n),a=this.__self._cache[n.cacheGroup];n.cache&&a&&r in a.data&&(o=a.timestamps[r],(new Date).getTime()-o>this.params.timeout&&(delete a.timestamps[r],delete a.data[r],a.keys.splice(a.keys.indexOf(r),1))),"jsonp"===n.dataType&&window.Ya.Rum.logError&&window.Ya.Rum.logError({message:"i-request_type_ajax: don't use jsonp",block:"i-request_type_ajax",additional:{url:n.url}})}this.__base.apply(this,arguments)},_buildCacheKey:function(t,e){if("string"==typeof t)return t;for(var i=$.extend(!0,{},t),n=this.cacheIrrelevantParams,s=0,o=n.length;s<o;s++)n[s]in i&&delete i[n[s]];return void 0===i.p&&(i.p=1),$.param(i)+e.url},putToCache:function(t,e){var i=this._buildCacheKey(e,t),n=this.__self._cache,s=n[t.cacheGroup]||(n[t.cacheGroup]={keys:[],data:{},timestamps:{}});this.__base.apply(this,arguments),s.keys.length>=t.cacheSize&&delete s.timestamps[s.keys[0]],s.timestamps[i]=(new Date).getTime()}}),BEM.DOM.decl("b-page",{findBlocks:function(){return this.__base.apply(this,arguments),this._scroller=this.hasMod("use-scroller")?this.elem("scroller"):$("html,body"),this},_onUserScroll:function(){this._scroller.stop(),this.stopScrollTracking()},startScrollTracking:function(){this.isScrolling=!0,this.bindToWin("DOMMouseScroll mousewheel",$.throttle(this._onUserScroll.bind(this),100))},stopScrollTracking:function(){this.isScrolling=!1,this.unbindFromWin("DOMMouseScroll mousewheel",$.throttle(this._onUserScroll.bind(this),100))},getElementOffsetTop:function(t,e){return t.offset().top-this._headerHeight-e-20},scrollTo:function(t,e,i,n){i||(i=0);var s=t instanceof jQuery?this.getElementOffsetTop(t,i):t;return e?this.isScrolling||(this.startScrollTracking(),this._scroller.animate({scrollTop:s},e,function(){this.stopScrollTracking(),n&&n.resolve()}.bind(this))):(window.scrollTo(0,s),n&&n.resolve()),this},enableScroll:function(){this.delMod("scroll-disabled"),this.loadScroll()},disableScroll:function(){this.saveScroll(),this.setMod("scroll-disabled","yes")},loadScroll:function(){this._savedScroll&&window.scrollTo(this._savedScroll.x,this._savedScroll.y)},saveScroll:function(){this._savedScroll={x:window.scrollX,y:window.scrollY}}}),BEM.DOM.decl("b-page",{saveScroll:function(t,e){2===arguments.length?this._savedScroll={x:t,y:e}:this.__base.apply(this,arguments)}}),BEM.DOM.decl("b-page",{bindEvents:function(){return this.__base.apply(this,arguments),this._location.on("b-page_type_index",this._onPageIndex,this),this},_onPageIndex:function(t,e){this.checkCacheKey()&&this.loadIndex(e)},loadIndex:function(t){return this.load({type:"index",url:BEM.blocks["i-global"].param("router").index,params:t.params}),this}}),BEM.DOM.decl("b-page",{_onPageIndex:function(){this.__self.preventFocus=!0,this.__base.apply(this,arguments),this.afterCurrentEvent(function(){this.__self.preventFocus=!1})}}),BEM.DOM.decl("b-page",{bindEvents:function(){return this.__base.apply(this,arguments),this._location.on("b-page_type_search",this._onPageSearch,this),this},_onPageSearch:$.noop,loadSearch:function(t){return this.load({type:"search",url:t.path||BEM.blocks["i-global"].param("router").search,params:t.params,blocks:this.getBlocks()}),this}}),BEM.DOM.decl("b-page",{_onPageSearch:function(t,e){this.checkCacheKey()&&this.loadSearch(e)},getBlocks:function(){return[{name:"misspell:ajax",callback:function(t){t.params&&t.params.text&&Ya.reactBus.emit("HeaderDesktop:updateContext",{query:t.params.text}),this.trigger("search:input:update",t)}}]}}),BEM.DOM.decl("b-page",{getBlocks:function(){var t=this.__base.apply(this,arguments);return t.push({name:"preview__isWallpaper",callback:function(t){this.trigger("preview:update",t.params.isWallpaper)}}),t},_onPageSearch:function(){this.__base.apply(this,arguments),this.cbirIntent=this.findBlockInside("cbir-intent"),this.cbirIntent&&this.cbirIntent.hide({clear:!0})}}),BEM.DOM.decl("more",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.blocks["serp-controller"].on("listOut",this._onListOut,this)}},loading:{yes:function(){this.hideButton(),this.blockInside("spin2").setMod("progress","yes")},"":function(){this.blockInside("spin2").delMod("progress")}},disabled:{yes:function(){this.hideButton()}}},destruct:function(){BEM.blocks["serp-controller"].un("listOut",this._onListOut,this),this.__base.apply(this,arguments)},_onListOut:function(t,e){var i=this.hasMod("direction","next");"left"!==e&&"up"!==e||i||this.trigger("click"),"right"!==e&&"down"!==e||!i||this.trigger("click")},_onClick:function(t){t.preventDefault(),this.trigger("click"),this.setMod("loading","yes")},startProgress:function(){return this.setMod("loading","yes"),this},stopProgress:function(){return this.delMod("loading"),this},show:function(){return this.delMod("hidden")},hide:function(){return this.setMod("hidden","yes")},showButton:function(){var t=this.blockInside("spin2");return t.hasMod("progress")&&t.delMod("progress"),this.delMod(this.elem("button"),"hidden"),this},hideButton:function(){return this.setMod(this.elem("button"),"hidden","yes"),this},url:function(t){return void 0!==t?(this.elem("button").attr("href",t),this.params.url=t,this):this.elem("button").attr("href")}},{live:function(){this.liveBindTo("button","pointerclick",function(t){this._onClick(t)})}}),BEM.DOM.decl("more",{},{live:function(){return this.__base.apply(this,arguments),!1}}),BEM.DOM.decl({block:"more",modName:"direction",modVal:"next"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.blocks["i-keyrouter"].on("special:right pagedown space",this._onLoadNextPage,this)}}},destruct:function(){BEM.blocks["i-keyrouter"].un("special:right, pagedown space",this._onLoadNextPage,this),this.__base.apply(this,arguments)},_onLoadNextPage:function(){this._isEndOfPage()&&this.trigger("click")},_isEndOfPage:function(){return window.pageYOffset+window.innerHeight>=this.__self.doc.height()}}),function(t){t.dom={getActiveElement:function(){return t(document.activeElement)}},t.fn.isFocused=function(){return this.is(t.dom.getActiveElement())}}(jQuery),BEM.DOM.decl({block:"button2",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}},pressed:{yes:function(){if(this.hasMod("disabled"))return!1;this.trigger("press")},"":function(){this.trigger("release")}},checked:{yes:function(){this.trigger("check").domElem.attr("aria-pressed","true")},"":function(){this.trigger("uncheck").domElem.attr("aria-pressed","false")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("pressed")}},focused:{"":function(){this.__base.apply(this,arguments),this.delMod("pressed")}},progress:{yes:function(){this.setMod("disabled","yes")},"":function(){this.delMod("disabled")}}},getText:function(){return this.elem("text").text()},setText:function(t){return this.elem("text").text(t),this},_onClick:function(t){(!this._preventClick||t.detail>0)&&this.trigger("click",this._buildClickEventData(t)),this._preventClick=!1},_processClick:function(t){this.trigger("click",this._buildClickEventData(t))},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onKeydown:function(t){var e=t.keyCode,i=BEM.blocks.keycodes;i.is(e,this.params.pressKeys)&&(this.setMod("pressed","yes"),i.is(e,this.params.prvntKeys)&&t.preventDefault())},_onKeyup:function(t){var e=t.keyCode,i=BEM.blocks.keycodes;i.is(e,this.params.prvntKeys)&&t.preventDefault(),i.is(e,this.params.pressKeys)&&(this.delMod("pressed"),i.is(e,this.params.clickKeys)&&(this._preventClick=!0,this._processClick(t)))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["SPACE","ENTER"],prvntKeys:[],clickKeys:[]})}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("keydown",function(t){this._onKeydown(t)}).liveBindTo("keyup",function(t){this._onKeyup(t)}),this.__base()}}),BEM.DOM.decl("button2",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(){this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")},_onClick:function(){this.__base.apply(this,arguments),this._isDestructing||this.setMod("focused","yes")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}).liveBindTo("mousedown",function(t){t.preventDefault()}),this.__base()}}),BEM.DOM.decl("button2",{getIconWidth:function(){var t=this.elem("icon");if(t.length)return t.width()}}),BEM.decl("keycodes",{},{BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,is:function(t,e){return(Array.isArray(e)?e:Array.prototype.slice.call(arguments,1)).some(function(e){return this[e]===t},this)}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._url=this.params._url||this.domElem.attr("href")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex",this.params._tabindex).attr("href",this._url)},yes:function(){this.__base.apply(this,arguments),void 0!==this._url&&this.domElem.attr("tabindex",-1),this.domElem.removeAttr("href")}}},getUrl:function(){return this._url},setUrl:function(t){return this._url=t,this.hasMod("disabled")||this.domElem.attr("href",t),this},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["ENTER"]})}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{},{live:function(){return this.liveBindTo("dragend",function(t){this.hasMod("type","link")&&!this.hasMod("disabled")&&this.delMod("pressed")}),this.__base()}}),BEM.DOM.decl("serp-controller",{_viewParams:[],onSetMod:{js:{inited:function(){this.__self.instance=this,this.findBlocks()._setPageMod(),this.bindEvents(),this.syncState()}},infinite:{"":function(){this.disableInfiniteLoad()}}},destruct:function(){this.__self.instance=null,this.unbindEvents(),this.__base.apply(this,arguments)},findBlocks:function(){return this.page=this.findBlockOutside("b-page"),this.location=BEM.blocks.location.getInstance(),this},bindEvents:function(){return BEM.blocks.more.on("click",this._onMoreClick,this),this._isClickAnimated()||(BEM.blocks["serp-item"].on(this.domElem,"clicked",this._onItemClicked,this),BEM.blocks["serp-item"].on(this.domElem,"selected",this._onItemSelected,this)),this},unbindEvents:function(){return BEM.blocks.more.un("click",this._onMoreClick,this),this._isClickAnimated()||(BEM.blocks["serp-item"].un(this.domElem,"clicked",this._onItemClicked,this),BEM.blocks["serp-item"].un(this.domElem,"selected",this._onItemSelected,this)),this},_isClickAnimated:function(){return this.hasMod("animated")},_onPageTypeChanged:function(){this._setPageMod().syncState(),window.Ya.counter&&Ya.Rum.setSetting("reqid",window.Ya.counter.getReqId()),this.__base.apply(this,arguments)},_setPageMod:function(){return this.setMod("page",this.page.getMod("type")),this},_onMoreClick:function(t){var e=t.block.getMod("direction");this.hasMod("loading","yes")||(this.load(e),"prev"===e&&this.location.change({url:t.block.params.url,history:!1,trigger:!1}))},syncState:function(){this.loadInitialItem(),this._competitors=this.findBlockInside("competitors")},showFooter:function(){var t=this.page.blockInside("footer");return t&&t.show(),this.toggleCompetitors(),this},toggleCompetitors:function(){return BEM.blocks["i-global"].param("isPumpkin")?this:(this._competitors&&this._competitors.domElem&&this._competitors.setMod("visibility",BEM.blocks["i-global"].param("query")?"":"hidden"),this)},hideFooter:function(t){var e=this.page.blockInside("footer");return e&&(t?e.transparent():e.hide()),this._competitors&&this._competitors.domElem&&this._competitors.setMod("visibility",t?"transparent":"hidden"),this},findMore:function(t){var e="_more"+t,i=this[e];return i&&i.domElem||(this[e]=this.findBlockInside({block:"more",modName:"direction",modVal:t})),this[e]},checkListOut:function(t){var e=t.params.pos,i=this.changeThis(this.getStraightItem||this.getNearItem)(t,1),n=Boolean(this.getItemByPos(Number(e)+5).length);return i&&n||this.trigger("listOut","right"),this},addReqId:function(t){return t&&(t.params.reqid=window.Ya.counter.getReqId(t.domElem)||!1),this},_getInfiniteSerpListParams:function(){return{}}},{getInstance:function(){if(!this.instance){var t=$(this.buildSelector());this.instance=t.length?t.bem(this.getName()):null}return this.instance},live:function(){return this.liveInitOnBlockOutsideEvent("change","b-page",function(t,e){this._onPageTypeChanged(e.type)}),!1}}),BEM.DOM.decl("serp-controller",{onSetMod:{loading:{yes:function(){this.trigger("loading")}}},_getSerpList:function(){return this._serpList||(this._serpList=this.findBlockInside("serp-list"))},resetSerpList:function(){this._serpList=void 0},isCurrentPageLast:function(){var t=this._getSerpList();return!t||t.isCurrentPageLast()},getInitialPageNum:function(){var t=this._getSerpList();return t?t.getInitialPageNum():0},getDocsPerPage:function(){return this.params.docsPerPage},_getInfiniteSerpListParams:function(){return{initialPageNum:this.getInitialPageNum()}},getScrollPagesCount:function(){return this.params.count}}),BEM.DOM.decl("serp-controller",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.params.cacheMore&&this.setMod("cached-more","yes"),this._setPageMod()}},loading:{yes:function(){this.trigger("loading")}}},_setPageMod:function(){var t="similar"===this.page.getMod("type"),e=this._viewParams.indexOf("rpt");return t?(e>-1&&this._viewParams.splice(e,1),this.setMod("page","search")):(-1===e&&this._viewParams.push("rpt"),this.setMod("page",this.page.getMod("type")))},hideFooter:function(t){var e=this.__base.apply(this,arguments);return this.params.inRightColumn&&this.page.setMod("overscroll","no"),e},showFooter:function(){var t=this.__base.apply(this,arguments);return this.page.delMod("overscroll"),t}}),BEM.DOM.decl("serp-controller",{_req:{},destruct:function(){this._clearRequestStack(),this.__base.apply(this,arguments)},_clearRequestStack:function(){return BEM.blocks.utils.forOwn(this._req,function(t){t.abort()}),this._req={},this},syncState:function(){this._clearRequestStack(),this._resetLoading("prev"),this._resetLoading("next"),this.__base.apply(this,arguments)},getRequest:function(t,e){var i={url:BEM.blocks.uri.getPath(t),ctx:this,cache:!0};return Object.assign(i,e),BEM.create("i-request_type_bem",i)},load:function(t,e){this._loadPage(t,e)&&(this._onListLoading(t),this._setLoading(t))},_setLoading:function(t){this.setMod("loading","yes");var e=this.findMore(t);return e&&e.startProgress(),this},_resetLoading:function(t){this.delMod("loading");var e=this.findMore(t);return e&&e.stopProgress(),this},_loadPage:function(t,e){var i=this.params[t+"PageUrl"],n=BEM.blocks.uri.parseParams(i);return!!i&&(e=Object.assign(e||{},{direction:t}),Object.assign(n,this.__self.getUrlRequestParams(n,e)),this._sendRequest(n,e),!0)},_sendRequest:function(t,e){var i=this.getRequest(this.params[e.direction+"PageUrl"],e);this._req[t.p]=i,this.setRequestBlocks(i,e),i.get(t,this._onAjaxSuccess)},_onAjaxSuccess:$.noop,setRequestBlocks:function(t,e){var i=e.direction;return t.block("serp-controller",function(t){this._onSerpControllerLoaded(t,i)}.bind(this)).block("serp-list_infinite_yes",function(t){this._onListLoadSuccess(t,i)}.bind(this),function(){this._onListLoadError(i)}.bind(this),this._getInfiniteSerpListParams()).block("more_direction_"+i,this._onMoreDataLoaded),this},_onSerpControllerLoaded:function(t,e){this.params[e+"PageUrl"]=t.params[e+"PageUrl"]},_onPageContentUpdating:$.noop,_onPageContentUpdated:function(){var t=this.findMore("next");t&&t.params.visible||this.afterCurrentEvent(this.showFooter)},_onListLoading:$.noop,_onListLoadSuccess:$.noop,_onListLoadError:$.noop,_onMoreDataLoaded:function(t){var e=t.params.direction,i=t.params.visible,n=this.findMore(e);n&&(this._resetLoading(e),n.url(t.params.url).setMod("disabled",i?"":"yes").setMod("hidden",i?"":"yes"),this["_onMoreDataLoaded"+e](t,n))},_onMoreDataLoadednext:function(t,e){var i=t.params.visible,n=this.getListCount()%this.params.count==0;e.setMod("last",n?"yes":"no"),this.hideFooter(),this.isMoreButtonShouldShown(i)&&(this.trigger("infiniteLoadStop"),e.showButton(),this.showFooter()),i||this.showFooter()},isMoreButtonShouldShown:function(t){return t&&this.getListCount()%this.params.count==0},_onMoreDataLoadedprev:function(t,e){t.params.visible&&e.showButton()}},{live:function(){var t=this.__base.apply(this,arguments);return this.liveInitOnBlockOutsideEvent("contentUpdating","b-page",function(){this._onPageContentUpdating()}).liveInitOnBlockOutsideEvent("contentUpdated","b-page",function(){this._onPageContentUpdated()}),t},getUrlRequestParams:function(){var t={serpid:BEM.blocks["i-global"].param("serpid")},e=BEM.blocks.location.getInstance();return["rdpass","tpid","testRunId","promo","_yasc","spravka","dark_theme","mstatid"].forEach(function(i){e.hasParam(i)&&(t[i]=e.getParamValue(i))}),t}}),BEM.DOM.decl("serp-controller",{_updateListData:function(t,e){var i=this._getSerpList();i&&i.addSerpItems(t,e)},_onListLoading:function(t){this.__base.apply(this,arguments),this._setLoading(t),this.trigger("loading")},_onPageContentUpdated:function(){this.__base.apply(this,arguments),this.resetSerpList()},_onListLoadSuccess:function(t,e){this.__base.apply(this,arguments),this._resetLoading(e),this._updateListData(t,e),this.trigger("loaded",{params:t.params,direction:e})},_onListLoadError:function(t){this.__base.apply(this,arguments),this._resetLoading(t),this.trigger("loadError")}},{getUrlRequestParams:function(){var t=this.__base.apply(this,arguments);return document.querySelector(".MastHead .DirectInline-PCodeContainer:not(:empty)")&&(t.haveMasthead=1),BEM.blocks["i-global"].param("verticalSerp")?t.serpListType="vertical":t.serpListType="horizontal",Object.assign(t,{uinfo:BEM.blocks["i-userinfo"].get().getUserInfo()})}}),BEM.DOM.decl("serp-controller",{setRequestBlocks:function(t){return this.__base.apply(this,arguments),t.block("gallery__items:ajax",this._onGalleryLoaded),this},_onGalleryLoaded:function(t){window.inNextFrame(function(){this.trigger("galleryLoaded",t)},this)}}),BEM.DOM.decl("serp-controller",{deviation:5,itemSelector:".serp-item",_getItemSelector:function(){return this.itemSelector},getBlockByDirection:function(t){var e,i=this.getCurrentItem(),n=i&&i.params.pos;if(i)return n>=0&&"left"===t?e=this.getNearItem(i,-1):"right"===t&&(e=this.getNearItem(i,1)),e&&e.length?e.bem("serp-item"):void 0},getNearItem:function(t,e){return this.getNearItemBySibling(t,e)||this.getNearItemByIdx(t,e)||this.getNearItemByPos(t,e)},getNearItemBySibling:function(t,e){var i=this._getItemSelector(),n=t.domElem[e>0?"next":"prev"](i);return n.length&&n},getNearItemByPos:function(t,e){for(var i=[],n=t.params.pos,s=n;0===i.length&&Math.abs(n-s)<this.deviation;)s+=e,i=this.getItemByPos(s);return i.length&&i},getNearItemByIdx:function(t,e){var i=this._getItemSelector(),n=t.domElem.index(i)+e,s=n>=0?$(i).eq(n):$([]);return s.length&&s},getStraightItem:function(t,e){var i,n,s,o,r,a,c,l,u,h=t.domElem,d=h.offset(),p=0,f=0;for(BEM.blocks.utils.isEmpty(h)||BEM.blocks["scroll-spy"].getElemVisibility(h).visible||((a=this.getVisibleNearItem(h,-1))&&(h=a),d=h.offset()),n=Math.floor(d.left+h.width()/2),s=d.top,r=(o=this.getVisibleNearItem(h,e))&&o.offset();o&&p<=30&&(p++,!(r.top!==s&&(s=r.top,++f>2)));){if(c=n-r.left,l=r.left+o.width()-n,u=Math.min(Math.abs(c),Math.abs(l)),c>=0&&l>=0||u<7){i=o;break}r=(o=this.getVisibleNearItem(o,e))&&o.offset()}return i},getVisibleNearItem:function(t,e){for(var i=this.getNearItem(t.bem("serp-item"),e);i&&i.hasClass("serp-item_extra_yes");)i=this.getNearItem(i.bem("serp-item"),e);return i},getItemByPos:function(t){return $(".serp-item_pos_"+t+":eq(0)")},getItemParamsByPos:function(t){var e=this.getItemByPos(t);return e.length?e.bem("serp-item").params:null},getItemById:function(t,e){var i=$(e?e+" #"+t:"#"+t);return i.length?i.bem("serp-item"):void 0},selectItem:function(t){return t.setMod("selected","yes"),this},getSelectedItemId:function(){return(this.params.item||{}).selected},getSelectedItem:function(){var t=this.getSelectedItemId();return t&&this.getItemById(t)},getCurrentItem:function(){return BEM.blocks["serp-item"].getCurrent()},getPrevItem:function(){return BEM.blocks["serp-item"].getPrev()},selectCurrentItem:function(){var t=this.getCurrentItem();return t&&this.selectItem(t),this},unselectCurrentItem:function(){return BEM.blocks["serp-item"].delSelected(),this}}),BEM.DOM.decl("serp-controller",{_cachedSerpItemsParams:{},getNearItem:function(t,e){return BEM.blocks["i-global"].param("verticalSerp")?this.getNearItemByPos(t,e):this.__base.apply(this,arguments)},findItemByImageUrl:function(t){if(this._cachedSerpItemsParams[t])return this._cachedSerpItemsParams[t];var e=this,i=document.querySelectorAll(".serp-item");return[].forEach.call(i,function(t){var i=BEM.blocks["serp-item"].getItemParams(t);e._cachedSerpItemsParams[i.img_url]||(e._cachedSerpItemsParams[i.img_url]=i)}),this._cachedSerpItemsParams[t]?this._cachedSerpItemsParams[t]:null}}),BEM.DOM.decl("serp-controller",{getDefaultParams:function(){var t=this.__base.apply(this,arguments);return t.blinkTime=1e3,t},loadInitialItem:function(){},blinkCurrentItem:function(){var t=this.getCurrentItem();return t&&(t.setMod("blink","yes"),setTimeout(function(){t&&t.domElem&&t.delMod("blink")},this.params.blinkTime)),this}}),BEM.DOM.decl("serp-controller",{onSetMod:{js:{inited:function(){this._cleanRejectedParams(),this.__base.apply(this,arguments)}}},getDefaultParams:function(){var t=this.__base.apply(this,arguments)||{};return t.rejectedParams=["parent-reqid","uinfo","photo-upload","ysclid","suggest_reqid",""],t},_cleanRejectedParams:function(){var t=this._getRejectedParams();t&&t.length&&BEM.blocks.location.getInstance().change({url:BEM.blocks.uri.delParams(location.href,t),trigger:!1,history:!1})},_getRejectedParams:function(){var t=BEM.blocks.uri.parseParams();return this.params.rejectedParams.filter(function(e){return Boolean(t[e])})},_onPageContentUpdating:function(){this._cleanRejectedParams(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"serp-controller",modName:"infinite",modVal:"yes"},{offset:{default:700,serp:700,view:2e3},syncState:function(){return this.__base.apply(this,arguments),this.updateInfiniteLoadState(!0),this},unbindEvents:function(){return this.__base.apply(this,arguments),this.disableInfiniteLoad(),this},enableInfiniteLoad:function(){var t=this.findMore("next");t&&t.setMod("disabled","yes"),BEM.blocks["b-page"].on("scroll resize",this.tryLoad,this)},disableInfiniteLoad:function(){var t=this.findMore("next");t&&t.delMod("disabled"),BEM.blocks["b-page"].un("scroll resize",this.tryLoad,this)},updateInfiniteLoadState:function(){var t=this.needMore();BEM.channel("infinite-load").trigger("infinite-load-state",t),t?(new window.rafQueue).add(this.enableInfiniteLoad,this).add(this.tryLoad,this).run():(new window.rafQueue).add(this.disableInfiniteLoad,this).add(this.toggleCompetitors,this).run()},getListCount:function(){return this.findElem("list").length},_onMoreDataLoaded:function(t){this.__base.apply(this,arguments),"next"===t.params.direction&&this.updateInfiniteLoadState()},tryLoad:function(t){(new window.rafQueue).add(function(){!this.hasMod("loading","yes")&&this._isEndOfPage(t)&&(this.disableInfiniteLoad(),this.load("next"))}.bind(this)).run()},_isEndOfPage:function(){var t,e=window.pageYOffset+window.innerHeight,i=this.findMore("next");return!(!i||i.domElem.is(":hidden"))&&(t=i.domElem.offset().top,e+this._getInfinityBottomSpace()>=t)},_getInfinityBottomSpace:function(){return this.offset.default},needMore:function(){return this.getListCount()%this.params.count!=0}}),BEM.DOM.decl({block:"serp-controller",modName:"infinite",modVal:"yes"},{getListCount:function(){var t=this._getSerpList();return t?t.getPagesCount():0},_isEndOfPage:function(){return!this.page.hasMod("fullscreen","yes")&&this.__base.apply(this,arguments)},needMore:function(){return!!this.page.hasMod("fullscreen","yes")||!this.hasMod("page","index")&&this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"serp-controller",modName:"page",modVal:"index"},{syncState:function(){return this.showFooter(),this.__base.apply(this,arguments)},_onItemClicked:function(t,e){this.location.change({block:"b-page_type_search",url:e.params.detail_url},t)}}),BEM.DOM.decl({block:"serp-controller",modName:"page",modVal:"search"},{syncState:function(){return this.__self._removedThumbs&&this.__self._removedThumbs.empty(),this.__self._removedGalleryThumbs&&this.__self._removedGalleryThumbs.empty(),this.__base.apply(this,arguments)},_onPageTypeChanged:function(){window.Ya.Images.ThumbsStore.clear(),this.__base.apply(this,arguments)},getLastPage:function(){return this._getSerpList().getLastPageNumber()}}),function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=Number(new Date),n=Math.max(0,16-(i-t)),s=setTimeout(function(){e(i+n)},n);return t=i+n,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),window.rafQueue=function(){var t=[];this.add=function(e,i){return Array.isArray(e)||(e=[e]),e.forEach(function(e){var n;"object"==typeof e&&e&&e.fn&&(n=(e=e.fn).ctx),t.push({fn:e,ctx:n||i})}),this},this.run=function(){var e,i=window.requestAnimationFrame,n=function(){0!==t.length&&((e=t.shift()).ctx?e.fn.call(e.ctx):e.fn(),i(n))};i(function(){i(n)})}},window.inNextFrame=function(t,e,i){window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){e?t.call(e,i):t(i)})})}}(),BEM.DOM.decl("scroll-spy",{onFirstBecameVisible:function(t,e){var i=this.params.visibilityConditions;this.__self.notifyBecameVisible(this.domElem,t,e,i)}},{SCROLL_EVENT:"scroll touchmove",SCROLL_SMOOTHING:50,live:!0,init:function(){void 0===this._watchedElements&&(this._win=BEM.DOM.win,this._watchedElements=[],this._onScrollSmooth=$.debounce(this._onScroll,this.SCROLL_SMOOTHING,this))},getElemVisibility:function(t){if(!t||!t.is(":visible"))return{visible:!1,x:0,y:0,area:0};var e=t[0].getBoundingClientRect();if(e.right<=0||e.left>=window.innerWidth||e.bottom<=0||e.top>=window.innerHeight)return{visible:!1,x:0,y:0,area:0};var i=e.width*e.height,n=this.getIntersection(e,{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0});return{visible:!0,x:e.width?n.xOverlap/e.width:0,y:e.height?n.yOverlap/e.height:0,area:i?n.overlapArea/i:0}},getIntersection:function(t,e){var i=Math.min(t.right,e.right)-Math.max(t.left,e.left),n=Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top);return i<0&&(i=0),n<0&&(n=0),{xOverlap:i,yOverlap:n,overlapArea:i*n}},watchVisibility:function(t,e,i){if(void 0===this._watchedElements&&this.init(),!t)throw new Error("Dom elem required");if(!e)throw new Error("Callback required");if(!t.length)throw new Error("Can't watch empty collection");var n=$.identify(t[0]);return this.isElemWatched(t,e)||(this._watchedElements.push({id:n,domElem:t,callback:e,ctx:i||null}),this._setupScrollListener()),this},stopWatchingVisibility:function(t,e,i){if(!t.length||void 0===this._watchedElements)return this;i=i||null;var n=$.identify(t[0]),s=e?function(t){return!(t.id===n&&t.callback===e&&t.ctx===i)}:function(t){return t.id!==n};return this._watchedElements=this._watchedElements.filter(s),this._setupScrollListener(),this},_setupScrollListener:function(){var t=this._watchedElements.length;1!==t||this._listeningScroll?0===t&&(this._win.off(this.SCROLL_EVENT,this._onScrollSmooth),this._listeningScroll=!1):(this._win.on(this.SCROLL_EVENT,this._onScrollSmooth),this._listeningScroll=!0)},_onScroll:function(){for(var t=0;t<this._watchedElements.length;t++){var e=this._watchedElements[t],i=this.getElemVisibility(e.domElem);setTimeout(e.callback.bind(e.ctx,i),0)}},isElemWatched:function(t,e,i){if(void 0===this._watchedElements&&this.init(),!t.length)return!1;var n=$.identify(t[0]);return i=i||null,this._watchedElements.some(function(t){return t.id===n&&t.callback===e&&t.ctx===i})},notifyBecameVisible:function(t,e,i,n){void 0===this._watchedElements&&this.init();var s=e.bind(i),o=this.getElemVisibility(t);if(this.checkVisibilityConditions(n,o))return setTimeout(s,0);this.watchVisibility(t,function e(i){this.checkVisibilityConditions(n,i)&&(setTimeout(s,0),this.stopWatchingVisibility(t,e,this))},this)},checkVisibilityConditions:function(t,e){void 0===this._watchedElements&&this.init();var i=e.visible;if(i)for(var n in t)if(t.hasOwnProperty(n)){var s=e[n]>=t[n];if(!(i=i&&s))break}return i}}),BEM.DOM.decl({block:"serp-controller",modName:"navigation",modVal:"yes"},{extraScroll:80,isInitialScrollDone:!1,findBlocks:function(){return this.navigation=this.findBlockOn("navigation-controller"),this.__base.apply(this,arguments)},bindEvents:function(){return this.params.item&&this.params.item.selected&&(this.bindToWin("load scroll",this.initialScroll),this.bindToWin("focus",this.initialScrollOnFocus),this.bindToWin("blur",this.unbindInitialScrollOnFocus)),this.__base.apply(this,arguments)},unbindInitialScrollOnFocus:function(){this.unbindFromWin("focus",this.initialScrollOnFocus),this.unbindFromWin("blur",this.unbindInitialScrollOnFocus)},initialScrollOnFocus:function(){this.initialScrollToSelected(),this.unbindFromWin("focus",this.initialScrollOnFocus),this.unbindFromWin("blur",this.unbindInitialScrollOnFocus),this.location.un("b-page_type_search",this.initialScrollOnFocus,this)},initialScroll:function(){this.isInitialScrollDone||this.initialScrollToSelected(),this.unbindFromWin("load scroll",this.initialScroll),this.location.un("b-page_type_search",this.initialScroll,this),this.isInitialScrollDone=!0},needScrollTo:function(t){return"function"==typeof this.isViewLayout&&this.isViewLayout()||t.offset().top>.7*this.__self.win.height()},initialScrollToSelected:function(){var t,e,i=this._getItemShouldScrollTo();i&&(t=i.domElem,e=this.needScrollTo(t)?t:this.__self.win.scrollTop(),this.page.scrollTo(e,950,this.extraScroll))},_getItemShouldScrollTo:function(){return this.getCurrentItem()}}),BEM.DOM.decl({block:"serp-controller",modName:"navigation",modVal:"yes"},{needMore:function(){return!!this.hasMod("page","search-by-image")||this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"serp-controller",modName:"navigation",modVal:"yes"},{extraScroll:150,initialScroll:function(){BEM.blocks.uri.getParamValue("source")&&(this.isInitialScrollDone=!0),this.__base.apply(this,arguments)}}),BEM.DOM.decl("serp-controller",{bindEvents:function(){this.__base.apply(this,arguments),BEM.blocks["b-page"].on("scroll",this._onScroll,this),this._enablePointerEventsDebounced=$.debounce(this._enablePointerEvents,300,this)},destruct:function(){BEM.blocks["b-page"].un("scroll",this._onScroll,this),this.__base.apply(this,arguments)},_needPointerEventsSwitching:function(){return!BEM.blocks["i-global"].param("mobile")&&BEM.blocks["i-ua"].isPointerEventsAvailable()},_onScroll:function(){this._needPointerEventsSwitching()&&(this.hasMod(this._getContent(),"pointer-events","none")||this._disablePointerEvents(),this._enablePointerEventsDebounced())},_disablePointerEvents:function(){this.setMod(this._getContent(),"pointer-events","none")},_enablePointerEvents:function(){this.delMod(this._getContent(),"pointer-events")},_getContent:function(){return this._content||(this._content=this.findElem("content"))},_onPageTypeChanged:function(){this.__base.apply(this,arguments),this._content=void 0}}),BEM.DOM.decl("navigation-controller",{onSetMod:{js:function(){this.__self.instance=this,this.serp=this.findBlockOn("serp-controller"),this.page=this.findBlockOutside("b-page"),this.bindEvents()}},bindEvents:function(){},goTo:function(t,e,i){var n=this.serp.getBlockByDirection(t);return n?(n.click(i||"keyboard",t),e&&this.hasMod("scrollable","yes")&&this.scroll(t),!0):(this.serp.trigger("listOut",t),!1)}},{get:function(){return this.instance}}),BEM.DOM.decl("navigation-controller",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.ROW_HEIGHT=190}}},scroll:function(t){return"left"===t||"up"===t?this.tryScrollTop():"right"!==t&&"down"!==t||this.tryScrollBottom(),this},tryScrollBottom:function(){var t=this.__self.win,e=t.height(),i=t.scrollTop()+e,n=this._getOffset();if(null!==n){var s=n+this.ROW_HEIGHT,o=i-s;(o<this.ROW_HEIGHT||o>e)&&this.page.scrollTo(s+this.ROW_HEIGHT-e,200)}},tryScrollTop:function(){var t=this.__self.win,e=this._getOffset();if(null!==e){var i=this.page._headerHeight+9,n=e-t.scrollTop();(n<this.ROW_HEIGHT||n>t.height())&&this.page.scrollTo(e-this.ROW_HEIGHT-i,200)}},_getOffset:function(){var t=BEM.blocks["serp-item"].getCurrent();return t&&t.domElem?t.domElem.offset().top:null}}),BEM.DOM.decl({block:"serp-controller",modName:"prefetch",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),"search"===BEM.blocks["i-global"].param("page")&&this._loadPage("next",{cacheRequest:!0})}}},_clearRequestStack:function(){return BEM.blocks.utils.forOwn(this._req,function(t){t.reject()}),this._req={},this},setRequestBlocks:function(t,e){return e.cacheRequest?(t.block("serp-controller",$.noop).block("serp-list_infinite_yes",$.noop,$.noop,this._getInfiniteSerpListParams()).block("more_direction_"+e.direction,$.noop).block("gallery__items:ajax",$.noop),this):this.__base.apply(this,arguments)},_loadPage:function(t,e){var i=this.params[t+"PageUrl"],n=BEM.blocks.uri.parseParams(i),s=n.p;if(!i)return!1;if(e=Object.assign(e||{},{direction:t}),Object.assign(n,this.__self.getUrlRequestParams(n,e)),this._req[s]&&e&&e.cacheRequest)return!0;if(this._req[s]){var o=this;return this._req[s].done(function(){return o._sendRequest(n,e)}),!0}return this._sendRequest(n,e),!0},_sendRequest:function(t,e){var i=$.Deferred(),n=this.getRequest(this.params[e.direction+"PageUrl"],e);this._req[t.p]=i,this.setRequestBlocks(n,e),n.get(t,this._onAjaxSuccess.bind(this,i))},_onAjaxSuccess:function(t){t.resolve&&t.resolve()}}),BEM.DOM.decl({block:"serp-controller",modName:"prefetch",modVal:"yes"},{_onSerpControllerLoaded:function(t,e){this.__base.apply(this,[t,e]),this._loadPage(e,{cacheRequest:!0})}}),BEM.DOM.decl({block:"serp-controller",modName:"vertical-shadowed",modVal:!0},{updateInfiniteLoadState:function(){this.__base.apply(this,arguments),window.Ya.Images.verticalSerpList&&(this.needMore()?this._getSerpList().hideShadow():this._getSerpList().showShadow())}}),BEM.DOM.decl({block:"serp-controller",modName:"grid-counter",modVal:!0},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.blocks["incut-controller"].on("completed",this._onIncutInsertionCompleted,this)}}},_isSearchPage:function(){return"search"===BEM.blocks["i-global"].param("page")},destruct:function(){BEM.blocks["incut-controller"].un("completed",this._onIncutInsertionCompleted,this),this.__base.apply(this,arguments)},_onIncutInsertionCompleted:function(t,e){"prev"!==e.dir&&this._isSearchPage()&&this._hitGridCounter()},_hitGridCounter:function(){var t=BEM.blocks["i-global"].param("verticalSerp");BEM.blocks["i-global"].getFlag("images_react_app_disable")&&window.Ya.counter.cpHitDelayed({path:"desktop"===window.Ya.Images.platform?"/image/new/serp/list/load":"/image/touch/serp/list/load",vars:"-layout="+(t?"vertical":"horizontal"),reqid:BEM.blocks["i-global"].param("reqid")})}}),BEM.DOM.decl("serp-controller",{bindEvents:function(){var t=this.__base.apply(this,arguments);return BEM.blocks["serp-item"].on("clicked",this._onSerpItemClicked,this),BEM.blocks["serp-list"].on("loaded",this._onSerpListLoaded,this),window.Ya.reactBus&&window.Ya.reactBus.on("images-viewer:mounted",this._onViewerMounted,this).on("images-viewer:beforeClosed",this._onViewerBeforeClosed,this).on("images-viewer:listOut",this._onViewerGalleryListOut,this),t},unbindEvents:function(){return BEM.blocks["serp-item"].un("clicked",this._onSerpItemClicked,this),BEM.blocks["serp-list"].un("loaded",this._onSerpListLoaded,this),window.Ya.reactBus&&window.Ya.reactBus.off("images-viewer:mounted",this._onViewerMounted).off("images-viewer:beforeClosed",this._onViewerBeforeClosed),this.__base.apply(this,arguments)},_checkListOut:function(){var t=BEM.blocks["serp-item"].getCurrent();if(t&&t.params){var e=Number(t.params.pos),i=0===this.getItemByPos(e-5).length,n=0===this.getItemByPos(e+5).length;(i||n)&&this.trigger("listOut",i?"left":"right")}},_onViewerBeforeClosed:function(){this.__base.apply(this,arguments),BEM.blocks["i-global"].setParams({currentItemIdx:-1}),this.unselectCurrentItem(),this.blinkCurrentItem()},_onViewerMounted:function(){var t=this;this._viewerMounted=!0,this._fillViewerStore(!0),setTimeout(function(){t._openSelectedItem()},0)},_getSelectedItem:function(){return this.findBlockInside({block:"serp-item",modName:"selected",modVal:"yes"})},_fillViewerStore:function(t){t&&this.resetSerpList();var e=this._getSerpList();if(e){var i=e.getImagesStore();BEM.blocks["i-global"].setParam("serpItems",i),window.Ya.reactBus&&window.Ya.reactBus.emit("images-viewer:fill",i,t)}},_onSerpListLoaded:function(t,e){this.__base.apply(this,arguments),this._viewerMounted&&this._fillViewerStore(e.reset)},_openSelectedItem:function(){var t=this._getSelectedItem();t&&t.params&&this._openViewerWithItem(t.params.pos,{initialLoading:!0})},_openViewerWithItem:function(t,e){e=e||{},window.Ya.reactBus&&window.Ya.reactBus.emit("images-viewer:open",{activeIdx:t,initialLoading:Boolean(e.initialLoading),historyLoading:Boolean(e.historyLoading)})},_openViewerRimImage:function(t){window.Ya.reactBus&&window.Ya.reactBus.emit("images-viewer:openRim",{rltData:t})},_onViewerGalleryListOut:function(){this.trigger("listOut","right")},_onSerpItemClicked:function(t,e){e&&e.params&&this._openViewerWithItem(e.params.pos)}}),BEM.DOM.decl("serp-controller",{SAVED_ITEMS_COUNT:20,LOCATION_SET_TIMEOUT:150,_viewParams:["img_url","rpt","pos"],_viewParamsSimilar:["img_url","pos"],_viewedItemsUrls:{},_viewedRimUrls:{},_visitedUrls:[],onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._location=BEM.blocks.location.getInstance()}}},bindEvents:function(){var t=this.__base.apply(this,arguments);return window.Ya&&window.Ya.reactBus&&(Ya.reactBus.on("images-viewer:selectItem",this._onViewerSelectItem,this),Ya.reactBus.on("images-viewer:rimClick",this._onRimClick,this)),BEM.blocks.location.on("b-page_type_search b-page_type_similar b-page_type_search-by-image b-page_type_cbir-landing",this._onLocationChanged,this),t},unbindEvents:function(){return window.Ya.reactBus&&(window.Ya.reactBus.off("images-viewer:selectItem",this._onViewerSelectItem),window.Ya.reactBus.off("images-viewer:rimClick",this._onRimClick)),BEM.blocks.location.un("b-page_type_search b-page_type_similar b-page_type_search-by-image b-page_type_cbir-landing",this._onLocationChanged,this),this.__base.apply(this,arguments)},_onPageTypeChanged:function(t){var e,i;if("search"===t&&((e=(i=BEM.blocks.uri.getParamValue("pos"))?this.getItemByPos(i):null)?(BEM.blocks["serp-item"].setCurrent(e),this._openViewerWithItem(Number(i),{historyLoading:!0})):window.scrollTo(0,0)),this.params.inRightColumn){var n=BEM.blocks.uri.getParamValue("img_url"),s=this._viewedItemsUrls[n];s||(s=this.findItemByImageUrl(n)),s&&this._openViewerWithItem(s.pos,{initialLoading:!0})}this.__base.apply(this,arguments)},_onPageContentUpdating:function(){this.__base.apply(this,arguments),Ya.reactBus.emit("react-adapter:unmount",this.findElem("images-viewer").get(0))},_onPageContentUpdated:function(){this.__base.apply(this,arguments),Ya.reactBus.emit("react-adapter:mount",this.findElem("images-viewer").get(0))},_onLocationChanged:function(t,e){var i=e.params,n=i&&i.pos&&Number(i.pos[0]);if(i.img_url){var s,o=this._viewedItemsUrls[i.img_url];if(o&&o.params)s=this.getItemById(o.id);else{var r=this.findItemByImageUrl(i.img_url[0]);r&&(s=this.getItemById(r.id))}var a=s&&s.params&&s.params.pos;if(s&&n===a){var c=i.rlt_url&&i.ogl_url,l=this._viewedRimUrls[i.rlt_url];c&&l?this._openViewerRimImage(l):this._openViewerWithItem(s.params.pos,{historyLoading:!0})}}else Ya.reactBus.emit("images-viewer:close")},_onRimClick:function(t){var e=this._getRimUrl(t),i=t?this.getItemParamsByPos(t.parentPos):null,n=i?this._getItemImageUrl(i):BEM.blocks.uri.getParamValue("img_url"),s=BEM.blocks.uri.setParams({rlt_url:e,ogl_url:n});this._updateLocationForItem(s,{history:!0,rimId:t.id}),this._saveViewedUrls(e,t)},_getRimUrl:function(t){var e=BEM.blocks.utils.get(t,"preview.0")||{};return e.origin?e.origin.url:e.url},_onViewerSelectItem:function(t){var e,i,n=t&&t.itemParams;t&&t.initialLoading?(this._setLocationForItem(BEM.blocks.uri.delParams(this._getParamsToDelete()),{history:this.params.stayOnServiceAfterInitialLoading||!1}),BEM.blocks["b-page"].getInstance().updateCacheKey(),this._saveViewedUrls(this._getItemImageUrl(n),n),this._setLocationForItem(this._getFullImageURL(n),{history:!0})):(e=!1,t.openedFromSerp&&(this._additionalParams=BEM.blocks.uri.parseParams(this._location.getState().url),e=!0),this._isRimOpened()&&(e=!0),this._saveViewedUrls(this._getItemImageUrl(n),n),this._updateLocationForItem(this._getFullImageURL(n),{history:e})),n&&(i=this.getItemById(n.id),BEM.blocks["serp-item"].setCurrent(i)),this._checkListOut()},_getItemImageUrl:function(t){if(!t)return"";var e=BEM.blocks.uri.parse(this._getDetailUrl(t)).getParam("img_url");return Array.isArray(e)&&e[0]?e[0]:""},_getDetailUrl:function(t){return t.previewUrl||t.detail_url||""},_updateLocationForItem:function(t,e){if(!window.screenfull||!window.screenfull.isFullscreen){this._updateLocationTimer&&clearTimeout(this._updateLocationTimer);var i=BEM.blocks["i-global"].param("page");"search"!==i&&"similar"!==i||(this._updateLocationTimer=setTimeout(function(){this._setLocationForItem(t,e)}.bind(this),this.LOCATION_SET_TIMEOUT))}},_saveViewedUrls:function(t,e){e&&e.isRim?this._viewedRimUrls[t]=e:this._viewedItemsUrls[t]=e,this._visitedUrls.push(t)},_onViewerBeforeClosed:function(t){var e=this._location.getState().views||0;"history"!==(t&&t.source)&&(e>0?(window.history.go(-e),clearTimeout(this._updateLocationTimer)):this._setLocationForItem(BEM.blocks.uri.delParams(this._getParamsToDelete()))),this.__base.apply(this,arguments)},_setLocationForItem:function(t,e){e=e||{};var i=Boolean(e.history),n=Boolean(e.trigger),s=this._location.getState().views||0,o={url:t,trigger:n,history:i,views:i?s+1:s};e.rimId&&(o.rimId=e.rimId),this.params.inRightColumn&&!i&&(o=Object.assign({},window.history.state,o)),this._location.change(o),this._clearSavedUrls()},_getParamsToDelete:function(){var t=BEM.blocks["i-global"].param("page"),e=this._viewParams;return"similar"===t&&(e=this._viewParamsSimilar),e},_getFullImageURL:function(t){var e=this._getDetailUrl(t);return e?BEM.blocks.uri.setParams(e,this._getViewerSerpItemCgi(e)):""},_isRimOpened:function(){return Boolean(BEM.blocks.uri.getParamValue("rlt_url"))},_clearSavedUrls:function(){if(this._visitedUrls.length>=this.SAVED_ITEMS_COUNT){var t=this._visitedUrls.shift();delete this._viewedItemsUrls[t],delete this._viewedRimUrls[t]}},_getViewerSerpItemCgi:function(t){if(!t)return null;var e=BEM.blocks.uri.parseParams(t);return Object.assign({},this._additionalParams,e)}}),BEM.DOM.decl("serp-list",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.params.reqid&&Ya.Rum.setSetting("reqid",this.params.reqid)}}}}),BEM.DOM.decl("serp-list",{_isLastPageHasBeenLoaded:!1,onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.totalPages=1,this.thumbRows=[],this._imagesStore=[],this._initialPageNum=this.params.pageNum,this.justifier=BEM.blocks.justifier,this.bindEvents(),this.init()}}},bindEvents:$.noop,unbindEvents:$.noop,addVerticalItems:$.noop,destruct:function(){this.unbindEvents(),this.__base.apply(this,arguments)},_onPageResize:function(){this.fitAllItems()},init:function(){var t=this.hasMod("vertical2");return window.Ya.Images.thumbRows?this.setThumbRows(window.Ya.Images.thumbRows):t||this.fitAllItems(),window.Ya.Images.thumbRows&&delete window.Ya.Images.thumbRows,this._removeDuplicates(this.domElem),t&&this._createVerticalSerpList(),this._imagesStore=this.constructor._getImagesFromSerpList(this.domElem[0]),this._onListAdded({totalPages:this.totalPages,reset:!0}),this},addSerpItems:function(t,e){this.params.pageNum=t.params.pageNum,this.params.lastPage=t.params.lastPage,this.params.reqid=t.params.reqid;var i,n=t.params.aliceInsertAfter,s=this.hasMod("vertical2"),o=$(t.html);return this._removeDuplicates(o,n),o.contents().length&&(s?(this._addToStore(o[0],e),this.addVerticalItems(o,e)):"next"===e?((i=this._getLastInvisibleRowItems()).length>0&&(this.thumbRows.pop(),o.prepend(i)),this.fitAddedItems(o),this._addToStore(o[0],e),n?(BEM.DOM.replace($(".alice-loading"),o.contents()),this.fitAllItems()):BEM.DOM.append(this.domElem,o.contents())):(this._addToStore(o[0],e),BEM.DOM.prepend(this.domElem,o.contents()),this.fitAllItems())),this.totalPages++,this._onListAdded({totalPages:this.totalPages,reset:!1}),this.domElem&&this.domElem[0]&&Ya.reactBus.emit("react-adapter:mount",this.domElem[0]),this},_addToStore:$.noop,_onListAdded:function(t){Ya.Rum.setSetting("reqid",this.params.reqid),BEM.blocks["i-global"].setParams({lastPageReqid:this.params.reqid}),this.trigger("loaded",{serpList:this,totalPages:t.totalPages,reset:t.reset}),window.Ya.reactBus.emit("serp-list:loaded")},_getLastInvisibleRowItems:function(){var t=this.thumbRows.slice(-1)[0],e=window.Ya.Images.ThumbsStore;if(!Array.isArray(t))return[];var i=t[0],n=e&&e.get(i);return n&&n.fittedItem?[]:t.map(function(t){return document.getElementById(t)})},getLastThumbOfRow:function(t){var e,i=this.thumbRows[t];return i&&(e=i.slice(-1)[0]),$(document.getElementById(e))},getInitialPageNum:function(){return this._initialPageNum},getPagesCount:function(){return this.totalPages},getRowCount:function(){return this.thumbRows.length},setThumbRows:function(t){this.thumbRows=t},addThumbRows:function(t,e){void 0===e&&(this.thumbRows=this.thumbRows.concat(t)),"number"==typeof e&&this.thumbRows.splice(e,0,t)},isLastPageHasBeenLoaded:function(){return this.isCurrentPageLast()&&(this._isLastPageHasBeenLoaded=!0),this._isLastPageHasBeenLoaded},getPenultRowNum:function(){return this.isRowVisible(this.thumbRows.length-1)?this.thumbRows.length-2:this.thumbRows.length-3},isRowVisible:function(t){return!!BEM.blocks["i-global"].param("verticalSerp")||"inline-block"===this.getLastThumbOfRow(t).css("display")},getThumbRow:function(t){for(var e,i=0,n=0;n<this.thumbRows.length;n++)for(e=0;e<this.thumbRows[n].length;e++)if(++i===t)return n},appendToRow:function(t,e){var i=-1===t?this.getPenultRowNum():t-1;this.getLastThumbOfRow(i).after(e)},appendIncutElem:function(t){return this.domElem.append(t),this},prependIncutElem:function(t){return this.domElem.prepend(t),this},getCurrentPageNumber:function(){return this.params.pageNum},getLastPageNumber:function(){return this.params.lastPage},isCurrentPageLast:function(){return this.params.pageNum===this.params.lastPage},getIds:function(){return this.thumbRows.reduce(function(t,e){return t.concat(e)},[])}},{_getImagesFromSerpList:$.noop}),BEM.DOM.decl("serp-list",{init:function(){return this.delMod("interactive"),window.Ya.Images.thumbRows&&this._getContainerWidth(),this.__base.apply(this,arguments),this},bindEvents:function(){BEM.blocks["b-page"].on("resize",this._onPageResize,this)},unbindEvents:function(){BEM.blocks["b-page"].un("resize",this._onPageResize,this)},reFitAllItems:function(){this._onPageResize()},_onPageResize:function(){this._resetContainerWidth(),this.__base.apply(this,arguments)},fitAllItems:function(){if(this.hasMod("justifier","no"))return null;var t=this._fitAllItems();return this.trigger("fitted"),t},_fitAllItems:function(){var t=this.justifier.fitImages({container:this.domElem[0],containerWidth:this._getContainerWidth(),showDangling:this.isLastPageHasBeenLoaded(),setHeightOnChild:!0,linkNodeDepth:1,fitIncuts:!0,saveMeta:!0,baseRowHeight:window.Ya.Images.baseRowHeight});return this.setThumbRows(t),t},fitAddedItems:function(t){var e=this.justifier.fitImages({container:t.get(0),containerWidth:this._getContainerWidth(),thumbRows:this.thumbRows,showDangling:this.isCurrentPageLast(),fitIncuts:!0,saveMeta:!0,setHeightOnChild:!0,linkNodeDepth:1,baseRowHeight:window.Ya.Images.baseRowHeight});this.addThumbRows(e)},_getContainerWidth:function(){return this._containerWidth||(this._containerWidth=this.domElem.parent().width()),this._containerWidth},_resetContainerWidth:function(){return delete this._containerWidth,this},_addToStore:function(t,e){var i=this.constructor._getImagesFromSerpList(t);this._imagesStore="next"===e?this._imagesStore.concat(i):i.concat(this._imagesStore)},getImagesStore:function(){return this._imagesStore}},{_getFallbackThumb:function(t){var e,i=t.querySelector(".serp-item__thumb").src;try{e=JSON.parse(t.dataset.size)}catch(t){}return e&&e[0]&&e[1]||(e=[t.clientWidth,t.clientHeight]),{url:i,microImg:"",size:{w:e[0],h:e[1]}}},_getImagesFromSerpList:function(t){if(!t)return[];var e=this;return Array.prototype.slice.call(t.querySelectorAll(".serp-item")).map(function(t){var i=BEM.blocks["serp-item"].getItemParams(t);return i.page=e._getPageNum(i.pos),i.thumb&&i.thumb.size||(i.thumb=e._getFallbackThumb(t)),i})},_getPageNum:function(t){var e=BEM.blocks["i-global"].param("docsPerPage")||30;return Math.floor(t/e)}}),BEM.DOM.decl("incut",{onSetMod:{inserted:{yes:function(){this.updateIncutBlock()}}},show:function(){return this.isVisible()||this.delMod("visibility"),this},isVisible:function(){return!this.hasMod("visibility","hidden")},hide:function(){return this.setMod("visibility","hidden")},transparent:function(){return this.setMod("visibility","transparent")},setInserted:function(t){return this.toggleMod("inserted","yes","",t)},getPosition:function(){return Number(this.domElem.attr("data-position"))},setPosition:function(t){this.domElem.attr("data-position",t)},getPositionType:function(){return this.domElem.attr("data-position-type")},setPositionType:function(t){this.domElem.attr("data-position-type",t)},updateIncutBlock:function(){if("SerpDirect"===this.params.incutBlock){var t=this.domElem.find(".SerpDirect").attr("id");t&&(window.Ya.Images.serpDirectFitted=window.Ya.Images.serpDirectFitted||{},window.Ya.Images.serpDirectFitted[t]=!0,Ya.reactBus.emit("serp:direct:fitted",{id:t}))}}},{live:!0}),BEM.DOM.decl({block:"incut",modName:"position",modVal:"bottom"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.blocks.footer.on({transparent:this._onFooterTransparent,show:this._onFooterShow,hide:this._onFooterHide},this)}}},destruct:function(){BEM.blocks.footer.un({transparent:this._onFooterTransparent,show:this._onFooterShow,hide:this._onFooterHide},this),this.__base.apply(this,arguments)},_onFooterTransparent:function(){this.transparent()},_onFooterHide:function(){this.hide()},_onFooterShow:function(){this.show()}}),BEM.DOM.decl("serp-item",{onSetMod:{selected:{yes:function(){this.delMod("hovered"),this.__self.delSelected()}}},saveCurrent:function(){return this.__self.prev=this.__self.getCurrent(),this.__self.setCurrent(this),this}},{getCurrent:function(){return this.current&&!this.current._isDestructing?this.current:void 0},getPrev:function(){return this.prev&&!this.prev._isDestructing?this.prev:void 0},setCurrent:function(t){this.current=t},clearCurrent:function(){this.setCurrent(null)},delSelected:function(){return this.getCurrent()&&this.getCurrent().delMod("selected"),this},getParams:function(t){var e=$("#"+t).data("bem");return e?e["serp-item"]:void 0},current:null,prev:null}),BEM.DOM.decl("serp-item",{onSetMod:{hovered:{yes:function(){return this.canHover()}}},canHover:function(){return!this.hasMod("selected","yes")},_onClick:function(t){BEM.blocks["i-global"].param("isPumpkin")&&"index"===BEM.blocks["i-global"].param("page")||(this.click("mouse"),t.preventDefault())},click:function(t,e){return this.eventSource=t,this.eventParams=e,BEM.blocks["serp-item"].delSelected(),this.select().saveCurrent().trigger("clicked",this),this},select:function(){return this.setMod("selected","yes"),this}},{live:function(){this.__base.apply(this,arguments),this.liveInitOnEvent("mousemove")}}),BEM.DOM.decl("serp-item",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindTo("pointermove",this._onPointerMove),this.bindTo("pointerleave",this._onPointerLeave)}}},destruct:function(){this.unbindFrom("pointermove",this._onPointerMove),this.unbindFrom("pointerleave",this._onPointerLeave),this.__base.apply(this,arguments)},_onPointerMove:function(){this.setMod("hovered","yes")},_onPointerLeave:function(){this.delMod("hovered")}}),BEM.DOM.decl("serp-item",{},{getItemParams:function(t){var e=this.getName();if(t&&t.classList&&t.classList.contains(e)){var i=JSON.parse(t.getAttribute("data-bem"))[e],n=JSON.parse(t.getAttribute("data-grid-position"))||{};return Object.assign({},i,n)}}}),BEM.DOM.decl("serp-item",{_thumbLoaded:function(){var t=this.elem("thumb")[0];return t&&t.complete&&t.naturalHeight},_onClick:function(){this.sendClickCounter({click_source:"serp"}),this.__base.apply(this,arguments)},sendClickCounter:function(t){var e=BEM.blocks.counter.convertVarsToString(t),i={dtype:"iweb",path:"/image/new/serp/results/"+this.params.counterPath,pos:this.params.pos,reqid:this.params.reqid};return e&&(i.vars=e),window.Ya.counter.hit(i,{href:this.params.img_href}),this},getIndex:function(){return this.domElem.index(".serp-item")}},{_getOriginUrl:function(t){return t.origin?t.origin.url:t.url},getNearestImages:function(t,e){var i=document.querySelector(this.buildSelector("pos",t));if(!i)return[];for(var n=[this.getItemParams(i)],s=i.nextElementSibling,o=i.previousElementSibling;e>0&&(s||o);)s&&(n.push(this.getItemParams(s)),s=s.nextElementSibling,e--),o&&e>0&&(n.push(this.getItemParams(o)),o=o.previousElementSibling,e--);return n.filter(function(t){return t})}}),BEM.DOM.decl({block:"serp-item",modName:"type",modVal:"search"},{onSetMod:{hovered:{yes:function(){if(!1===this.__base.apply(this,arguments))return!1}},blink:function(){this.__self.canUseCSSAnimation||this.domElem.animate({opacity:"1"},{duration:500})},selected:{yes:function(){this.__base.apply(this,arguments),this.trigger("viewed")}}},getWidth:function(){return this.domElem.width()},getHeight:function(){return this.domElem.height()},_calcWidth:function(t){return t=t||this.domElem.width(),Math.max(t,this.getPolaroidMinWidth())},_isLastImageInRow:function(t,e,i){var n=e.offset(),s=!(i.length&&n.top===i.offset().top),o=n.left+t>this.__self.doc.width();return s&&o},_isFirstImageInRow:function(t,e){if(BEM.blocks["i-global"].param("verticalSerp")){var i=t.parent();return i.offset().left===i.parent().offset().left}return!e.length||t.offset().top!==e.offset().top}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("link","pointerclick",function(t){if(t.stopPropagation(),2===t.which||t.metaKey||t.ctrlKey)return!0;this._onClick(t)}),this.canUseCSSAnimation=BEM.blocks["i-ua"].canUseCSSAnimation()}}),BEM.DOM.decl({block:"serp-list",modName:"lazy-thumbs",modVal:"yes"},{handleLazyDelayedThumbs:function(){this.hasMod("lazy-delayed")&&(this.delMod("lazy-delayed"),this._handleLazyThumbs())},_onListAdded:function(){this.__base.apply(this,arguments),this.hasMod("lazy-delayed")||this._handleLazyThumbs()},_handleLazyThumbs:function(){this._handleThumbs(this._getLazyThumbs())},_handleThumbs:function(t){var e=t.length;this._thumbsLoadList=t,this._thumbsLoadCursor=-1,this._loadThumbs(e)},_getLazyThumbs:function(){return this.domElem.find(".serp-item__thumb:not([src])")},_loadThumbs:function(t){for(var e=0;e<t;e++)this._loadNextThumb()},_loadThumb:function(t){t&&$(t).on("load error",this._loadNextThumb.bind(this)).attr("src",t.getAttribute("data-thumb"))},_loadNextThumb:function(){var t=this._thumbsLoadList[++this._thumbsLoadCursor];this._loadThumb(t)}}),BEM.DOM.decl({block:"serp-list",modName:"unique",modVal:"yes"},{_removeDuplicates:function(t,e){this._uniqIds||(this._uniqIds={});var i=this._uniqIds,n=!1,s=this;t.find(".serp-item").each(function(t,e){i[e.id]?($(e).remove(),s._countRemovedDuplicate(e),n=!0):i[e.id]=!0}),n&&this.fitAllItems()},_countRemovedDuplicate:function(t){var e=$(t).data("bem")["serp-item"].img_href;window.Ya.Images.errcnt({src:e},73082)}}),BEM.decl("justifier",{},{fitImages:function(t){return window.Ya.Images.fitImages(t)}}),BEM.DOM.decl({block:"serp-list",modName:"vertical2",modVal:!0},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}}},_getColsContainerWidth:function(){var t;return void 0===this._colsContainerWidth&&(t=this.domElem.find(".justifier__cols"),this._colsContainerWidth=t.width()),this._colsContainerWidth},_resetColsContainerWidth:function(){delete this._colsContainerWidth},_onPageResize:function(){this.__base.apply(this,arguments),this._resetColsContainerWidth()}}),BEM.DOM.decl({block:"serp-list",modName:"vertical2",modVal:!0},{destruct:function(){window.Ya.Images.verticalSerpList=null,this.__base.apply(this,arguments)},_createVerticalSerpList:function(){if(!window.Ya.Images.verticalSerpList){var t=this.domElem[0],e=window.Ya.Images.VerticalJustifier2;window.Ya.Images.verticalSerpList=new e(this._getVerticalJustifierParams(t)),t.style.visibility="visible"}},_getVerticalJustifierParams:function(t){var e=window.Ya.Images.verticalJustifierParams;e.dynamicConfig&&(e.dynamicConfig.avgRatio=BEM.blocks["i-global"].param("avgVerticalRatio"));var i=this.getMod("theme");return Object.assign({},e,{container:t,theme:i,containerWidth:function(){return t.clientWidth||document.body.clientWidth-(window.Ya.Images.serpMargin||0)}})},_fitAllItems:function(){var t=this.hasMod("vertical-shadowed",!0);return this._createVerticalSerpList(),t&&this.hideShadow(),window.Ya.Images.verticalSerpList.fit(),t&&window.inNextFrame(this.showShadow,this),null},_getMinColHeight:function(){var t=Math.max(window.Ya.Images.verticalSerpList.minColumnHeight,window.Ya.Images.verticalSerpList.getSyncColMinHeight()),e=window.Ya.Images.verticalJustifierParams,i=e.gap&&e.gap.vertical||0;return t>0?t-i:0},showShadow:function(){var t=this._getMinColHeight(),e=window.Ya.Images.verticalSerpList.colsElem;e&&(t?(e.style.height=t+"px",this.setMod("vertical-shadowed",!0)):this.hideShadow())},hideShadow:function(){this.delMod("vertical-shadowed");var t=window.Ya.Images.verticalSerpList.colsElem;t&&(t.style.height="")},addVerticalItems:function(t,e){var i=[].slice.apply(t[0].children);return i.length?(window.Ya.Images.verticalSerpList&&("next"===e?window.Ya.Images.verticalSerpList.append(i):window.Ya.Images.verticalSerpList.prepend(i)),this):this}}),$.extend({debounce:function(t,e,i,n){var s,o=function(){var o=arguments;n=n||this,i&&!s&&t.apply(n,o),clearTimeout(s),s=setTimeout(function(){i||t.apply(n,o),s=null},e)};return 3===arguments.length&&"boolean"!=typeof i&&(n=i,i=!1),o.stop=function(){clearTimeout(s),s=null},o},throttle:function(t,e,i){var n,s,o,r=function(){s=arguments,o=!0,i=i||this,n||function(){o?(t.apply(i,s),o=!1,n=setTimeout(arguments.callee,e)):n=null}()};return r.stop=function(){clearTimeout(n),n=null},r}}),function(t){var e=t.innerWidth>t.innerHeight,i=t.innerWidth,n=$.throttle(function(){var n=t.innerWidth,s=t.innerHeight,o=n>s;o!==e&&n!==i&&($(t).trigger("orientchange",{landscape:o,width:n,height:s}),e=o,i=n)},400);BEM.DOM.win.bind("resize",n),BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){this.bindToWin("orientchange",this._onOrientChange,this).__base.apply(this,arguments)}}},_onOrientChange:function(t,e){var i=this.__self,n=document.documentElement,s=n.className,o="i-ua_orient_"+(e.landscape?"landscape":"portrait");-1===s.indexOf(o)&&(n.className=s.replace(/\bi-ua_orient_\w+\b/,o)),i.width=e.width,i.height=e.height,i.landscape=e.landscape}},{width:t.innerWidth,height:t.innerHeight,landscape:e})}(window),BEM.DOM.decl("header",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindToWin("resize",$.throttle(this._onResize,150)),this._collapseUserIfNeeded()}}},_onResize:function(){this._collapseUserIfNeeded()},_onUserUpdatesName:function(){this._collapseBreakpoint=null,this._collapseUserIfNeeded()},_collapseUserIfNeeded:function(){var t=this._getUser();t&&t.toggleCollapsed(this._getCollapseBreakpoint()>=this.elem("nav").width())},_getCollapseBreakpoint:function(){return this._collapseBreakpoint||(this._collapseBreakpoint=this._getNavItemsWidth()+this.__self.NAV_ITEMS_GAP),this._collapseBreakpoint},_getNavItemsWidth:function(){var t=0;return this.elem("nav").children().each(function(){t+=$(this).outerWidth(!0)}),t},_getUser:function(){return this._user?this._user._isDestructing&&(this._collapseBreakpoint=null,this._user=this.findBlockInside("user")):(this._user=this.findBlockInside("user"),this._user&&this._user.on("update-name",this._onUserUpdatesName,this)),this._user}},{NAV_ITEMS_GAP:10,live:!1}),BEM.DOM.decl("header",{onSetMod:{js:{inited:function(){this.__self.instance=this}}}},{get:function(){return this.instance||(this.instance=$(this.buildSelector()).bem(this.getName()))},replacePlaceholder:function(t,e){var i=e.domElem,n=this.get().elem(t+"-container");n&&(n.replaceWith(i.detach()),e.delMod("hidden"))}}),BEM.DOM.decl("header",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._openedSlide=null}}},onElemSetMod:{action:{pressed:{"":function(t){this.elemParams(t).releaseByDocumentScroll&&this.unbindFromWin("scroll"),this._openedSlide&&(this._openedSlide.unbindFromDoc("pointerclick"),this._openedSlide=null),this.unbindFromWin("closeUnder"),t.attr({"aria-pressed":!1,"aria-expanded":!1}),t.trigger("released")},yes:function(t,e){var i=this;i.delMod(this.elem("action"),e).bindToWin("closeUnder",function(){i.delMod(t,e)}),i.elemParams(t).releaseByHeaderOutsideClick&&i.afterCurrentEvent(function(){if(i.domElem){var e=i._openedSlide=i._getOpenedSlide(t);e&&i._slideOnClick(e,t)}}),i.elemParams(t).releaseByDocumentScroll&&this.bindToWin("scroll",function(){i._onScroll(t)}),t.attr({"aria-pressed":!0,"aria-expanded":!0}),t.trigger("pressed")}}}},_getOpenedSlide:function(t){var e,i=this.buildSelector("action","type",this.getMod(t,"type"));return this.findBlocksInside("slide").some(function(t){return!(!t.params.rel||t.params.rel[0].elem!==i)&&(e=t,!0)}),e},_onScroll:function(t){this.delMod(t,"pressed")},_slideOnClick:function(t,e){var i=this;t.bindToDoc("pointerclick",function(n){var s=$(n.target);t.containsDomElem(s)||s.is(i.elem("main"))||s.is(i.elem("action-i"))||i.delMod(e,"pressed")})},_onActionClick:function(t){t.preventDefault(),BEM.blocks["i-ua"].opera<13&&t.stopPropagation(),this.toggleMod(t.data.domElem,"pressed","yes","")},_onActionKeyup:function(t){var e=BEM.blocks["i-ua"].opera<13,i=BEM.blocks.keycodes;(!e&&t.keyCode===i.ENTER||t.keyCode===i.SPACE)&&(t.preventDefault(),this.toggleMod(t.data.domElem,"pressed","yes",""))},destruct:function(){this._openedSlide&&(this._openedSlide.unbindFromDoc("pointerclick"),this._openedSlide=null),this.__base.apply(this,arguments)}},{live:function(){return this.liveBindTo("action","pointerclick",function(t){this._onActionClick(t)}).liveBindTo("action","keyup",function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||this._onActionKeyup(t)}),this.__base()}}),BEM.DOM.decl("i-services",{getServiceUrl:function(t,e){var i=this.params[t],n="";if(!i)return"";if("ya"===t)return i.baseUrl;i.search&&e&&(n=i.search+encodeURIComponent(e));var s=i.params||"";return n?n+=s:n=i.baseUrl&&-1===i.baseUrl.indexOf("?")?s?"/?"+s.replace(/^&/,""):"/":"all"===t?s.replace(/^&/,""):s,0===n.indexOf("/")&&"/"===i.baseUrl?n:i.baseUrl+n}},{getInstance:function(){return this._instance||(this._instance=$(this.buildSelector()).bem(this.getName())),this._instance},getServiceUrl:function(t,e){return this.getInstance().getServiceUrl(t,e)},live:!0}),BEM.DOM.decl("tabs-navigation",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindToWin("resize",this._setNavigationRegionWidth)}}},destruct:function(){this.unbindFromWin("resize"),this.__base.apply(this,arguments)},_getElemWidth:function(t){var e=getComputedStyle(t);return t.getBoundingClientRect().width+(parseFloat(e.marginLeft)||0)+(parseFloat(e.marginRight)||0)},_setNavigationRegionWidth:function(){var t=this.elem("tab","name","all")[0];if(t){for(var e=0,i=this._getElemWidth(t),n=this.elem("tab"),s=Math.max(document.body.clientWidth-(parseFloat(getComputedStyle(this.domElem[0]).paddingLeft)||0),this._getElemWidth(n[0])+i),o=0;o<n.length-1;o++){var r=this._getElemWidth(n[o]);if(!(e+r+i<=s))break;e+=r}var a=this.elem("content")[0].style,c=Math.ceil(e)-e;a.paddingRight=i-c+"px",a.width=Math.ceil(e)+"px",t.style.position="absolute"}}},{live:function(){this.liveInitOnChannelEvent("i-bem","init",function(){setTimeout(this._setNavigationRegionWidth.bind(this),200)})}}),BEM.DOM.decl("search2",{onSetMod:{js:{inited:function(){this.findBlocks().bindEvents()}}},_onInputChange:function(){BEM.blocks["i-global"].setParams({searchInputText:BEM.blocks.utils.escape(this._input.val())})},reset:function(){return this._input.reset(),this},focus:function(){return this._input.elem("control").focus(),this},findBlocks:function(){return this._location=BEM.blocks.location.getInstance(),this._input=this.findBlockInside("input"),this},bindEvents:function(){return this._location.on("change",this._onChange,this),this._input.on("change",this._onInputChange,this),this._input.on("focus",this._onInputFocus,this),BEM.blocks["b-page"].on("search:input:update",this.updateSearchPage,this),this.bindTo("submit",this._onSubmit),this},_onInputFocus:function(){this.trigger("input:focus")},_onSubmit:function(t,e){this.submit(t,e),t.preventDefault()},submit:function(t,e){var i=BEM.blocks["i-global"].getFlag("suggest_context_redirect"),n=BEM.blocks["i-global"].param("tld");i&&"ru"===n?this._checkRedirectURL(t,i):(this.val()!==BEM.blocks.uri.getParamValue("text")&&this.trigger("search:query:changed"),this._ajaxSubmit(t,e&&e.cgiQuerySource))},_ajaxSubmit:function(t,e){this._location.change({url:this._buildUrl(e)},t)},_checkRedirectURL:function(t,e){var i=BEM.blocks["i-global"].param("id"),n=this._input.val(),s="images"===i?40:197,o="images"===i?72863:72894,r=2===e?"control-":"",a=this;$.ajax({url:"//yandex.ru/suggest/suggest-redir",data:{current:i,part:n,lr:BEM.blocks["i-global"].param("lr")},dataType:"json",context:this,cache:!1}).then(function(t,e,i){var n=BEM.blocks.utils.get(t,"redirect_info.url"),s=$.Deferred();return n?s.resolve(n):s.reject(i,"no"),s.promise()}).then(function(c){cp({pid:s,cid:o,path:r+"yes",text:n,service:i},{href:c}),2===e?a._ajaxSubmit(t):location.href=c},function(e,c){cp({pid:s,cid:o,path:r+c,text:n,service:i}),a._ajaxSubmit(t)})},_buildUrl:function(t){var e=this.getAdvancedSearch();return this.domElem.attr("action")+"?"+this.domElem.serialize()+(e?"&"+e.getParams():"")+(t?"&query_source="+t:"")},_onChange:function(t,e){switch(this.__self.win.scrollTop(0),e.block){case"b-page_type_index":case"b-page_type_favorites":this.updateIndexPage(t,e);break;case"b-page_type_search":this.updateSearchPage(t,e)}},updateIndexPage:function(){this.reset().focus()},updateSearchPage:function(t,e){this.fill(e.params.text),this._input._updateClear(),this._input.delMod("focused")},fill:function(t){var e=Array.isArray(t)?t[0]:t;return this._input&&this._input.updateData(e),this},getAdvancedSearch:function(){if(!this._advancedSearch){var t=$(".advanced-search");this._advancedSearch=!BEM.blocks.utils.isEmpty(t)&&t.bem("advanced-search")}return this._advancedSearch},val:function(){return this._input.val()}}),BEM.DOM.decl("search2",{bindEvents:function(){return this.__base.apply(this,arguments),this},countSubmit:function(){this.submitByFilters?this.submitByFilters=!1:this.submitBySuggest?this.submitBySuggest=!1:"index"===BEM.blocks["i-global"].param("page")?(-1!==["ru","ua","com.tr"].indexOf(BEM.blocks["i-global"].param("tld"))&&BEM.blocks["b-statcounter"].goal({goal:"button",params:{query:{morda:"submit"}}}),BEM.blocks["b-statcounter"].hit({params:{query:{morda:"submit"}}})):BEM.blocks["b-statcounter"].hit({params:{query:{reform:"submit"}}})},_onSuggestSelect:function(t){if(BEM.blocks["i-global"].param("isPumpkin"))return this._location.change({url:this._buildUrl(),reload:!0},t),void t.preventDefault();this.__base.apply(this,arguments),this.submitBySuggest=!0,BEM.blocks["b-statcounter"].hit({params:{query:"index"===BEM.blocks["i-global"].param("page")?{morda:"suggest"}:{reform:"suggest"}}})},updateIndexPage:function(){this.reset(),this._input.setMod("autofocus","yes")},updateCbirPage:function(){this.fill(""),this._input.delMod("autofocus")},updateSearchPage:function(){this.__base.apply(this,arguments),this._input.setMod("autofocus","yes")}},{live:function(){this.liveBindTo("label","click",function(t){t.preventDefault()})}}),BEM.DOM.decl("search2",{},{getInstance:function(){var t;return void 0===this._instance&&(t=$(this.buildSelector()),this._instance=t.length?t.bem(this.getName()):null),this._instance}}),BEM.DOM.decl("search2",{_selectedFilters:{},_saveFilters:function(t){this._selectedFilters=t},_getAdvancedSearchParams:function(){var t=this._selectedFilters;return Object.keys(this._selectedFilters).reduce(function(e,i){return t[i]?e+"&"+i+"="+t[i]:e},"")},bindEvents:function(){return this.__base.apply(this,arguments),BEM.channel("mini-suggest").on({submit:this._onSubmit,change:this._onInputChange},this),this},destruct:function(){BEM.channel("mini-suggest").un({submit:this._onSubmit,change:this._onInputChange},this),this.__base.apply(this,arguments)}},{live:function(){return this.liveInitOnReactBusEvent("advanced-search:changeFilter",function(t){this._onFiltersChange(t)}).liveInitOnReactBusEvent("advanced-search:updateProps",function(t){t&&this._saveFilters(t.filters||{})}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("search2",{destruct:function(){this.unbindEvents(),this.__base.apply(this,arguments)},unbindEvents:function(){this._location.un("change",this._onChange,this),this._input.un("change",this._onInputChange,this),this._input.un("focus",this._onInputFocus,this),BEM.blocks["b-page"].un("search:input:update",this.updateSearchPage,this)},_onFiltersChange:function(t){BEM.blocks["b-statcounter"].hit({params:{query:{filter:t.metrikaParam}}}),this._saveFilters(t.filters),this.submit()},submit:function(t){var e=BEM.blocks["cbir-intent"].getInstance();return"similar"===BEM.blocks["i-global"].param("page")&&e&&e.isVisible()?(t.preventDefault(),void Ya.reactBus.emit("cbir:submit-similar-query",this.val())):this.__base.apply(this,arguments)},_buildUrl:function(t){var e=BEM.blocks["cbir-intent"].getInstance();if(e&&e.isVisible()){var i=this.domElem.serializeArray().reduce(function(t,e){return t[e.name]=e.value,t},{});return i=Object.assign(i,{cbir_page:"similar"}),BEM.blocks.uri.buildRelativeUrl(BEM.blocks.uri.delParams(Object.keys(i)),i)}return this.domElem.attr("action")+"?"+this.domElem.serialize()+this._getAdvancedSearchParams()+(t?"&query_source="+t:"")}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this._val=this.elem("control").val()}},disabled:{"*":function(t,e){this.elem("control").prop("disabled",e)},yes:function(){this.delMod("focused")}},focused:function(t,e){if(this.hasMod("disabled"))return!1;e?this._focused||this._focus():this._focused&&this._blur(),this.afterCurrentEvent(function(){this.domElem&&this.trigger(e?"focus":"blur")})}},isDisabled:function(){return this.hasMod("disabled")},val:function(t,e){var i=void 0!==t,n=this.elem("control");return t=i?null===t?"":t.toString():n.val(),this._val!==t&&(this._val=t,n.val()!==t&&n.val(t),this.trigger("change",e)),i?this:t},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var i=document.selection.createRange();if(i&&i.parentElement()===t){var n=t.value.length,s=t.createTextRange();s.moveToBookmark(i.getBookmark());var o=t.createTextRange();o.collapse(!1),e=s.compareEndPoints("EndToEnd",o)>-1?n:-s.moveEnd("character",-n)}}return e},_onFocus:function(){if(parseInt(BEM.blocks["i-ua"].ios,10)>=8&&!this.hasMod("type","textarea")){var t=this.elem("control")[0];t.selectionStart===t.value.length&&(t.scrollLeft=t.scrollWidth)}return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._returnFocus?(this.afterCurrentEvent(function(){this.domElem&&this._focus()}),this):this.hasMod(this.elem("clear"),"pressed")?this:(this._focused=!1,this.delMod("focused"))},_focus:function(){if(this.hasMod("disabled","yes"))return!1;this.elem("control").focus()},_blur:function(){this._returnFocus=!1,this.elem("control").blur()},_updateVal:function(){this.val(this.elem("control").val())},destruct:function(){this._blur(),this.__base.apply(this,arguments)}},{live:function(){this.liveBindTo("control","focusin focusout",function(t){this["focusin"===t.type?"_onFocus":"_onBlur"](t)}),this.liveBindTo("control","input",function(){this._updateVal()})}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.elem("control"),e=$.dom.getActiveElement(),i=this.params.autoFocus&&!e.is("input, textarea");(e[0]===t[0]||i)&&(this.setMod("focused","yes")._focused=!0),this.params.shortcut&&this.bindToDoc("keydown",function(t){t.ctrlKey&&t.which===BEM.blocks.keycodes.UP&&!$(t.target).is("input, textarea")&&this.setMod("focused","yes")})}}},_focus:function(){if(!1===this.__base())return!1;var t=this.elem("control")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}},destruct:function(){this.params.shortcut&&this.unbindFromDoc("keydown"),this.__base.apply(this,arguments)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")}},{live:function(){return this.liveBindTo("box","pointerover pointerout",function(t){this.hasMod("disabled")||this.elem("box")[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.liveBindTo("control","dragenter"),this.__base()}}),BEM.DOM.decl("input",{inputInited:!1,onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.inputInited=!0,this.bindEvents()}}},onElemSetMod:{clear:{visibility:{visible:function(){return!!this._isInputHasText()&&this.__base.apply(this,arguments)}}}},_isInputHasText:function(){var t=this.elem("control");return Boolean(t&&t[0]&&t.val())},bindEvents:function(){return this.__base.apply(this,arguments),this.bindTo(this.domElem,"keypress",this._onKeyPress),Ya.reactBus.on("images-viewer:fullscreenEnter",this._onFullscreenEnter,this).on("images-viewer:fullscreenExit",this._onFullscreenExit,this).on("images-viewer:opened",this._onViewerOpened,this).on("images-viewer:closed",this._onViewerClosed,this),this},destruct:function(){this.inputInited&&(Ya.reactBus.off("images-viewer:fullscreenEnter",this._onFullscreenEnter).off("images-viewer:fullscreenExit",this._onFullscreenExit).off("images-viewer:opened",this._onViewerOpened).off("images-viewer:closed",this._onViewerClosed),this.__base.apply(this,arguments))},_onKeyPress:function(t){this.trigger("keypress",t)},_onFullscreenEnter:function(){this._disable()},_onFullscreenExit:function(){this._enable()},_onViewerOpened:function(){this._disable()},_onViewerClosed:function(){this._enable()},_disable:function(){this.setMod("disabled","yes")},_enable:function(){this.delMod("disabled")},setFocus:function(){return this.setMod("focused","yes")},_onCbirButtonClick:function(){this.trigger("cbir-button-click"),Ya.reactBus.emit("cbir:toggle-panel")}},{live:function(){var t=this.__base.apply(this,arguments);return this.liveBindTo("cbir-button","pointerclick",function(){this._onCbirButtonClick()}),t}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}}},_onClearClick:function(){return this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.clearInput({source:"clear"})._focus()},clearInput:function(t){return this.val("",t),this},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible",Boolean(this._val))}},{live:function(){return this.liveBindTo("clear","pointerpress",function(t){this.setMod(this.elem("clear"),"pressed","yes")}).liveBindTo("clear","pointerover",function(t){this.setMod(this.elem("clear"),"hovered","yes")}).liveBindTo("clear","pointerout",function(t){this.delMod(this.elem("clear"),"hovered")}).liveBindTo("clear","pointerclick",function(){this.delMod(this.elem("clear"),"pressed"),this._onClearClick()}).liveBindTo("control","paste",function(){this.setMod(this.elem("clear"),"visibility","visible")}),this.__base()}}),BEM.DOM.decl("input",{_onBoxClear:function(){BEM.blocks["b-page"].preventFocus||this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"input",modName:"cbir",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindEvents().findBlocks().initIntent()}}},initIntent:function(){return this.cbirIntent&&this.cbirIntent.init(),this},findBlocks:function(){return this.cbirIntent=BEM.blocks["serp-header"].getSearch().findBlockInside("cbir-intent"),this},bindEvents:function(){return this.__base.apply(this,arguments),this.bindTo(this.domElem,"keypress",this._onKeyPress),BEM.blocks["cbir-intent"].on("focusInput",this._onInputFocus,this).on("updateInputOffset",this.updateInputOffset,this),this},destruct:function(){BEM.blocks["cbir-intent"].un("focusInput",this._onInputFocus,this).un("updateInputOffset",this.updateInputOffset,this),this.__base.apply(this,arguments)},_onInputFocus:function(){this.setFocus()},updateInputOffset:function(t,e){this.elem("control").css("padding-left",e)}}),BEM.DOM.decl("cbir-intent",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindEvents().init()}},loading:{yes:function(){this.delMod("loaded").setIntentTitle("loading")}},loaded:{yes:function(){this.delMod("loading").setIntentTitle("loaded")}}},bindEvents:function(){return this.__base.apply(this,arguments),this.bindToWin("resize",this.updateInputOffset),this.bindTo("thumb","load",this.setLoadedState),this.bindTo("thumb","error",this.hide),this.bindTo("close","pointerclick",this._onClearClick),this},_onClearClick:function(){this.hide().focusInput()},init:function(){var t=this.elem("thumb").attr("data-src");(this.isVisible()||t)&&this.show({src:t})},show:function(t){return(t=t||{}).src&&this.setThumbSrc(t.src),this.setMod("visible","yes").updateInputOffset()},hide:function(t){return(t=t||{}).clear&&this.clearThumb(),this.delMod("visible").updateInputOffset()},isVisible:function(){return this.hasMod("visible","yes")},setIntentTitle:function(t){var e=this.params.texts[t];return e&&this.elem("title").text(e),this},setThumbSrc:function(t){var e=this.elem("thumb");return t!==e.attr("src")&&(this.setLoadingState(),e.attr("src",t)),this},clearThumb:function(){return this.elem("thumb").attr("src",""),this.setLoadingState()},setLoadingState:function(){return this.setMod("loading","yes").updateInputOffset()},setLoadedState:function(){return this.setMod("loaded","yes").updateInputOffset()},updateInputOffset:function(){var t=this.isVisible()?this.domElem.width():0;return this.trigger("updateInputOffset",t),this},focusInput:function(){return window.Ya.reactBus.emit("HeaderDesktop:focus"),this.trigger("focusInput"),this}},{getInstance:function(){return this._instance||(this._instance=$(this.buildSelector()).bem(this.getName())),this._instance}}),BEM.DOM.decl({name:"input",modName:"autofocus",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindToDoc("keydown",this._autoFocusBind)}}},_autoFocusBind:function(t){if(!this.hasMod("focused","yes")&&!this.elem("control").attr("disabled")){var e;try{e=document.activeElement.tagName.toLowerCase()}catch(t){}if(function(t){if(function(t){var e=t.charCode||t.keyCode||t.which||0;return t.ctrlKey||t.altKey||t.metaKey||16===e||8===e||20===e||9===e||e>=32&&e<=40||e>=112&&e<=123||27===e||45===e||46===e||13===e||e>=91&&e<=93}(t))return!1;var e=t.charCode||t.keyCode||t.which||0;if(e>=48&&e<=57)return!0;if(e>=96&&e<=105)return!0;if(e>=65&&e<=90||e>=1025&&e<=1071)return!0;var i=t.key||"";return"хёэжбю".indexOf(i.toLowerCase())>=0}(t)&&"input"!==e&&"textarea"!==e){var i=this.elem("control")[0],n=this.val();if(n.length>0&&" "!==n.slice(-1)&&(n+=" ",this.val(n)),i.createTextRange){var s=i.createTextRange();s.collapse(!1),s.select()}else i.setSelectionRange&&i.setSelectionRange(n.length,n.length);this.setMod("focused","yes")}}}}),BEM.DOM.decl({block:"input",modName:"theme",modVal:"websearch2"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on("change",this._updateState)._updateState()}}},_updateState:function(){return this.toggleMod("empty",!0,!this._val)}}),BEM.DOM.decl("button",{onSetMod:{js:{inited:function(){var t=this.isDisabled(),e=this.domElem;(this._href=e.attr("href"))&&t&&e.removeAttr("href")}},disabled:function(t,e){var i=this.domElem;e&&this.delMod("hovered"),this._href&&(e?i.removeAttr("href"):i.attr("href",this._href)),this.afterCurrentEvent(function(){i&&i.prop("disabled",e)})},pressed:function(t,e){if(this.hasMod("disabled"))return!1;this.trigger(e?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return void 0===t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},getUrl:function(){return this.url()},setUrl:function(t){return this.url(t)},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.domElem&&this.trigger("click")})}},{live:function(){this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("pointerpress",function(t){this.isDisabled()||this._onPointerpress(t)})}}),BEM.DOM.decl("button",{onSetMod:{focused:{yes:function(){if(this.isDisabled())return!1;this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._getControl().focus(),this.trigger("focus")},"":function(){var t=BEM.blocks["i-ua"].opera<13;this.unbindFromWin("unload").unbindFrom("keydown"),(t||document.hasFocus())&&this._isControlFocused()&&this._getControl().blur(),this.trigger("blur")}},disabled:function(t,e){this.__base.apply(this,arguments),e&&(this.delMod("focused"),this.domElem.keyup())},hovered:function(t,e){if(this.isDisabled())return!1;!e&&this.delMod("pressed")},pressed:function(){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_getControl:function(){return this.elem("control").length&&this.elem("control")||this.domElem},_isControlFocused:function(){return this.containsDomElem($.dom.getActiveElement())},_onKeyDown:function(t){var e=BEM.blocks.keycodes,i=t.keyCode;!this._keyDowned&&e.is(i,"ENTER","SPACE")&&(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,i===e.SPACE&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||this.toggleMod("hovered","yes","pointerover"===t.type)}).liveBindTo("focusin focusout",function(t){this.toggleMod("focused","yes","focusin"===t.type)}),8===BEM.blocks["i-ua"].ie&&this.liveBindTo("mouseup mouseout",function(t){this.domElem.height()}),this.__base()}}),BEM.DOM.decl({block:"button",modName:"withFocusFix",modVal:"yes"},{onSetMod:{focused:{yes:function(){if(this.isDisabled())return!1;this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this.trigger("focus")}}}}),BEM.DOM.decl({block:"search2",modName:"cbir",modVal:"yes"},{_onSubmit:function(t,e){this.trigger("search:submit",{event:t,data:e}),t.preventDefault()},getErrorTargetDomElem:function(){return this.elem("input")}}),BEM.DOM.decl({block:"input",modName:"search",modVal:"yes"},{reset:function(){this.updateData("")},updateData:function(t){this.val(t);var e=Ya.SUGGEST&&Ya.SUGGEST.main;e&&e._onInput()}}),BEM.DOM.decl("footer",{hide:function(){this.hasMod("hidden","yes")||(this.setMod("hidden","yes"),this.trigger("hide"))},transparent:function(){this.setMod("hidden","yes"),this.trigger("transparent")},show:function(){this.delMod("hidden"),this.trigger("show")}}),BEM.DOM.decl("footer",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.blocks["b-page"].on("change",this._onPageChange,this)}}},destruct:function(){BEM.blocks["b-page"].un("change",this._onPageChange,this),this.__base.apply(this,arguments)},_onPageChange:function(){BEM.blocks["i-global"].param("mobile")&&!BEM.blocks["i-global"].param("tablet")&&this.updateMobileLink()},updateMobileLink:function(){var t=this.elem("link","mobile","yes"),e=t.attr("href"),i=BEM.blocks.uri.getParamValue(e,"retpath"),n=BEM.blocks.uri.getParamValue("text"),s=BEM.blocks.uri.parse(i),o=BEM.blocks.utils.isEmpty(n)?s.getRoot():s.getRoot()+"/search?text="+encodeURIComponent(n);t.attr("href",BEM.blocks.uri.setParam(e,"retpath",o))}}),BEM.DOM.decl("footer",{destruct:function(){BEM.blocks["b-page"].un("scroll",this._onScroll,this),this.__base.apply(this,arguments)},_onPageChange:function(t,e){var i=this.params.links;this.__base.apply(this,arguments),BEM.blocks["b-page"].un("scroll",this._onScroll,this),this.elem("link","type","help").attr({href:"index"===e.type?i["help-index"]:i.help})}}),BEM.DOM.decl("yaplus",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.insertIntoHeader()}}},_getPage:function(){return this._page||(this._page=this.findBlockOn(BEM.DOM.scope,"b-page"))}}),BEM.DOM.decl("yaplus",{insertIntoHeader:function(){var t=BEM.blocks["serp-header"],e=t&&t.get();if(e){if(this.hasMod("available","yes")){var i=e.elem("yaplus-container");if(!i)return;e.elem("nav").prepend(i.detach())}t.replacePlaceholder("yaplus",this)}}}),BEM.DOM.decl("yaplus",{insertIntoHeader:function(){this.__base.apply(this,arguments),BEM.channel("yaplus").trigger("rendered")}}),BEM.DOM.decl("b-statcounter",{onSetMod:{js:{inited:function(){this.findElem("metrika").length<1||(this.location=BEM.blocks.location.getInstance().on("change",this._onChange,this),this.__self.on("hit",this.hitMetrika,this),this.__self.on("goal",this.reachGoal,this),this.trigger("hitAndGoalInited"),this.__base.apply(this,arguments))}}},destruct:function(){this.location.un("change",this._onChange,this),this.__self.un("hit",this.hitMetrika,this),this.__self.un("goal",this.reachGoal,this),this.__base.apply(this,arguments)},_onChange:function(){this.hitMetrika()},hitMetrika:function(t,e){e||(e={});var i=this.getMetrika();i&&i.hit(e.url||window.location.href,e.title,e.referer,e.params),BEM.blocks.counter.debug("metrika hit",JSON.stringify(e.params))},reachGoal:function(t,e){e||(e={});var i=this.getMetrika();i&&i.reachGoal(e.goal,e.params),BEM.blocks.counter.debug("metrika reachGoal",JSON.stringify(e))},getMetrika:function(){return this._mc||(this._mc=window["yaCounter"+this.elemParams("metrika").id])}},{live:function(){return this.hit=this.hit.bind(this),this.goal=this.goal.bind(this),Ya.reactBus.on("b-statcounter:hit",this.hit),Ya.reactBus.on("b-statcounter:goal",this.goal),!1},hit:function(t){this.trigger("hit",t)},goal:function(t){this.trigger("goal",t)}}),BEM.DOM.decl("b-statcounter",{_onChange:$.noop}),BEM.DOM.decl("b-statcounter__metrika",{onSetMod:{js:{inited:function(){this.__self.loadMetrika(),this.addCounter(this.params)}}},addCounter:function(t){var e=window.Ya&&Ya.Metrika,i=window.yandex_metrika_callbacks||(window.yandex_metrika_callbacks=[]),n=function(){window["yaCounter"+t.id]=new Ya.Metrika(t)};if(!t.id)throw new Error(["Incorrect ID has been passed.","block: "+this.__self.getName(),"method: addCounter"].join("\n"));e?n():i.push(n)},getDefaultParams:function(){return{enableAll:!0}}},{loadMetrika:function(){var t=window.Ya&&Ya.Metrika,e="https:"===document.location.protocol?"https:":"http:";!t&&$.ajax({url:e+"//mc.yandex.ru/metrika/watch.js",dataType:"script",cache:!0}),this.loadMetrika=function(){}}}),BEM.DOM.decl("b-statcounter__metrika",{getDefaultParams:function(){return{clickmap:!0,trackLinks:!0}},onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.addSearchInputDetectClass()}}},addSearchInputDetectClass:function(){BEM.blocks["i-global"].getFlag("enable_webvisor2")&&this.params.webvisor&&this.afterCurrentEvent(function(){var t=document.querySelector(this.__self.DESKPAD_SEARCH_INPUT_SELECTOR)||document.querySelector(this.__self.TOUCH_SEARCH_INPUT_SELECTOR);t&&t.classList.add(this.__self.METRIKA_FIELD_DETECT_SELECTOR)})},addCounter:function(t){if(!t.id)throw new Error(this.getErrorMessage());this.__self.processMetrikaFn(this.__self.createYaCounter.bind(this,t))},getErrorMessage:function(){return["Incorrect ID has been passed.","block: "+this.__self.getName(),"method: addCounter"].join("\n")}},{METRIKA_FIELD_DETECT_SELECTOR:"ym-record-keys",DESKPAD_SEARCH_INPUT_SELECTOR:".search2 .search2__input .input__control",TOUCH_SEARCH_INPUT_SELECTOR:".header3 textarea.header3__input.input__control",loadMetrika:function(){var t="https:"===document.location.protocol?"https:":"http:",e=this.getScript();this.isMetrikaScriptLoaded()||this.loadMetrikaTransport(t+e),this.loadMetrika=function(){}},loadMetrikaTransport:function(t){$.ajax({url:t,dataType:"script",cache:!0})},getScript:function(){if(BEM.blocks["i-global"].getFlag("enable_webvisor2"))return"//mc.yandex.ru/metrika/tag_jet_beta.js";var t=BEM.blocks["i-global"].getFlag("velocity_metrika_script");if(t)switch(t){case"v1":return"//mc.yandex.ru/metrika/watch_serp.js";case"v2":return"//mc.yandex.ru/metrika/watch_serp_v2.js"}return"//mc.yandex.ru/metrika/watch.js"},getMetrikaCallbacksPropName:function(){return BEM.blocks["i-global"].getFlag("enable_webvisor2")?"yandex_metrika_callbacks2":"yandex_metrika_callbacks"},isMetrikaScriptLoaded:function(){return BEM.blocks["i-global"].getFlag("enable_webvisor2")?Boolean(window.Ya&&Ya.Metrika2):Boolean(window.Ya&&Ya.Metrika)},processMetrikaFn:function(t){var e=this.getMetrikaCallbacksPropName();this.isMetrikaScriptLoaded()?t():(window[e]||(window[e]=[]),window[e].push(t))},createYaCounter:function(t){try{BEM.blocks["i-global"].getFlag("enable_webvisor2")?window["yaCounter"+t.id]=new Ya.Metrika2(t):window["yaCounter"+t.id]=new Ya.Metrika(t)}catch(t){}}}),BEM.DOM.decl("fade",{onSetMod:{progress:function(t,e){this.getSpin().setMod(t,e)}},getSpin:function(){return this._spin||(this._spin=this.findBlockInside("spin2")),this._spin},show:function(){this.setMod("progress","yes")},hide:function(){this.delMod("progress")}}),BEM.DOM.decl("fade",{coverPageLayout:function(){this.delMod("include")},coverTabs:function(){this.setMod("include","tabs")},coverHeader:function(){this.setMod("include","header")}}),BEM.DOM.decl({block:"fade",modName:"region",modVal:"main"},{onSetMod:{progress:function(t,e){var i=document.querySelector(".masthead-above-header"),n=BEM.blocks["page-layout"].getInstance();i&&n&&this.domElem.css("top",n.domElem[0].getBoundingClientRect().top),this.__base.apply(this,arguments)}}}),BEM.DOM.decl("i-device-info",{onSetMod:{js:{inited:function(){var t=this.params.forcedSzm;t?this.setSzmCookie(decodeURIComponent(t)):this.updateSzmCookie()}}},getScreenSize:function(){return this.validateScreenSize({w:screen.width,h:screen.height})},getViewportSize:function(){return{w:document.documentElement.clientWidth||document.body.clientWidth||window.innerWidth,h:document.documentElement.clientHeight||document.body.clientHeight||window.innerHeight}},getDevicePixelRatio:function(){return window.devicePixelRatio||1},getScreenParams:function(){return{screenSize:this.getScreenSize(),viewportSize:this.getViewportSize(),devicePixelRatio:this.getDevicePixelRatio()}},updateSzmCookie:function(){var t=this.getScreenParams(),e=this.parseSzmCookie(this.getSzmCookie());if(window.Ya&&Ya.Rum&&this.params.logSzm){var i=this.getSzmWidth(t),n=this.getSzmWidth(e);Ya.Rum.sendTimeMark("szm_update",Ya.Rum.getTime(),!1,{"-isequal":i===n,"-coldstart":!n,"-w":i,"-prev_w":n})}this.isSzmEqual(e,t)||this.setSzmCookie(this.stringifySzmCookie(t))},setSzmCookie:function(t){return BEM.blocks["i-cookie"].get().yp({name:"szm",value:t,encode:!1})},getSzmCookie:function(){return BEM.blocks["i-cookie"].get().yp("szm")},isSzmEqual:function(t,e){function i(t,e){return t.w===e.w&&t.h===e.h}return!(!t||!e)&&(t.devicePixelRatio===e.devicePixelRatio&&(!!i(t.screenSize,e.screenSize)&&!!i(t.viewportSize,e.viewportSize)))},validateScreenSize:function(t){return t},formatSzmSizeToString:function(t){if(t)return[t.w,t.h].join("x")},formatSzmSizeToObject:function(t){if(t)return t=t.split("x"),{w:Number(t[0]),h:Number(t[1])}},stringifySzmCookie:function(t){return[String(t.devicePixelRatio).replace(".","_"),this.formatSzmSizeToString(t.screenSize),this.formatSzmSizeToString(t.viewportSize)].join(":")},parseSzmCookie:function(t){if(t){var e=(t=t.split(":"))[0],i=t[1],n=t[2]||t[1];return{devicePixelRatio:Number(e.replace("_",".")),screenSize:this.formatSzmSizeToObject(i),viewportSize:this.formatSzmSizeToObject(n)}}},getSzmWidth:function(t){if(t)return Math.floor(t.viewportSize.w||t.screenSize.w)}}),BEM.DOM.decl("i-device-info",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindEvents()}}},bindEvents:function(){Ya.reactBus.on("szm:update",this.updateSzmCookie,this)},destruct:function(){Ya.reactBus.off("szm:update",this.updateSzmCookie,this),this.__base.apply(this,arguments)}}),BEM.DOM.decl("page-layout",{},{getInstance:function(){return this._instance||(this._instance=$(this.buildSelector()).bem(this.getName())),this._instance}}),BEM.DOM.decl("page-layout",{_shouldTrigger:!0,onSetMod:{layout:function(t,e){this._shouldTrigger&&this.trigger(t,e),this._shouldTrigger=!0}},disableTrigger:function(){return this._shouldTrigger=!1,this}}),BEM.DOM.decl("page-layout",{changeHeight:function(t){return this.elem("content-wrapper").css("min-height","+="+t),this},getHeight:function(){return this.elem("content-wrapper").height()},setHeight:function(t){return this.elem("content-wrapper").css("min-height",t),this},setDefaultHeight:function(){return this.elem("content-wrapper").css("min-height",""),this}}),BEM.DOM.decl("cbir-uploader",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._loadCore()}}},_loadCore:function(){BEM.channel("i-react-ajax-adapter").trigger("render",{container:this.elem("core"),params:{type:"CbirCore",args:{rpt:"imageview"}}})}}),BEM.DOM.decl("cbir-uploader",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._loadPanel()}}},_loadPanel:function(){BEM.channel("i-react-ajax-adapter").trigger("render",{container:this.elem("panel"),params:{type:"CbirPanel",args:{rpt:"imageview"}}})},_loadHistory:function(){BEM.channel("i-react-ajax-adapter").trigger("render",{container:this.elem("history"),params:{type:"CbirHistory",args:{rpt:"imageview"}}})}},{live:function(){return this.liveInitOnReactBusEvent("cbir:toggle-panel",function(){this._panelMounted||(this._togglePanelEventEmitted=!0)}).liveInitOnReactBusEvent("cbir:panel-mounted",function(){this._togglePanelEventEmitted&&(this._togglePanelEventEmitted=!1,this._panelMounted=!0,Ya.reactBus.emit("cbir:toggle-panel",!0))}).liveInitOnReactBusEvent("cbir:panel-unmounted",function(){this._panelMounted=!1}).liveInitOnReactBusEvent("cbir:popup-opened",function(){this._historyLoaded||(this._historyLoaded=!0,this._loadHistory())}).liveInitOnReactBusEvent("cbir:history-modal-open",function(){this._historyEmitted=!0}).liveInitOnReactBusEvent("cbir:history-modal-mounted",function(){this._historyEmitted&&!this._historyMounted&&Ya.reactBus.emit("cbir:history-modal-open",!0),this._historyMounted=!0}),!1}}),BEM.DOM.decl("incut-controller",{onSetMod:{js:{inited:function(){BEM.blocks["b-page"].on("change",this._syncState,this),BEM.blocks.more.on("click",this._onMoreClick,this),BEM.blocks["serp-controller"].on("loaded",this._onListLoaded,this),this._syncState()}}},destruct:function(){BEM.blocks["b-page"].un("change",this._syncState,this),BEM.blocks.more.un("click",this._onMoreClick,this),BEM.blocks["serp-controller"].un("loaded",this._onListLoaded,this),this.__base.apply(this,arguments)},_syncState:function(){this.resetSerpList(),this._tryInitIncuts()},_onMoreClick:function(){this._resetLastPositionIncuts()},_onListLoaded:function(t,e){this._tryInitIncuts(e&&e.direction)},_triggerCompleted:function(t,e){this.trigger("completed",{dir:t,incuts:e||[]})},_tryInitIncuts:function(t){if(this._shouldNotShowIncuts())return this._triggerCompleted(t),this;var e,i=this.findBlocksInside("incut");if(!i||!i.length)return this._triggerCompleted(t),this;this.haveBottomIncut=i.some(function(t){return!(!t||!t.domElem)&&(t.hasMod("position","before-more")||t.hasMod("before-more",!0))});for(var n=0;n<i.length;n++)e=i[n],this._shouldShowIncut(e)&&this.initIncut(e,t);return this._triggerCompleted(t),this},_resetLastPositionIncuts:function(){this.findBlocksInside({block:"incut",modName:"last",modVal:!0}).forEach(function(t){t.delMod("last")})},_shouldNotShowIncuts:function(){var t=this._getSerpList();return!(t&&t.getLastPageNumber()>=0)},_isIncutDisabled:function(t){var e=BEM.blocks["i-global"].param("isPornoQuery");return e?"SerpDirect"!==(t.params&&t.params.incutBlock||""):e},_shouldShowIncut:function(t){if(this._isIncutInserted(t)||this._isIncutDisabled(t))return!1;var e=this._getSerpController(),i=this._getSerpList(),n=t.getPosition(),s=t.getPositionType(),o=i&&i.getPenultRowNum()+1,r=!1;switch(s){case"line":r=i&&(0===n||i.isRowVisible(n-1)&&(!this.haveBottomIncut||n<o+1));break;case"middle":r=e.getListCount()%e.getScrollPagesCount()===n;break;case"page":r=e.getListCount()%(n-e.getInitialPageNum())==0;break;case"bottom":r=e.isCurrentPageLast()||e.getListCount()%e.getScrollPagesCount()==0;break;case"page-fixed":r=!t.hasMod("last");break;case"top":case"vertical":case"tooth":r=!0}return r},_isIncutInserted:function(t){return t.hasMod("inserted","yes")&&"middle"!==t.getPositionType()},initIncut:function(t,e){var i=this._getSerpList(),n=t.domElem,s=t.getPosition();switch(t.getPositionType()){case"line":i.appendToRow(s,n);break;case"middle":case"page":"prev"===e?i.prependIncutElem(n):i.appendIncutElem(n);break;case"top":i.prependIncutElem(n)}return n&&Ya.reactBus.emit("react-adapter:mount",n[0]),t.show().setInserted(!0)},_getSerpList:function(){return this._serpList||(this._serpList=this.findBlockInside("serp-list"))},resetSerpList:function(){this._serpList=void 0},_getSerpController:function(){return this._serpController||(this._serpController=this.findBlockOn("serp-controller"))}},{live:function(){return!1},getInstance:function(){return this._instance||(this._instance=$(this.buildSelector()).bem(this.getName())),this._instance}}),void 0===jQuery.when.all&&(jQuery.when.all=function(t){return $.Deferred(function(e){$.when.apply(jQuery,t).then(function(){e.resolveWith(this,[Array.prototype.slice.call(arguments)])},function(){e.rejectWith(this,[Array.prototype.slice.call(arguments)])})})}),BEM.DOM.decl("i-keyrouter",{onSetMod:{js:{inited:function(){this.bindToDoc("keydown",function(t){if(this.__self.instance=this,!document.activeElement||!/(INPUT|TEXTAREA)/.test(document.activeElement.nodeName))return this._onKeydown(t)})}}},_onKeydown:function(t){switch(t.keyCode){case 37:case 65:case 72:this.__self.isSpecialKey(t)&&this._emitPress("left",t);break;case 39:case 68:case 76:this.__self.isSpecialKey(t)&&this._emitPress("right",t);break;case 32:this._emitPress("space",t);break;case 70:this._emitPress("f",t);break;case 79:this._emitPress("o",t);break;case 86:this._emitPress("v",t);break;case 34:this._emitPress("pagedown",t);break;case 33:this._emitPress("pageup",t);break;case 13:this._emitPress("enter",t);break;case 27:this._emitPress("esc",t),t.stopImmediatePropagation();break;case 8:this._emitPress("backspace",t);break;case 38:case 87:case 75:this.__self.isSpecialKey(t)&&this._emitPress("up",t);break;case 40:case 83:case 74:this.__self.isSpecialKey(t)&&this._emitPress("down",t)}return!t.isImmediatePropagationStopped()},_emitPress:function(t,e){this.trigger(t,e),BEM.channel("keyrouter").trigger(t,e)}},{get:function(){return this.instance},isSpecialKey:function(t){return!(t.ctrlKey||t.altKey||t.metaKey||t.shiftKey)}}),BEM.DOM.decl("i-keyrouter",{trigger:function(t,e){return window.Ya.reactBus&&window.Ya.reactBus.emit("i-keyrouter:"+t,e),this.__base.apply(this,arguments)}}),BEM.DOM.decl("cookies",{onSetMod:{js:{inited:function(){this.__self.save(this.params.cookies)}}}},{save:function(t){t&&t.forEach(function(t){document.cookie=t})}}),function(t){t.decl("i-userinfo",{resolutions:[{width:240,height:320,ratio:{width:3,height:4}},{width:320,height:480,ratio:{width:2,height:3}},{width:480,height:800,ratio:{width:3,height:5}},{width:640,height:960,ratio:{width:2,height:3}},{width:600,height:1024,ratio:{width:3,height:5}},{width:768,height:1024,ratio:{width:3,height:4}},{width:1920,height:1080,ratio:{width:16,height:9}},{width:1680,height:1050,ratio:{width:16,height:10}},{width:1600,height:900,ratio:{width:16,height:9}},{width:1440,height:900,ratio:{width:16,height:10}},{width:1280,height:1024,ratio:{width:5,height:4}},{width:1366,height:768,ratio:{width:16,height:9}},{width:1280,height:800,ratio:{width:16,height:10}},{width:1152,height:864,ratio:{width:4,height:3}},{width:1024,height:768,ratio:{width:4,height:3}},{width:1200,height:800,ratio:{width:3,height:2}},{width:1280,height:720,ratio:{width:16,height:9}},{width:1280,height:768,ratio:{width:5,height:3}},{width:1280,height:960,ratio:{width:4,height:3}},{width:1366,height:768,ratio:{width:16,height:9}},{width:1400,height:1050,ratio:{width:4,height:3}},{width:1600,height:1200,ratio:{width:4,height:3}},{width:1680,height:945,ratio:{width:16,height:9}},{width:1920,height:1200,ratio:{width:16,height:10}},{width:2048,height:1152,ratio:{width:16,height:9}},{width:2048,height:1536,ratio:{width:4,height:3}},{width:2560,height:1440,ratio:{width:16,height:9}},{width:2560,height:1600,ratio:{width:16,height:10}}],getScreenSize:function(t){var e=this.getDefaultResolution(this.getDeviceInfo(t));if(!t)return e;var i=t.userInfo||{},n={width:i.sw||e.width,height:i.sh||e.height};return n.ratio=this.getRatio(n),n},getWindowSize:function(t){var e,i=this.getDefaultResolution(this.getDeviceInfo(t));return t?{width:(e=t.userInfo||{}).ww||i.width,height:e.wh||i.height}:i},getScreenResolution:function(t){var e=this.getScreenSize(t),i=this.getPixelDensity(t);return{width:Math.floor(e.width*i),height:Math.floor(e.height*i)}},getDeviceInfo:function(t){return{isTablet:t.isTablet,isMobile:t.isMobile,iOS7:t.iOS7,iOS:t.iOS,wp:t.isWindowsPhone}},getDefaultResolution:function(t){var e={width:1366,height:768};return t?(t.isTablet?e={width:1024,height:768}:t.isMobile&&(e={width:640,height:960}),e):e},getRatio:function(t){return{1.25:{width:5,height:4},1.33:{width:4,height:3},1.56:{width:3,height:2},1.6:{width:16,height:10},1.66:{width:5,height:3},1.77:{width:16,height:9},1:{width:1,height:1},.6:{width:3,height:5},.66:{width:2,height:3},.67:{width:2,height:3},.75:{width:3,height:4},.58:{width:3,height:5},.56:{width:9,height:16}}[this.calcRatio(t)]||{width:16,height:9}},getPixelDensity:function(t){return Number((t.userInfo||{}).pd)||1},isRetinaDisplay:function(t){return this.getPixelDensity(t)>1.5},parseResolution:function(t){var e=t.split("x");return{width:parseInt(e[0],10),height:parseInt(e[1],10)}},extendedScreenSize:function(t){var e=this.getDeviceInfo(t),i=this.getScreenResolution(t),n=i.width,s=i.height,o=e.isTablet,r=e.isMobile,a=e.iOS7,c=e.iOS,l=e.wp;return o&&a?n=s=2448:r&&a?(n=1040,s=1536):r&&!c&&!l||o?n=s=Math.max(n,s):c&&!a&&(n=640,s=1136),{width:n,height:s}},findAppropriateResolution:function(t,e,i){var n;return e||(e=this.resolutions),(n=e.map(function(e){return this.calcResolutionDelta(e,t)},this)).sort(this.compare),i?this.getResolutions(n,i):n[0].resolution},getResolutions:function(t,e){for(var i=new Array(e),n=0;n<e;n++)i[n]=t[n].resolution;return i},compare:function(t,e){var i=Math.abs(t.square),n=Math.abs(e.square);return t.ratio===e.ratio?t.square>=0&&e.square>=0?t.square<=e.square?-1:1:Math.min(i,n)<1e5?i<n?-1:1:t.square>e.square?-1:1:i===n?t.ratio<e.ratio?-1:1:i*t.ratio<=n*e.ratio?-1:1},calcResolutionDelta:function(t,e){var i=t.ratio||t;return{ratio:Math.abs(this.calcRatio(i)-this.calcRatio(e)),square:this.calcSquare(t)-this.calcSquare(e),resolution:t}},calcRatio:function(t){return Math.floor((t.width||t.w)/(t.height||t.h)*100)/100},calcSquare:function(t){return(t.width||t.w)*(t.height||t.h)}})}("undefined"!=typeof BEMPRIV?BEMPRIV:BEM),BEM.decl("i-userinfo",{getDefaultParams:function(){return{separator:"-"}},getScreenSize:function(){var t,e=this.getDeviceInfo(),i=window.screen,n={width:i.width,height:i.height,ratio:this.getRatio(i)};return e&&e.isTablet&&n.width<n.height&&(t=n.width,n.width=n.height,n.height=t),n},getDeviceInfo:function(){var t=BEM.blocks["i-global"],e=BEM.blocks["i-ua"];return{isTablet:t.param("tablet"),isMobile:t.param("mobile"),iOS:e.ios,iOS7:parseInt(e.ios,10)>=7,wp:e.wp}},getUserInfo:function(){var t=this.params.separator,e=this.getScreenSize(),i=this.getWindowSize();return[["sw",e.width].join(t),["sh",e.height].join(t),["ww",i.width].join(t),["wh",i.height].join(t),["pd",this.getPixelDensity()].join(t),["wp",this.getWP()].join(t)].join(t)},getWindowSize:function(){return{width:window.innerWidth,height:window.innerHeight}},getPixelDensity:function(){return BEM.DOM.win[0].devicePixelRatio||1},getWP:function(){var t=this.getScreenInfo();return t.ratio.width+"x"+t.ratio.height+"_"+t.width+"x"+t.height},getScreenInfo:function(){if(this._screen)return this._screen;var t=this.getScreenResolution(),e=this.findAppropriateResolution(t);return this._screen={width:e.width,height:e.height,ratio:e.ratio},this._screen}},{_instance:null,get:function(){return this._instance||(this._instance=BEM.create("i-userinfo"))}}),BEM.DOM.decl({block:"serp-user",modName:"type",modVal:"enter"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindTo("login-link","pointerclick",this._updateLoginUrl),this.bindTo("registration-link","pointerclick",this._updateRegistrationUrl)}}},_updateRegistrationUrl:function(){var t=BEM.blocks.uri.parse(this._getPassportUrl()).path("/registration").build(),e=this.findBlockOn("registration-link","button2");e&&e.domElem.attr("href",t)},_updateLoginUrl:function(){var t=this.findBlockOn("login-link","button2");t&&t.setUrl(this._getPassportUrl())},_getPassportUrl:function(){var t=BEM.blocks.utils.getPassportUrl();return this.params.origin&&(t=BEM.blocks.uri.setParam(t,"origin",this.params.origin)),t}},{live:function(){return this.__base.apply(this,arguments),!1}}),BEM.DOM.decl("user2",{onSetMod:{js:{inited:function(){if(this._retpath=this.params._retpath,this._isAuthorized=Boolean(this.params._uid),!this._isAuthorized)return!0;this._currentAccount=this.findBlockOn("current-account","user-account"),this._popup=this.findBlockInside("light-popup"),this._menu=this.findBlockInside("menu"),this._exitItem=this.elem("menu-item","action","exit"),this._plusItem=this.elem("menu-item","action","plus"),this._addItem=this.elem("add-account"),this._accountsContainer=this.findElem(this._menu.domElem,"accounts-container"),this._menuCounter=this.findElem("menu-counter"),this.bindTo("menu-item","pointerclick",this._onMenuItemClick),this.bindTo(this._exitItem,"pointerclick",this._onLogout),BEM.blocks["user-account"].on(this._accountsContainer,"click",this._onAccountClick,this),BEM.blocks["user-account"].on(this._accountsContainer,"logout",this._processLogout,this)}},opened:{yes:function(){this.domElem.attr("aria-expanded",!0),this._popup.setMod("visible","yes").on("beforeClose",this._onPopupClose,this),this._setMaxHeight(),this.bindToWin("resize orientchange",this._setMaxHeight),this._popup.on("beforeOpen",function(){this._onPopupOpen(),this._popup.un("beforeOpen",this._onPopupOpen,this)},this)},"":function(){var t=this.trigger("beforeClose");if(t.isDefaultPrevented&&t.isDefaultPrevented())return!1;this.unbindFromWin("resize orientchange",this._setMaxHeight),this.domElem.attr("aria-expanded",!1),this._popup.delMod("visible").un("beforeClose",this._onPopupClose,this)}}},destruct:function(){return this._isAuthorized&&(BEM.blocks["user-account"].un(this._accountsContainer,"click",this._onAccountClick,this),BEM.blocks["user-account"].un(this._accountsContainer,"logout",this._processLogout,this)),this.__base.apply(this,arguments)},setUnreadCount:function(t){var e=this._menu.findBlockInside("user-account");return this._currentAccount.setCounter(t),e&&e.hasMod("has-ticker")&&e.setCounter(t),this._menuCounter&&this._menuCounter.length&&(t>0?this.delMod(this._menuCounter,"state","empty"):this.setMod(this._menuCounter,"state","empty"),this._menuCounter[0].innerText=t),this},setRetpath:function(t){this._retpath=t;var e=encodeURIComponent(t);return $().add(this._menu&&this._menu.findElem("item")).add(this.findElem("current-account")).add(this.findElem("a11y-exit")).add(this.findElem("enter")).add(this._addItem).each(function(t,i){var n=$(i),s=n.attr("href");if(s){var o=s.replace(/([\&\?]retpath=)[^\&]*/,"$1"+e);o!==s&&n.attr("href",o)}}),this},getPopup:function(){return this._popup},getMenu:function(){return this._menu},getCurrentAccount:function(){return this._currentAccount},_changeUser:function(t){var e=this.params._passportHost+"/passport?mode=embeddedauth";$('<form method="POST" action="'+e+'"><input type="hidden" name="action"  value="change_default"><input type="hidden" name="uid"     value="'+t+'"><input type="hidden" name="retpath" value="'+this._retpath+'"><input type="hidden" name="yu"      value="'+this.params._yu+'"></form>').appendTo("body").submit()},_onCurrentAccountClick:function(t,e){t.block===this._currentAccount&&(e.domEvent.preventDefault(),this.toggleMod("opened","yes"),this.trigger("current-account-click"))},_onAccountClick:function(t,e){if(!e.isLogout){var i=this.elemParams(t.block.domElem).uid;this._changeUser(i)}},_onPopupClose:function(){this.delMod("opened")},_onPopupOpen:function(){this.trigger("beforeOpen")},_processLogout:function(t){var e=this.elemParams(t.target.domElem).uid;e&&this.trigger("logout-click",{uid:e,account:t.target})},_onMenuItemClick:function(){this.trigger("menu-item-click")},_onLogout:function(){this.trigger("logout")},_setMaxHeight:function(){var t=BEM.DOM.win,e=this.params.menuMaxHeight;e||(e=t.height()-this.domElem.offset().top+t.scrollTop()),this._menu.domElem.css("max-height",e)},getDefaultParams:function(){return{menuMaxHeight:0}}},{live:function(){this.liveInitOnBlockInsideEvent("init","user-account"),this.liveInitOnBlockInsideEvent("click","user-account",this.prototype._onCurrentAccountClick),this.liveBindTo("enter","pointerclick",function(){this.trigger("login")})}}),BEM.DOM.decl("user2",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._syncMenuCounterWithTicker(),BEM.channel("unread-letters-count").on("update",this._onUnreadLettersCountUpdate.bind(this)),this.win=window,this.userIdLoaded=!1,this.inited=!1,this._content=this.findElem("content"),this.onStart=this.onStart.bind(this);var t=this.updateSkin.bind(this);window.addEventListener("skin_change",function(e){t(e.detail)}),this._userPic=this.findBlockInside("user-pic"),this._userPic.setMod("theme",Ya.skin||"light")}},opened:{yes:function(){this.__base.apply(this,arguments),this.setRetpath(window.location.href)}}},_syncMenuCounterWithTicker:function(){this.setUnreadCount(this.findBlockInside("ticker").val())},_onUnreadLettersCountUpdate:function(t,e){this.setUnreadCount(e)},getDefaultParams:function(){return{baseUrl:"https://yastatic.net/s3/frontend",loaderVersion:"v0.3.0",service:"sakhalin"}},_insertLink:function(t,e){var i=document.head||document.body,n=document.createElement("link");n.rel=t,n.href=e,i.insertBefore(n,i.lastChild)},_insertPrefetch:function(){this._insertLink("prefetch",this._getLoaderUrl())},_insertPrerender:function(){this._insertLink("prerender",this._getIframeUrl())},_loadIframeFirstTime:function(){void 0===window.LegoIframeLoader?this._insertLoaderScript(this._loadIframe.bind(this)):this._loadIframe()},_insertLoaderScript:function(t){var e=document.head||document.body,i=document.createElement("script");i.setAttribute("src",this._getLoaderUrl()),i.onload=t,e.insertBefore(i,e.lastChild)},_loadIframe:function(){var t={iframeUrl:this._getIframeUrl(),container:this._content.get(0)};this._atom=new window.LegoIframeLoader(t),this._currentIframeUrl=t.iframeUrl,this._rpcBridge=this._atom.getRPCBridge(this),this._rpcBridge.pushMessagesToQueue=!0,this._atom.on("init",this._onIframeLoad.bind(this)),this._atom.init()},_onIframeLoad:function(t,e){this._rpcBridge.contrAgent.win=e.iframeWin,this._rpcBridge.onIframeLoad();var i=this._content.find("iframe");i&&i.addClass&&i.addClass("user-iframe")},_getLoaderUrl:function(){return this.params.loaderUrl||this.params.baseUrl+"/iframe-loader/"+this.params.loaderVersion+"/index.min.js"},_getIframeUrl:function(){var t="https://"+(this.params.host||"yandex."+this.params.tld)+"/user-id";return BEM.blocks.uri.setParams(t,{project:"serp",showFamilySwitch:this.params.showFamilySwitch,exp_flags:this.params.expFlags||"serp",retpath:this._retpath,family:this.params.family,utm_source:this.params.service,l10n:this.params.lang,theme:Ya.skinMode,colorScheme:Ya.skin||"light"})},onDataLoad:function(){this.setMod("loading",!1),this._spin&&this._spin.destruct(),this.userIdLoaded=!0},setRetpath:function(t){this._retpath=t,this.userIdLoaded&&this._rpcBridge.invokeMethod("updateRetpath",{retpath:t})},closeUserID:function(){this.setMod("opened",!1)},updateSkin:function(t){this._rpcBridge&&Ya.skinMode&&(this._rpcBridge&&this._rpcBridge.invokeMethod("updateTheme",{theme:Ya.skinMode,colorScheme:t}),this._userPic.setMod("theme",t))},updateTheme:function(t){var e,i=t.theme;"light"===i?e={tune:"light",cookie:"l"}:"dark"===i?e={tune:"night",cookie:"d"}:"system"===i&&(e={tune:"system",cookie:"s"});var n=window.BEM.blocks["i-cookie"].get();n.yp("skin",e.cookie,n.getExpirationDate(3650));var s=window.Ya.InternalState.mainDomain;fetch("//"+s+"/portal/tune/settings/store?mode=big",{method:"POST",body:JSON.stringify({skin:e.tune,sk:this.params.sk}),headers:{"Content-Type":"application/json"}}),window.dispatchEvent(new CustomEvent("skin_mode_change",{detail:i})),this._rpcBridge&&this._rpcBridge.invokeMethod("updateTheme",{theme:i})},updateUserHeight:function(t){t.height>0&&this._content.css({height:t.height})},_removeIframe:function(){this._atom&&(this._rpcBridge.clean(),this._rpcBridge=void 0,this._atom.removeIframe(),this._atom=void 0)},destruct:function(){this._removeIframe(),this.__base.apply(this,arguments)},_setMaxHeight:function(){this.__base.apply(this,arguments);var t=this._menu&&this._menu.domElem.css("max-height");t&&this._content.css("max-height",t)},onStart:function(){this.inited||(this.setMod("loading","yes"),this._spin=this.findBlockInside("spin2"),this._spin&&this._spin.setMod("progress","yes"),this._insertPrefetch(),this._insertPrerender(),this._loadIframeFirstTime(),this.inited=!0)}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("pointerover focus focusin click",function(){this.onStart()})}}),BEM.DOM.decl("user-account",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._userPic=this.findBlockInside("user-pic")}}},setCounter:function(t){var e=this.findBlockInside("ticker");e&&e.val(t)},_onClick:function(t){var e={domEvent:t};this.isLogoutClick&&(e.isLogout=!0,this.isLogoutClick=!1),this.trigger("click",e)},_onMouseOver:function(t){this.setMod("hovered","yes").bindTo("mouseleave",this._onMouseLeave)},_onMouseLeave:function(){this.delMod("hovered").unbindFrom("mouseleave")},_onFocusIn:function(t){this.trigger("focus").setMod("focused","yes").bindTo("focusout",this._onFocusOut),this._userPic.setMod("focused","yes")},_onFocusOut:function(){this.trigger("blur").delMod("focused").unbindFrom("focusout"),this._userPic.delMod("focused")},_onLogoutClick:function(){this.isLogoutClick=!0,this.trigger("logout")}},{live:function(){this.liveBindTo("pointerclick",this.prototype._onClick),this.liveBindTo("focusin",this.prototype._onFocusIn),this.liveBindTo("mouseover",this.prototype._onMouseOver),this.liveBindTo("logout","pointerclick",this.prototype._onLogoutClick)}}),BEM.DOM.decl({block:"link",modName:"pseudo",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.hasMod("disabled")||this.trigger("click",this._buildClickEventData(t))},_onKeydown:function(t){BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&t.preventDefault(),this.setMod("pressed","yes"))},_onKeyup:function(t){BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&this.trigger("click"),this.delMod("pressed"))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}}},{live:function(){return this.liveBindTo({modName:"pseudo",modVal:"yes"},"pointerclick",function(t){this._onClick(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}),this.__base()}}),BEM.DOM.decl("user-pic",{onSetMod:{js:{inited:function(){var t=this.elem("link")[0];t&&(t.href=this.params.cameraURL+"?retpath="+encodeURIComponent(window.location.href)+"&origin="+this.params.origin)}}},getDefaultParams:function(){return{origin:"userpic",cameraURL:"https://passport.yandex.ru/profile/public"}}}),BEM.DOM.decl({block:"user-account",modName:"has-ticker",modVal:"yes"},{getTicker:function(){return this.findBlockOn("ticker","ticker")}}),BEM.DOM.decl("ticker",{onSetMod:{js:{inited:function(){this._count=this.params.count}}},show:function(){return this.setMod("state","normal")},hide:function(){return this.setMod("state","empty")},val:function(t){if(!arguments.length)return this._count;var e=this.params.maxCount,i=e+"+";return this._count=t,this.elem("value").attr("title",t).text(t>e?i:t),t?this.show():this.hide(),this}}),BEM.DOM.decl("ticker",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.channel("unread-letters-count").on("update",this._onUnreadLettersCountUpdate.bind(this))}}},_onUnreadLettersCountUpdate:function(t,e){e>=0&&this.val(e)}}),BEM.DOM.decl("light-popup",{onSetMod:{js:{inited:function(){this._moved=this.params.moved}},visible:{yes:function(){this.trigger("beforeOpen"),!this._moved&&this._moveToTarget()},"":function(){"yes"===this.getMod("animated")&&this.setMod("reverse-animation"),this.trigger("beforeClose")}}},_moveToTarget:function(){var t=this.findBlockOutside(this.params.target);this._owner=t.domElem||BEM.DOM.scope,this._owner.append(this.domElem),this._moved=!0},setContent:function(t){this._isUpdatedContent||(this._isUpdatedContent=!0,this.afterCurrentEvent(function(){delete this._isUpdatedContent}),BEM.DOM.update(this.domElem,t))},getDefaultParams:function(){return{moved:!1}}}),BEM.DOM.decl({block:"light-popup",modName:"autoclosable",modVal:"yes"},{onSetMod:{visible:{yes:function(){this.__self._visiblePopupsStack.unshift(this),this.afterCurrentEvent(function(){this.domElem&&this.hasMod("visible")&&this.bindToDoc("pointerdown",this._onDocClick)}),this.__base.apply(this,arguments)},"":function(){var t=this.__self._visiblePopupsStack;t.splice(t.indexOf(this),1),this.unbindFromDoc("pointerdown").__base.apply(this,arguments)}}},_onDocClick:function(t){this.hasMod("visible")&&!this.containsDomElem($(t.target))&&this.delMod("visible")}},{live:function(){return BEM.DOM.doc.on("keydown",this._onDocKeyPress.bind(this)),this.__base()},_visiblePopupsStack:[],_onDocKeyPress:function(t){BEM.blocks.keycodes.is(t.keyCode,"ESC")&&this._visiblePopupsStack.length&&this._visiblePopupsStack[0].delMod("visible")}}),BEM.DOM.decl({block:"menu",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.elem("item").attr("id",function(t,e){return e||$.identify()}),this._val=this.getVal()}},disabled:function(t,e){this.__base.apply(this,arguments),this.setMod(this.elem("item"),t,e)}},onElemSetMod:{item:{hovered:{yes:function(t){if(this.hasMod(t,"disabled"))return!1;this.delMod(this.elem("item","hovered","yes"),"hovered"),this.domElem.attr("aria-activedescendant",t.attr("id")),this.trigger("item-hover",{item:t})},"":function(){this.domElem.removeAttr("aria-activedescendant"),this.trigger("item-hover",{})}},checked:function(t,e,i){this.domElem.attr("aria-selected",Boolean(i))},disabled:{yes:function(){this.delMod("hovered"),this.domElem.attr("aria-disabled",!0)},"":function(){this.domElem.attr("aria-disabled",!1)}}}},_onChange:function(){var t=this._val,e=this.getVal();return t!==e&&(this._val=e,this.trigger("change",{prevVal:t,currVal:e})),this},getItems:function(t,e){return this.elem("item",t,e).get().map(function(t){return $(t)})},setContent:function(t){return BEM.DOM.update(this.domElem,t),this.reset(),this},getVal:function(){},reset:function(){this.dropElemCache()},_onItemEnter:function(t,e){this.setMod(t,"hovered","yes")},_onItemLeave:function(t,e){this.delMod(t,"hovered")},_onItemFocusin:function(t,e){this.setMod(t,"hovered","yes")},_onFocusout:function(t){this.__base.apply(this,arguments),this.delMod(this.elem("item","hovered","yes"),"hovered")},_onItemClick:function(t,e,i){this.trigger("click",{item:t,source:i.source})}},{live:function(){return this.liveBindTo("item","pointerover pointerout",function(t){var e=t.data.domElem;e[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onItemEnter(e,t):this._onItemLeave(e,t))}).liveBindTo("item","pointerclick",function(t){var e=t.data.domElem;this._onItemClick(e,t,{source:"pointer"})}).liveBindTo("item","focusin",function(t){var e=t.data.domElem;this._onItemFocusin(e,t)}).liveBindTo("focusout",function(t){this._onFocusout(t)}),this.__base()}}),BEM.DOM.decl("menu",{onSetMod:{focused:{yes:function(){if(this.__base.apply(this,arguments),this.hasMod("type","navigation"))return!1;this.elem("item","hovered","yes").length||(this.setMod(this.elem("item").eq(0),"hovered","yes"),this._scrollToItem(this.elem("item").eq(0))),this.bindToDoc("keydown",this._onKeydown).bindToDoc("keyup",this._onKeyup).bindToDoc("keypress",this._onKeypress)},"":function(){this.__base.apply(this,arguments),this.unbindFromDoc("keydown keyup keypress").delMod(this.elem("item","hovered","yes"),"hovered")}}},hoverNext:function(t){for(var e,i,n=t?this.getItems().reverse():this.getItems(),s=0,o=!1;i=n[s];s++)if(!this.hasMod(i,"disabled"))if(this.hasMod(i,"hovered"))o=!0;else{if(o){e=i;break}e||(e=i)}e&&(this.setMod(e,"hovered","yes"),this._scrollToItem(e))},hoverText:function(t,e){for(var i,n=this.getItems(),s=n.length,o=this._normalizeText(t),r=e||0;r<s;){if(i=n[r],!this.hasMod(i,"disabled")&&0===this._normalizeText(i.text()).indexOf(o))return this.setMod(i,"hovered","yes"),void this._scrollToItem(i);++r===n.length&&(r=0,s=e)}},_normalizeText:function(t){return t.toLowerCase().replace(/ё/,"е")},reset:function(){this.__base.apply(this,arguments),this._dropSearchCache()},_dropSearchCache:function(){this._lastTime=this._lastChar=this._searchTerm=void 0},_scrollToItem:function(t){var e=this.domElem.offset().top,i=t.offset().top,n=0;i<e?n=i-e:(n=i+t.outerHeight()-e-this.domElem.outerHeight())<0&&(n=0),this.domElem.scrollTop(this.domElem.scrollTop()+n)},_onKeydown:function(t,e){var i=BEM.blocks.keycodes,n=t.keyCode;t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||((i.is(n,"UP","DOWN")||!e&&n===i.SPACE)&&t.preventDefault(),i.is(n,"UP","DOWN")&&(this.hoverNext(i.is(n,"UP")),this._dropSearchCache()))},_onKeyup:function(t){var e=BEM.blocks.keycodes,i=t.keyCode;t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||e.is(i,"ENTER","SPACE")&&this._onItemClick(this.elem("item","hovered","yes"),t,{source:"keyboard"})},_onKeypress:function(t){var e,i,n=Number(new Date),s=t.charCode,o=String.fromCharCode(s).toLowerCase(),r=o===this._lastChar&&1===this._searchTerm.length,a=this.getItems();s<=BEM.blocks.keycodes.SPACE||t.ctrlKey||t.altKey||t.metaKey?this._lastTime=n:(n-this._lastTime>this.SEARCH_TIMEOUT||r?this._searchTerm=o:this._searchTerm=(this._searchTerm||"")+o,this._lastChar=o,this._lastTime=n,e=this.elem("item","hovered","yes"),i=(i=$($.map(a,function(t){return t.get()})).index(e))>=0?i:0,r&&0===this._normalizeText(e.text()).indexOf(this._searchTerm)&&(i=i>=a.length-1?0:i+1),this.hoverText(this._searchTerm,i))},SEARCH_TIMEOUT:1500}),BEM.DOM.decl("unread-letters-updater",{onSetMod:{js:{inited:function(){this._noticeRequest(this._noticeCheck.bind(this),function(){})}}},_noticeCheck:function(t){var e=t&&t.counters&&t.counters.unread,i=parseInt(e,10)||0;BEM.channel("unread-letters-count").trigger("update",i)},_disableNotice:function(){var t=BEM.blocks["i-ua"].ie;return Boolean(t)&&t<10||!this.params.hasMailBox},_noticeRequest:function(t,e){this._disableNotice()||BEM.create("i-request_type_ajax",{url:"https://mail.yandex."+BEM.blocks["i-global"].param("tld")+"/api/v2/serp/counters?silent",dataType:"json",xhrFields:{withCredentials:!0},paramsToSettings:["xhrFields"]}).get({},t,e)}}),BEM.DOM.decl("b-page",{bindEvents:function(){return this.__base.apply(this,arguments),this._location.on("b-page_type_search-by-image",this._onPageSearchByImage,this),this},_onPageSearchByImage:function(t,e){this.checkCacheKey()&&(this.cbirIntent=this.findBlockInside("cbir-intent"),this.cbirIntent&&this.cbirIntent.show(),Ya.reactBus.emit("cbir:change-page",{pageType:"search-by-image",queryParams:e.params}))}}),BEM.DOM.decl("b-page",{bindEvents:function(){return this.__base.apply(this,arguments),this._location.on("b-page_type_similar",this._onPageSimilar,this),this},_onPageSimilar:function(t,e){if(this.checkCacheKey()){if(this.cbirIntent=this.findBlockInside("cbir-intent"),this.cbirIntent&&this.cbirIntent.show(),this.findBlockInside("cbir-page-layout"))return void Ya.reactBus.emit("cbir:change-tab",{pageType:"similar",queryParams:e.params});Ya.reactBus.emit("cbir:change-page",{pageType:"similar",queryParams:e.params})}}}),BEM.DOM.decl("b-page",{bindEvents:function(){return this.__base.apply(this,arguments),this._location.on("b-page_type_cbir-landing",this._onPageCbirLanding,this),this},_onPageCbirLanding:function(t,e){this.checkCacheKey()&&(this.cbirIntent=this.findBlockInside("cbir-intent"),this.cbirIntent&&this.cbirIntent.hide({clear:!0}),Ya.reactBus.emit("cbir:change-page",{pageType:"cbir-landing",queryParams:e.params}))}}),BEM.DOM.decl("b-page",{bindEvents:function(){return this.__base.apply(this,arguments),this._location.on("b-page_type_cbir-products",this._onPageCbirProducts,this),this},_onPageCbirProducts:function(t,e){this.checkCacheKey()&&(this.cbirIntent=this.findBlockInside("cbir-intent"),this.cbirIntent&&this.cbirIntent.show(),Ya.reactBus.emit("cbir:change-page",{pageType:"cbir-products",queryParams:e.params}))}}),BEM.DOM.decl("b-page",{bindEvents:function(){return this.__base.apply(this,arguments),this._location.on("b-page_type_cbir-sites",this._onPageCbirSites,this),this},_onPageCbirSites:function(t,e){this.checkCacheKey()&&(this.cbirIntent=this.findBlockInside("cbir-intent"),this.cbirIntent&&this.cbirIntent.show(),Ya.reactBus.emit("cbir:change-page",{pageType:"cbir-sites",queryParams:e.params}))}}),BEM.DOM.decl("cbir-controller",{loadCbirPage:function(t){},loadFullPage:function(t){},changeCbirPage:function(t){var e=t.pageType||BEM.blocks["i-global"].param("page"),i=t.url||BEM.blocks.uri.buildRelativeUrl(BEM.blocks["i-global"].param("router").search,BEM.blocks["i-url-controller"].mergePassedUrlParams(t.queryParams));(t.withHistory||t.withReplace)&&(BEM.blocks.location.getInstance().change(Object.assign({},history.state,{block:"b-page_type_"+e,url:i,history:!t.withReplace,trigger:!1})),BEM.blocks["b-page"].getInstance().updateCacheKey()),!1!==t.withLoad&&this.loadCbirPage({pageType:e,url:i})}},{live:function(){this.__base.apply(this,arguments),this.liveInitOnReactBusEvent("cbir:change-page",function(t){this.changeCbirPage(t)})},getInstance:function(){return this._instance||(this._instance=$(this.buildSelector()).bem(this.getName())),this._instance}}),BEM.DOM.decl("cbir-controller",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.findBlocks()}}},findBlocks:function(){return this.cbirIntent=this.findBlockInside("cbir-intent"),this},showIntent:function(){return this.cbirIntent.show(),this},hideIntent:function(){return this.cbirIntent.hide({clear:!0}),this},loadCbirPage:function(t){var e=this.findBlockInside("cbir-page-layout");e?e.load(t):this.loadFullPage(t)},loadFullPage:function(t){var e=this,i=$(".search2").length&&$(".search2").bem("search2");i&&i._input?i.updateCbirPage():Ya.reactBus.emit("HeaderDesktop:updateContext",{query:""});var n=[{name:"cbir-intent__image-link",callback:function(t){e.findBlocks(),e.cbirIntent.show({src:t.html})}}],s=BEM.blocks["b-page"].getInstance();"similar"===t.pageType&&n.push({name:"misspell:ajax",callback:function(t){t.params&&t.params.text&&Ya.reactBus.emit("HeaderDesktop:updateContext",{query:t.params.text})}}),s.load({type:t.pageType,url:t.url,blocks:n})}}),BEM.DOM.decl("cbir-counter",{_onCbirButtonClick:function(){}},{live:function(){this.liveInitOnBlockInsideEvent("cbir-button-click","input",function(){this._onCbirButtonClick()})}}),BEM.DOM.decl("cbir-counter",{_onCbirButtonClick:function(){window.Ya.counter.hit({dtype:"iweb",path:"/image/new/cbir/header/camera"})}});var f=new bemhtml({production:!0});f.compile(function(){block("incut").attrs()(function(){var t={},e=this.ctx.js;return e.position>=0&&(t["data-position"]=e.position),e.positionType&&(t["data-position-type"]=e.positionType),e.size&&(t["data-size"]=e.size),e.horizontalPos&&e.afterPos&&(t["data-h-pos"]=e.horizontalPos,t["data-after-pos"]=e.afterPos),e.incutNodeId&&(t.id=e.incutNodeId),e.contentHeight&&(t["data-content-height"]=e.contentHeight),e.posShift&&(t["data-position-shift"]=e.posShift),this.ctx.gridType&&(t["data-type"]=this.ctx.gridType),t})}),window.BEMHTML={},f.exportApply(window.BEMHTML),function(t){if("function"==typeof t.I18N&&t.I18N._proto)return t.I18N;"undefined"==typeof i18n&&(i18n={}),BEM=t;var e="_",i="__",n={ru:{},en:{}},s=[],o="",r="en",a="lego",c="",l="",u=!1,h="undefined"!=typeof console&&"function"==typeof console.log;function d(t){u&&h&&console.log(t,"keyset: "+c+" key: "+l+" (lang: "+o+")")}function p(t){return"string"==typeof t?t:t.block+(t.elem?i+t.elem:"")+(t.modName?e+t.modName+e+t.modVal:"")}function f(t){var s=function(t){var n={};return t.split(i).forEach(function(t,i){var s=[i?"elem":"block","mod","val"];t.split(e).forEach(function(t,e){n[s[e]]=t})}),n}(c),r="i-tanker"===s.block?"tanker":a,u=s.elem||c;(u=(r=i18n[r]||(i18n[r]={}))[u]||(r[u]={}))[l]="function"==typeof t?t:function(){return t};var h=n[o]||(n[o]={});(h[c]||(h[c]={}))[l]=t}function m(t){var e=t[l];return{value:e,valtype:typeof e}}var g=function(t,e,i){return g.keyset(t).key(e,i)};g._proto=!0,g.project=function(t){return a=t,this},g.keyset=function(t){return c&&s.push(c),c=p(t),this},g.key=function(t,e){o=this._lang,r=this._defLang,l=t;var i=function(t,e){var i=n[o]&&n[o][c],s=n[r][c]||n.ru[c];if(!i&&(d("[I18N_NO_KEYSET] %s"),!s))return"";var a=m(i||s);return"undefined"===a.valtype&&(d("[I18N_NO_VALUE] %s"),s&&s!==i&&(a=m(s)),"undefined"===a.valtype)?"":"string"===a.valtype?a.value:a.value.call(e||this,t)}(e,g),a=s.length&&s.pop();return a&&(c=p(a)),i},g.decl=function(t,e,i){for(var n in i&&i.lang&&(o=i.lang,r=this.getDefLang(o)),c=p(t),e)e.hasOwnProperty(n)&&(l=n,f(e[n]));return this},g.lang=function(t){return void 0!==t&&(this._lang=t,this._defLang=this.getDefLang(t)),this._lang},g.getDefLang=function(t){switch(t){case"et":case"fi":case"id":case"lt":case"lv":case"pl":case"tr":return"en";default:return"ru"}},g.debug=function(t){u=Boolean(t)},g.lang("ru"),t.I18N=g}("undefined"==typeof BEM?{}:BEM),"undefined"!=typeof BEM&&BEM.I18N&&(BEM.I18N.decl("b-statcounter__metrika",{JSERR_incorrectID:"Incorrect ID has been passed."},{lang:"ru"}),BEM.I18N.decl("cbir-intent_spok_yes",{"Загружаем картинку":"Загружаем картинку","Загруженная картинка":"Загруженная картинка","Закрыть":"Закрыть"},{lang:"ru"}),BEM.I18N.decl("competitors",{"Посмотреть «{query}» в других поисковых системах:":function(t){return"Посмотреть «"+t.query+"» в других поисковых системах:"},"Ссылки на поисковые системы скрыты, так как включен семейный фильтр":"Ссылки на поисковые системы скрыты, так как включен семейный фильтр"},{lang:"ru"}),BEM.I18N.decl("copyright",{link:function(t){return"ООО «"+t.content+"»"},yandex:"ЯНДЕКС"},{lang:"ru"}),BEM.I18N.decl("footer",{about:"О компании","about-url":"//company.yandex.ru",advert:"Реклама","advert-url":"//advertising.yandex.ru/kupislova.xml?advertising",apps:"Мобильные приложения","apps-url":"//mobile.yandex.ru",stat:"Статистика",termsofuse:"Лицензия на поиск","termsofuse-url":"//legal.yandex.ru/termsofuse/"},{lang:"ru"}),BEM.I18N.decl("i-services",{404:"404",adresa:"Адреса",advertising:"Реклама",afisha:"Афиша",all:"Все сервисы",api:"API",appmetrica:"AppMetrica",appsearch:"Приложения",audience:"Аудитории",auto:"Авто",autoru:"Авто.ру",avia:"Авиабилеты",aziada:"Азиада",ba:"Баян",backapv:"Партнер Я.Карт",balance:"Баланс",bar:"Бар","bar-ie":"Бар для ИЕ","bar-ie9":"Бар для ИЕ9",bayan:"Баннеры Яндекса",blogs:"Блоги",books:"Книги",browser:"Браузер",calendar:"Календарь",captcha:"ой...",catalogwdgt:"Каталог виджетов",chrome:"Хром с поиском Яндекса",city:"Города",cityday:"День города",clickhouse:"ClickHouse",collection:"Коллекция",company:"Компания",contest:"Contest",delivery:"Доставка",desktop:"Персональный поиск",direct:"Директ","direct.market":"Маркет",disk:"Диск",display:"Дисплей",ege:"ЕГЭ",ether:"Эфир",expert:"Эксперт",favorites:"Избранное",feedback:"Обратная связь",feedback2:"Обратная связь",ff:"ФФ с поиском Яндекса",fotki:"Фотки",fresh:"Свежее",games:"Игрушки",geocontext:"Геоконтекст",goroda:"Города",help:"Помощь",i:"Мои сервисы",ie:"ИЕ с поиском Яндекса",images:"Картинки","images-com":"Картинки",interests:"Интересы",internet:"Интернет",kassa:"Касса",keyboard:"Клавиатура",kraski:"Краски",kuda:"Куда все идут",large:"Яндекс для слабовидящих",legal:"Правовые документы",lenta:"Лента",libra:"Библиотека",literacy:"Неделя борьбы за грамотность",local:"Локальная сеть",lost:"Незабудки",love:"День взаимного тяготения — 13 августа",mail:"Почта",maps:"Карты","maps-wiki":"Народная карта",market:"Маркет","market.advertising":"Маркет",master:"Мастер",metrika:"Метрика",metro:"Метро",mirror:"Зеркало",mobile:"Мобильный",moikrug:"Мой Круг",money:"Деньги",museums:"Дни исторического и культурного наследия",music:"Музыка","music-partner":"Музыка: статистика",nahodki:"Мои находки",nano:"Нано",newhire:"Наниматор",news:"Новости",notifications:"Нотификационная панель",oauth:"Авторизация",online:"Онлайн",openid:"OpenID",opera:"Opera Software",opinion:"Цитаты",partners:"Рекламная сеть",partnersearch:"Поиск для партнеров",passport:"Паспорт",pdd:"Почта для домена",peoplesearch:"Люди",perevod:"Переводчик",plus:"Плюс",probki:"Пробки",products:"Товары",pulse:"блоги: пульс",punto:"Punto switcher",pvo:"Ответы",rabota:"Работа",radar:"Радар",ramazan:"",rasp:"Расписания",realty:"Недвижимость",referats:"Рефераты",rk:"Есть вопросы?",root:"Яндекс.Олимпиада для Unix администраторов",school:"Школа",search:"Поиск",server:"Сервер",shtrafi:"Штрафы",site:"Поиск для сайта",slovari:"Словари",so:"Самооборона",social:"Социализм",soft:"Программы",sport:"Спорт",sprav:"Справочник",start:"Стартовая страница",stat:"Статистика",subs:"Подписки",taxi:"Такси",telephony:"Телефония",terms:"Разговорник",tests:"Тесты и опросы",tickets:"Билеты",time:"Яндекс.Время",toloka:"Яндекс.Толока",toster:"Тосты",translate:"Переводчик",tune:"Настройки",tv:"ТВ",ugc:"Отзывы",uslugi:"Услуги",video:"Видео","video-com":"Видео",vno:"ВНО",wdgt:"Виджеты",weather:"Погода",webmaster:"Вебмастер","webmaster-api":"API Вебмастера",widgets:"Виджеты",wordstat:"Статистика",wow:"Я.ру",www:"Поиск",xmlsearch:"XML",yabs:"",yaca:"Каталог",yamb:"Медийные баннеры",zakladki:"Закладки"},{lang:"ru"}),BEM.I18N.decl("i-tanker__dynamic",{gender:function(t){return function(t){return t[t.gender]}.call(this,t)},plural:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count,i=e%10,n=e%100;return 1==i&&11!=n?t.one:i>1&&i<5&&(n<10||n>20)?t.some:t.many}.call(this,t)},plural_adv:function(t){return function(t){return 0===(isNaN(parseInt(t.count))?0:t.count)?t.none:this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.one,some:t.some,many:t.many})}.call(this,t)},toggle:function(t){return function(t){return Boolean(t.condition)?t.true:t.false}.call(this,t)}},{lang:"ru"}),BEM.I18N.decl("input",{"Очистить":"Очистить","Расширенный поиск":"Расширенный поиск"},{lang:"ru"}),BEM.I18N.decl("input_spok_yes",{"Поиск по изображению":"Поиск по изображению"},{lang:"ru"}),BEM.I18N.decl("logo_type_link",{yandex:"Яндекс"},{lang:"ru"}),BEM.I18N.decl("search2",{"search-button-text":"Найти","search-input-label":"Запрос","search-service-label":"Поиск по сервису","search-web-label":"Поиск в интернете"},{lang:"ru"}),BEM.I18N.decl("search2_spok_yes",{"Найти":"Найти"},{lang:"ru"}),BEM.I18N.decl("serp-controller_spok_yes",{"Результаты поиска":"Результаты поиска"},{lang:"ru"}),BEM.I18N.decl("serp-item",{"Яндекс Маркет":"Яндекс Маркет","{price} на сайте магазина":function(t){return t.price+" на сайте магазина"},"Купить":"Купить"},{lang:"ru"}),BEM.I18N.decl("serp-user_spok_yes",{"{login}, это вы?":function(t){return t.login+", это вы?"},"Войти":"Войти","Да, войти":"Да, войти","Другой аккаунт":"Другой аккаунт","Регистрация":"Регистрация"},{lang:"ru"}),BEM.I18N.decl("ticker__text",{notifications:"Уведомлений"},{lang:"ru"}),BEM.I18N.decl("user-pic",{"avatar-alt":"Фото профиля"},{lang:"ru"}),BEM.I18N.decl("user2",{"add-account":"Добавить аккаунт","add-organization":"Создать организацию","add-organization2":"Добавить организацию","edit-accounts":"Редактировать список",enter:"Войти",exit:"Выйти",exit_title:"Выйти из аккаунта",help:"Справка",mail:function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"новое письмо",some:"новых письма",many:"новых писем",none:"Нет новых писем"})},mail_compose:"Написать письмо","modal-close":"Закрыть",organization:"Организация",passport:"Управление аккаунтом","pin-code":"PIN-код","pin-code-info":"Для обращения в поддержку","pin-code-description":"Сообщите PIN-код сотруднику службы поддержки для доступа к вашему аккаунту","pin-code-error1":"Ошибка генерации PIN-кода.","pin-code-error2":"Попробуйте сгенерировать код позднее.","pin-code-gen":"Получить PIN-код",settings:"Настройки",upload_files:"Мой диск",ya_plus:"Получить Плюс",ya_plus_on:"активен",ya_plus_on_title:"Плюс активен",badge_lang:"ru"},{lang:"ru"}),BEM.I18N.decl("yaplus",{be_plus:"Будьте в Плюсе",btn_left:"Не сейчас",btn_right:"Интересно",btn_right_enabled:"Подробнее",enable:"Включить",tooltip_descr:"Скидки в Такси, полный доступ к Музыке и многое другое",tooltip_descr_enabled:"Теперь у вас есть скидки в Такси, полный доступ к Музыке и многое другое",tooltip_header:"Подписка Яндекс.Плюс"},{lang:"ru"}),BEM.I18N.lang("ru"))}window.jQuery&&window.bemhtml?runCommon():window.Ya&&window.Ya.commonWaitDeps&&window.Ya.commonWaitDeps(runCommon);